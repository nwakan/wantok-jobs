import{$ as C,r as n,aj as j,j as e}from"./index-BpglRmhx.js";function k(){const{showToast:d}=C(),[h,v]=n.useState([]),[N,u]=n.useState(!0),[i,o]=n.useState("all"),[c,w]=n.useState(""),[m,y]=n.useState("cards"),[l,p]=n.useState({page:1,totalPages:1});n.useEffect(()=>{g()},[i,l.page]);const g=async()=>{u(!0);try{const t=i!=="all"?{role:i,page:l.page}:{page:l.page},s=await j.getUsers(t),a=(s.data||[]).map(r=>({...r,profile_completeness:Math.floor(Math.random()*40)+60,last_active:new Date(Date.now()-Math.random()*7*24*60*60*1e3).toISOString(),status:Math.random()>.2?"active":"suspended"}));v(a),p({page:s.page||1,totalPages:s.totalPages||1})}catch(t){console.error("Failed to load users:",t)}finally{u(!1)}},x=async(t,s)=>{const a=s==="delete"?"Are you sure you want to delete this user? This action cannot be undone.":`Are you sure you want to ${s} this user?`;if(confirm(a))try{await new Promise(r=>setTimeout(r,500)),d(`User ${s}ed successfully`,"success"),g()}catch(r){d(`Failed to ${s} user: ${r.message}`,"error")}},b=async(t,s)=>{if(confirm("Are you sure you want to change this user's role?"))try{await j.updateUser(t,{role:s}),d("Role updated successfully","success"),g()}catch(a){d("Failed to update user: "+a.message,"error")}},f=h.filter(t=>{var s,a;return!c||((s=t.name)==null?void 0:s.toLowerCase().includes(c.toLowerCase()))||((a=t.email)==null?void 0:a.toLowerCase().includes(c.toLowerCase()))});return N?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Manage Users"}),e.jsxs("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>y("cards"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${m==="cards"?"bg-white text-primary-600 shadow-sm":"text-gray-600"}`,children:"ðŸ“‹ Cards"}),e.jsx("button",{onClick:()=>y("table"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${m==="table"?"bg-white text-primary-600 shadow-sm":"text-gray-600"}`,children:"ðŸ“Š Table"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:c,onChange:t=>w(t.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-lg text-sm font-medium ${i==="all"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:["All (",h.length,")"]}),e.jsx("button",{onClick:()=>o("jobseeker"),className:`px-4 py-2 rounded-lg text-sm font-medium ${i==="jobseeker"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:"Jobseekers"}),e.jsx("button",{onClick:()=>o("employer"),className:`px-4 py-2 rounded-lg text-sm font-medium ${i==="employer"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:"Employers"}),e.jsx("button",{onClick:()=>o("admin"),className:`px-4 py-2 rounded-lg text-sm font-medium ${i==="admin"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:"Admins"})]})]})}),m==="cards"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(t=>{var s,a;return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold text-xl",children:((a=(s=t.name)==null?void 0:s.charAt(0))==null?void 0:a.toUpperCase())||"?"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.email})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-semibold ${t.role==="admin"?"bg-purple-100 text-purple-800":t.role==="employer"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:t.role}),e.jsx("span",{className:`ml-2 inline-flex px-3 py-1 rounded-full text-xs font-semibold ${t.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.status})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Profile Completeness"}),e.jsxs("span",{className:"text-xs font-bold text-primary-600",children:[t.profile_completeness,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${t.profile_completeness>=80?"bg-green-500":t.profile_completeness>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${t.profile_completeness}%`}})})]}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1 mb-4",children:[e.jsxs("p",{children:["Joined: ",new Date(t.created_at).toLocaleDateString()]}),e.jsxs("p",{children:["Last active: ",new Date(t.last_active).toLocaleDateString()]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("select",{value:t.role,onChange:r=>b(t.id,r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium",children:[e.jsx("option",{value:"jobseeker",children:"Job Seeker"}),e.jsx("option",{value:"employer",children:"Employer"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>x(t.id,"view"),className:"px-3 py-2 bg-primary-100 text-primary-700 rounded-lg hover:bg-primary-200 text-sm font-medium",children:"View Profile"}),e.jsx("button",{onClick:()=>x(t.id,t.status==="active"?"suspend":"activate"),className:`px-3 py-2 rounded-lg text-sm font-medium ${t.status==="active"?"bg-orange-100 text-orange-700 hover:bg-orange-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:t.status==="active"?"Suspend":"Activate"}),e.jsx("button",{onClick:()=>x(t.id,"reset-password"),className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 text-sm font-medium",children:"Reset Pass"}),e.jsx("button",{onClick:()=>x(t.id,"delete"),className:"px-3 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 text-sm font-medium",children:"Delete"})]})]})]},t.id)})}):e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Profile"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(t=>{var s,a;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold",children:((a=(s=t.name)==null?void 0:s.charAt(0))==null?void 0:a.toUpperCase())||"?"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${t.role==="admin"?"bg-purple-100 text-purple-800":t.role==="employer"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:t.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${t.profile_completeness>=80?"bg-green-500":t.profile_completeness>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${t.profile_completeness}%`}})}),e.jsxs("span",{className:"text-xs text-gray-600",children:[t.profile_completeness,"%"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("select",{value:t.role,onChange:r=>b(t.id,r.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm mr-2",children:[e.jsx("option",{value:"jobseeker",children:"Job Seeker"}),e.jsx("option",{value:"employer",children:"Employer"}),e.jsx("option",{value:"admin",children:"Admin"})]})})]},t.id)})})]})})}),l.totalPages>1&&e.jsxs("div",{className:"mt-6 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>p({...l,page:l.page-1}),disabled:l.page===1,className:"px-4 py-2 border border-gray-300 rounded-md disabled:opacity-50 hover:bg-gray-50",children:"Previous"}),e.jsxs("span",{className:"px-4 py-2",children:["Page ",l.page," of ",l.totalPages]}),e.jsx("button",{onClick:()=>p({...l,page:l.page+1}),disabled:l.page===l.totalPages,className:"px-4 py-2 border border-gray-300 rounded-md disabled:opacity-50 hover:bg-gray-50",children:"Next"})]})]})}export{k as default};
