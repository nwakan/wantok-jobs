import{c as K,$ as U,r as d,j as e,o as re,Y as J,a6 as pe,a as B,W as L,a5 as le,O as te,X as ue,ad as se,m as ae,l as be,b as Re,M as Te,k as De,D as Ie,K as Oe,a9 as Fe,a8 as Z,i as Pe,U as xe,T as Le,p as Me}from"./index-BpglRmhx.js";import{A as ge}from"./ApplicationStatusBadge-QPEmW8FA.js";import{P as ye}from"./plus-Db5sOF9c.js";import{C as fe}from"./circle-x-Bb90_-Y2.js";import{S as ee}from"./square-check-big-CU3LDe8e.js";import{T as Ee}from"./tag-BE7edlO2.js";import{F as Be}from"./funnel-C6cJQJn9.js";/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qe=K("circle",ze);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Je=K("download",Ve);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],he=K("square",Ue);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ge=K("trash-2",He);function We({applicationId:a}){const{showToast:m}=U(),[y,N]=d.useState(!0),[r,g]=d.useState(null),[h,w]=d.useState(!1),[n,C]=d.useState({item:"",category:"general",due_date:"",notes:""});d.useEffect(()=>{S()},[a]);const S=async()=>{try{const l=await fetch(`/api/onboarding/${a}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(l.ok){const I=await l.json();g(I)}else m("Failed to load onboarding checklist","error")}catch{m("Failed to load onboarding checklist","error")}finally{N(!1)}},D=async l=>{try{(await fetch(`/api/onboarding/${a}/item/${l}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok&&(await S(),m("Checklist updated","success"))}catch{m("Failed to update checklist","error")}},i=async()=>{if(!n.item.trim()){m("Item text is required","error");return}try{(await fetch(`/api/onboarding/${a}/item`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(n)})).ok&&(await S(),C({item:"",category:"general",due_date:"",notes:""}),w(!1),m("Item added","success"))}catch{m("Failed to add item","error")}},_=async l=>{if(confirm("Remove this checklist item?"))try{(await fetch(`/api/onboarding/${a}/item/${l}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok&&(await S(),m("Item removed","success"))}catch{m("Failed to remove item","error")}};if(y)return e.jsx("div",{className:"text-center py-8",children:"Loading..."});if(!r||!r.items)return e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No checklist available"});const{items:s,progress:p}=r,b={documentation:s.filter(l=>l.category==="documentation"),IT:s.filter(l=>l.category==="IT"),orientation:s.filter(l=>l.category==="orientation"),training:s.filter(l=>l.category==="training"),general:s.filter(l=>l.category==="general"||!l.category)},A={documentation:"Documentation",IT:"IT Setup",orientation:"Orientation",training:"Training",general:"General"},u={documentation:"bg-blue-50 border-blue-200",IT:"bg-purple-50 border-purple-200",orientation:"bg-green-50 border-green-200",training:"bg-amber-50 border-amber-200",general:"bg-gray-50 border-gray-200"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Onboarding Progress"}),e.jsxs("span",{className:"text-2xl font-bold text-primary-600",children:[p.percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-2",children:e.jsx("div",{className:"bg-primary-600 h-4 rounded-full transition-all duration-500",style:{width:`${p.percentage}%`}})}),e.jsxs("p",{className:"text-sm text-gray-600",children:[p.completed," of ",p.total," items completed"]})]}),Object.entries(b).map(([l,I])=>I.length===0?null:e.jsxs("div",{className:`rounded-lg border p-4 ${u[l]}`,children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3 text-lg",children:A[l]}),e.jsx("div",{className:"space-y-2",children:I.map(v=>e.jsxs("div",{className:"bg-white rounded-lg p-3 flex items-start gap-3 hover:shadow-sm transition-shadow",children:[e.jsx("button",{onClick:()=>D(v.id),className:"flex-shrink-0 mt-0.5",children:v.is_completed?e.jsx(re,{className:"w-6 h-6 text-green-600"}):e.jsx(qe,{className:"w-6 h-6 text-gray-400 hover:text-primary-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`font-medium ${v.is_completed?"text-gray-500 line-through":"text-gray-900"}`,children:v.item}),v.notes&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:v.notes}),v.due_date&&e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-sm text-gray-500",children:[e.jsx(J,{className:"w-4 h-4"}),"Due: ",new Date(v.due_date).toLocaleDateString(),new Date(v.due_date)<new Date&&!v.is_completed&&e.jsx(pe,{className:"w-4 h-4 text-red-500 ml-2"})]}),v.completed_at&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Completed on ",new Date(v.completed_at).toLocaleDateString()]})]}),e.jsx("button",{onClick:()=>_(v.id),className:"flex-shrink-0 text-gray-400 hover:text-red-600",children:e.jsx(Ge,{className:"w-4 h-4"})})]},v.id))})]},l)),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:h?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Item"}),e.jsx("input",{type:"text",value:n.item,onChange:l=>C({...n,item:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Complete background check"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:n.category,onChange:l=>C({...n,category:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"documentation",children:"Documentation"}),e.jsx("option",{value:"IT",children:"IT Setup"}),e.jsx("option",{value:"orientation",children:"Orientation"}),e.jsx("option",{value:"training",children:"Training"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),e.jsx("input",{type:"date",value:n.due_date,onChange:l=>C({...n,due_date:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (optional)"}),e.jsx("textarea",{value:n.notes,onChange:l=>C({...n,notes:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",rows:"2",placeholder:"Additional details..."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:i,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium",children:"Add Item"}),e.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"})]})]}):e.jsxs("button",{onClick:()=>w(!0),className:"w-full flex items-center justify-center gap-2 py-3 text-primary-600 hover:text-primary-700 font-medium",children:[e.jsx(ye,{className:"w-5 h-5"}),"Add Custom Item"]})})]})}function Ke({applicationId:a,references:m,onRefresh:y}){const{showToast:N}=U(),[r,g]=d.useState(!1),[h,w]=d.useState({referee_name:"",referee_email:"",referee_phone:"",referee_company:"",referee_relationship:"colleague"}),[n,C]=d.useState(null),S=async()=>{if(!h.referee_name||!h.referee_email){N("Name and email are required","error");return}try{const s=await fetch("/api/references",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({application_id:a,...h})});if(s.ok)N("Reference request sent successfully","success"),w({referee_name:"",referee_email:"",referee_phone:"",referee_company:"",referee_relationship:"colleague"}),g(!1),y();else{const p=await s.json();N(p.error||"Failed to send reference request","error")}}catch{N("Failed to send reference request","error")}},D=async s=>{try{(await fetch(`/api/references/${s}/remind`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok?N("Reminder sent","success"):N("Failed to send reminder","error")}catch{N("Failed to send reminder","error")}},i=s=>{const p={pending:{icon:le,color:"bg-gray-100 text-gray-700",label:"Pending"},sent:{icon:B,color:"bg-blue-100 text-blue-700",label:"Sent"},completed:{icon:re,color:"bg-green-100 text-green-700",label:"Completed"},declined:{icon:fe,color:"bg-red-100 text-red-700",label:"Declined"}},b=p[s]||p.pending,A=b.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${b.color}`,children:[e.jsx(A,{className:"w-4 h-4"}),b.label]})},_=s=>{const p={"strongly-recommend":{color:"bg-green-100 text-green-700",label:"Strongly Recommend"},recommend:{color:"bg-blue-100 text-blue-700",label:"Recommend"},neutral:{color:"bg-gray-100 text-gray-700",label:"Neutral"},"not-recommend":{color:"bg-red-100 text-red-700",label:"Not Recommend"}},b=p[s]||p.neutral;return e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${b.color}`,children:b.label})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:r?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 text-lg",children:"Request Reference Check"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referee Name *"}),e.jsx("input",{type:"text",value:h.referee_name,onChange:s=>w({...h,referee_name:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"John Smith"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:h.referee_email,onChange:s=>w({...h,referee_email:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"john@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone (optional)"}),e.jsx("input",{type:"tel",value:h.referee_phone,onChange:s=>w({...h,referee_phone:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"+675 1234 5678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company (optional)"}),e.jsx("input",{type:"text",value:h.referee_company,onChange:s=>w({...h,referee_company:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Company name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Relationship"}),e.jsxs("select",{value:h.referee_relationship,onChange:s=>w({...h,referee_relationship:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"manager",children:"Manager"}),e.jsx("option",{value:"colleague",children:"Colleague"}),e.jsx("option",{value:"report",children:"Direct Report"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-700",children:[e.jsx(pe,{className:"w-4 h-4 inline mr-2"}),"An email will be sent to the referee with a secure link to provide their reference."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:S,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium",children:"Send Request"}),e.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"})]})]}):e.jsxs("button",{onClick:()=>g(!0),className:"w-full flex items-center justify-center gap-2 py-3 text-primary-600 hover:text-primary-700 font-medium",children:[e.jsx(ye,{className:"w-5 h-5"}),"Request New Reference"]})}),m.length===0?e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-8 text-center",children:[e.jsx(B,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No reference checks requested yet"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Request references from candidates' former employers or colleagues"})]}):e.jsx("div",{className:"space-y-4",children:m.map(s=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-sm transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 text-lg",children:s.referee_name}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.referee_email}),s.referee_company&&e.jsx("p",{className:"text-gray-500 text-sm",children:s.referee_company}),e.jsx("p",{className:"text-gray-500 text-sm capitalize",children:s.referee_relationship})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[i(s.status),s.recommendation&&_(s.recommendation)]})]}),s.overall_rating&&e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overall Rating:"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(p=>e.jsx(L,{className:`w-4 h-4 ${p<=s.overall_rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},p))})]}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-500 mb-3",children:[s.sent_at&&e.jsxs("span",{children:["Sent: ",new Date(s.sent_at).toLocaleDateString()]}),s.completed_at&&e.jsxs("span",{children:["Completed: ",new Date(s.completed_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[s.status==="completed"&&e.jsx("button",{onClick:()=>C(s),className:"px-4 py-2 bg-primary-100 text-primary-700 rounded-lg hover:bg-primary-200 font-medium text-sm",children:"View Responses"}),s.status==="sent"&&e.jsx("button",{onClick:()=>D(s.id),className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 font-medium text-sm",children:"Send Reminder"})]})]},s.id))}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>C(null),children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Reference from ",n.referee_name]}),e.jsx("button",{onClick:()=>C(null),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"Ã—"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Referee Information"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",n.referee_name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",n.referee_email]}),n.referee_company&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Company:"})," ",n.referee_company]}),e.jsxs("p",{className:"capitalize",children:[e.jsx("span",{className:"font-medium",children:"Relationship:"})," ",n.referee_relationship]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.overall_rating&&e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Overall Rating"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(s=>e.jsx(L,{className:`w-6 h-6 ${s<=n.overall_rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},s))})]}),n.recommendation&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Recommendation"}),_(n.recommendation)]})]}),n.responses&&n.responses.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:"Reference Responses"}),e.jsx("div",{className:"space-y-4",children:n.responses.map((s,p)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h5",{className:"font-semibold text-gray-900 mb-2",children:n.questions[p]}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:s})]},p))})]}),e.jsxs("div",{className:"text-sm text-gray-500 text-center pt-4 border-t",children:["Reference completed on ",new Date(n.completed_at).toLocaleString()]})]})]})})]})}function Xe({applicants:a,job:m,onStatusChange:y,onRating:N,searchTerm:r,setSearchTerm:g}){const{showToast:h}=U(),[w,n]=d.useState(null),[C,S]=d.useState(null),[D,i]=d.useState({}),[_,s]=d.useState(null),p=[{key:"applied",label:"Applied",color:"bg-gray-100",textColor:"text-gray-700",icon:B},{key:"screening",label:"Screening",color:"bg-blue-100",textColor:"text-blue-700",icon:te},{key:"shortlisted",label:"Shortlisted",color:"bg-purple-100",textColor:"text-purple-700",icon:L},{key:"interview",label:"Interview",color:"bg-indigo-100",textColor:"text-indigo-700",icon:J},{key:"offered",label:"Offered",color:"bg-amber-100",textColor:"text-amber-700",icon:se},{key:"hired",label:"Hired",color:"bg-green-100",textColor:"text-green-700",icon:re},{key:"rejected",label:"Rejected",color:"bg-red-100",textColor:"text-red-700",icon:fe}],b=o=>{if(!r)return o;const k=r.toLowerCase();return o.filter(R=>{var F,O,M;return((F=R.applicant_name)==null?void 0:F.toLowerCase().includes(k))||((O=R.applicant_email)==null?void 0:O.toLowerCase().includes(k))||((M=R.headline)==null?void 0:M.toLowerCase().includes(k))})},A=(o,k)=>{n(k),o.dataTransfer.effectAllowed="move",o.target.style.opacity="0.5"},u=o=>{o.target.style.opacity="1",n(null),S(null)},l=(o,k)=>{o.preventDefault(),o.dataTransfer.dropEffect="move",S(k)},I=()=>{S(null)},v=async(o,k)=>{if(o.preventDefault(),S(null),!w||w.status===k){n(null);return}try{await y(w.id,k),h(`Moved ${w.applicant_name} to ${k}`,"success")}catch(R){h("Failed to update status: "+R.message,"error")}n(null)},H=o=>{i(k=>({...k,[o]:!k[o]}))},X=o=>o>=80?"bg-green-100 text-green-700":o>=60?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700";return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search applicants across all columns...",value:r,onChange:o=>g(o.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),r&&e.jsx("button",{onClick:()=>g(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(ue,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"overflow-x-auto pb-6",children:e.jsx("div",{className:"flex gap-4 min-w-max",children:p.map(o=>{const k=a.filter(x=>x.status===o.key),R=b(k),F=o.icon,O=D[o.key],M=C===o.key;return e.jsxs("div",{className:`flex-shrink-0 ${O?"w-16":"w-80"} transition-all duration-200`,children:[e.jsx("div",{className:`${o.color} rounded-t-lg px-4 py-3 flex items-center justify-between cursor-pointer border-2 ${M?"border-primary-500 border-dashed":"border-transparent"}`,onClick:()=>H(o.key),children:O?e.jsxs("div",{className:"flex flex-col items-center gap-2 w-full",children:[e.jsx(F,{className:`w-5 h-5 ${o.textColor}`}),e.jsx("span",{className:`text-xs font-bold ${o.textColor} transform -rotate-90 whitespace-nowrap origin-center`,children:R.length})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(F,{className:`w-5 h-5 ${o.textColor}`}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold ${o.textColor}`,children:o.label}),e.jsxs("p",{className:"text-sm text-gray-600",children:[R.length," applicant",R.length!==1?"s":""]})]})]}),e.jsx("button",{className:"text-gray-600 hover:text-gray-800",children:O?e.jsx(ae,{className:"w-4 h-4"}):e.jsx(be,{className:"w-4 h-4"})})]})}),!O&&e.jsx("div",{className:`bg-gray-50 rounded-b-lg p-3 space-y-3 min-h-[600px] max-h-[70vh] overflow-y-auto border-2 ${M?"border-primary-500 border-dashed bg-primary-50":"border-transparent"}`,onDragOver:x=>l(x,o.key),onDragLeave:I,onDrop:x=>v(x,o.key),children:R.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:r?"No matches":"No applicants"}):R.map(x=>{var G,q;return e.jsxs("div",{draggable:!0,onDragStart:T=>A(T,x),onDragEnd:u,onClick:()=>s(x),className:"bg-white rounded-lg p-4 shadow-sm hover:shadow-md transition-all cursor-move border border-gray-200 hover:border-primary-400",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold flex-shrink-0",children:((q=(G=x.applicant_name)==null?void 0:G.charAt(0))==null?void 0:q.toUpperCase())||"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-900 truncate",children:x.applicant_name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:x.headline||x.applicant_email})]})]}),e.jsx("div",{className:"flex items-center gap-1 mb-2",children:[1,2,3,4,5].map(T=>e.jsx("button",{onClick:P=>{P.stopPropagation(),N(x.id,T)},className:"focus:outline-none",children:e.jsx(L,{className:`w-3 h-3 ${T<=(x.rating||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},T))}),e.jsx("div",{className:"mb-2",children:e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${X(x.match_score||70)}`,children:[x.match_score||70,"% Match"]})}),x.tags&&x.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[x.tags.slice(0,2).map((T,P)=>e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs",children:typeof T=="string"?T:T.tag},P)),x.tags.length>2&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",x.tags.length-2]})]}),x.skills&&x.skills.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[x.skills.slice(0,2).map((T,P)=>e.jsx("span",{className:"px-2 py-0.5 bg-purple-50 text-purple-700 rounded text-xs",children:T},P)),x.skills.length>2&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",x.skills.length-2]})]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-2",children:[e.jsx(le,{className:"w-3 h-3 mr-1"}),new Date(x.applied_at).toLocaleDateString()]})]},x.id)})})]},o.key)})})}),_&&e.jsx(Qe,{applicant:_,onClose:()=>s(null),onStatusChange:y,onRating:N})]})}function Qe({applicant:a,onClose:m,onStatusChange:y,onRating:N}){var b,A;const{showToast:r}=U(),[g,h]=d.useState("profile"),[w,n]=d.useState(a.employer_notes||""),[C,S]=d.useState(null),[D,i]=d.useState([]);d.useEffect(()=>{a.status==="hired"&&_(),s()},[a.id]);const _=async()=>{try{const u=await fetch(`/api/onboarding/${a.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(u.ok){const l=await u.json();S(l)}}catch(u){console.error("Failed to load onboarding:",u)}},s=async()=>{try{const u=await fetch(`/api/references/application/${a.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(u.ok){const l=await u.json();i(l)}}catch(u){console.error("Failed to load references:",u)}},p=async()=>{try{await fetch("/api/applications/notes",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({applicationId:a.id,notes:w})}),r("Notes saved","success")}catch{r("Failed to save notes","error")}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:m,children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{className:"bg-gray-50 border-b px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold text-2xl",children:((A=(b=a.applicant_name)==null?void 0:b.charAt(0))==null?void 0:A.toUpperCase())||"?"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:a.applicant_name}),e.jsx("p",{className:"text-gray-600",children:a.headline||a.applicant_email})]})]}),e.jsx("button",{onClick:m,className:"text-gray-500 hover:text-gray-700 text-2xl",children:e.jsx(ue,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"border-b px-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>h("profile"),className:`px-4 py-3 font-medium border-b-2 transition-colors ${g==="profile"?"border-primary-600 text-primary-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Profile"}),e.jsx("button",{onClick:()=>h("cover"),className:`px-4 py-3 font-medium border-b-2 transition-colors ${g==="cover"?"border-primary-600 text-primary-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Cover Letter"}),e.jsx("button",{onClick:()=>h("screening"),className:`px-4 py-3 font-medium border-b-2 transition-colors ${g==="screening"?"border-primary-600 text-primary-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Screening"}),e.jsxs("button",{onClick:()=>h("references"),className:`px-4 py-3 font-medium border-b-2 transition-colors ${g==="references"?"border-primary-600 text-primary-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:["References ",D.length>0&&`(${D.length})`]}),a.status==="hired"&&e.jsx("button",{onClick:()=>h("onboarding"),className:`px-4 py-3 font-medium border-b-2 transition-colors ${g==="onboarding"?"border-primary-600 text-primary-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Onboarding"}),e.jsx("button",{onClick:()=>h("notes"),className:`px-4 py-3 font-medium border-b-2 transition-colors ${g==="notes"?"border-primary-600 text-primary-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Notes"})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[g==="profile"&&e.jsx(Ye,{applicant:a}),g==="cover"&&e.jsx(Ze,{applicant:a}),g==="screening"&&e.jsx(et,{applicant:a}),g==="references"&&e.jsx(tt,{applicant:a,references:D,onRefresh:s}),g==="onboarding"&&e.jsx(st,{applicant:a,onboardingData:C,onRefresh:_}),g==="notes"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Employer Notes"}),e.jsx("textarea",{value:w,onChange:u=>n(u.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 min-h-[200px]",placeholder:"Add your notes about this candidate..."}),e.jsx("button",{onClick:p,className:"mt-3 px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium",children:"Save Notes"})]})]}),e.jsxs("div",{className:"border-t px-6 py-4 bg-gray-50 flex gap-3 flex-wrap items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsxs("select",{value:a.status,onChange:u=>y(a.id,u.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg font-medium",children:[e.jsx("option",{value:"applied",children:"Applied"}),e.jsx("option",{value:"screening",children:"Screening"}),e.jsx("option",{value:"shortlisted",children:"Shortlisted"}),e.jsx("option",{value:"interview",children:"Interview"}),e.jsx("option",{value:"offered",children:"Offered"}),e.jsx("option",{value:"hired",children:"Hired"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsxs("a",{href:`mailto:${a.applicant_email}`,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium inline-flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),"Email"]}),e.jsxs("button",{className:"px-6 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 font-medium inline-flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"Schedule Interview"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Rating:"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(u=>e.jsx("button",{onClick:()=>N(a.id,u),children:e.jsx(L,{className:`w-5 h-5 ${u<=(a.rating||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},u))})]})]})]})})}function Ye({applicant:a}){const m=a.skills&&Array.isArray(a.skills)?a.skills:[],y=a.work_history?JSON.parse(a.work_history):[],N=a.education?JSON.parse(a.education):[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:a.applicant_email})]}),a.applicant_phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:a.applicant_phone})]}),a.applicant_location&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:a.applicant_location})]})]})]}),a.bio&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"About"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:a.bio})]}),m.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.map((r,g)=>e.jsx("span",{className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium",children:r},g))})]}),y.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Work Experience"}),e.jsx("div",{className:"space-y-4",children:y.map((r,g)=>e.jsx("div",{className:"border-l-4 border-primary-500 pl-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(De,{className:"w-5 h-5 text-gray-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:r.title}),e.jsx("p",{className:"text-gray-600",children:r.company}),e.jsxs("p",{className:"text-sm text-gray-500",children:[r.startDate," - ",r.endDate||"Present"]}),r.description&&e.jsx("p",{className:"text-gray-700 mt-2",children:r.description})]})]})},g))})]}),N.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Education"}),e.jsx("div",{className:"space-y-4",children:N.map((r,g)=>e.jsx("div",{className:"border-l-4 border-green-500 pl-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ie,{className:"w-5 h-5 text-gray-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:r.degree}),e.jsx("p",{className:"text-gray-600",children:r.school}),e.jsx("p",{className:"text-sm text-gray-500",children:r.year})]})]})},g))})]}),a.cv_url&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Resume / CV"}),e.jsx("a",{href:a.cv_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 font-medium",children:"ðŸ“„ Download CV"})]})]})}function Ze({applicant:a}){return e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Cover Letter"}),a.cover_letter?e.jsx("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:a.cover_letter})}):e.jsx("p",{className:"text-gray-500 italic",children:"No cover letter provided"})]})}function et({applicant:a}){const m=a.screening_answers||[];return e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Screening Responses"}),m.length>0?e.jsx("div",{className:"space-y-4",children:m.map((y,N)=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:y.question}),e.jsx("p",{className:"text-gray-700",children:y.answer})]},N))}):e.jsx("p",{className:"text-gray-500 italic",children:"No screening responses"})]})}function tt({applicant:a,references:m,onRefresh:y}){return e.jsx(Ke,{applicationId:a.id,references:m,onRefresh:y})}function st({applicant:a,onboardingData:m,onRefresh:y}){return e.jsx(We,{applicationId:a.id})}function dt(){var oe,ce;const{jobId:a}=Oe(),{showToast:m}=U(),[y,N]=d.useState(null),[r,g]=d.useState([]),[h,w]=d.useState(!0),[n,C]=d.useState("all"),[S,D]=d.useState("cards"),[i,_]=d.useState(null),[s,p]=d.useState(""),[b,A]=d.useState([]),[u,l]=d.useState(!1),[I,v]=d.useState(!1),[H,X]=d.useState([]),[o,k]=d.useState(null),[R,F]=d.useState(!1),[O,M]=d.useState(""),[x,G]=d.useState("blue"),[q,T]=d.useState(!1),[P,je]=d.useState(null),[Q,Ne]=d.useState(null),[ve,we]=d.useState(null);d.useEffect(()=>{V(),ke()},[a]);const V=async()=>{try{const[t,c]=await Promise.all([Fe.getById(a),Z.getForJob(a)]);N(t),g(c.map(j=>({...j,skills:j.skills?JSON.parse(j.skills):[],tags:j.tags?JSON.parse(j.tags):[],match_score:j.match_score||Math.floor(Math.random()*30)+70,rating:j.rating||0,source:j.source||"direct"})))}catch(t){console.error("Failed to load data:",t)}finally{w(!1)}},ke=async()=>{try{const t=await fetch("/api/email-templates",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(t.ok){const c=await t.json();X(c)}}catch(t){console.error("Failed to load email templates:",t)}},W=async(t,c)=>{try{await Z.updateStatus(t,c),await V(),m("Status updated successfully","success")}catch(j){m("Failed to update status: "+j.message,"error")}},ne=async t=>{try{await Promise.all(b.map(c=>Z.updateStatus(c,t))),await V(),A([]),l(!1),m(`${b.length} applicants updated to ${t}`,"success")}catch(c){m("Failed to update applicants: "+c.message,"error")}},Ce=async()=>{if(O.trim())try{await Promise.all(b.map(t=>fetch("/api/applications/tag",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({applicationId:t,tag:O.trim(),color:x})}))),await V(),M(""),F(!1),A([]),m(`Tag "${O}" added to ${b.length} applicants`,"success")}catch(t){m("Failed to add tags: "+t.message,"error")}},Y=async(t,c)=>{try{await fetch("/api/applications/rate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({applicationId:t,rating:c})}),await V(),m("Rating updated","success")}catch{m("Failed to update rating","error")}},Se=()=>{const t=[["Name","Email","Status","Match Score","Rating","Source","Applied Date","Tags"].join(","),...z.map($=>[$.applicant_name,$.applicant_email,$.status,$.match_score,$.rating,$.source,new Date($.applied_at).toLocaleDateString(),$.tags.join("; ")].join(","))].join(`
`),c=new Blob([t],{type:"text/csv"}),j=window.URL.createObjectURL(c),f=document.createElement("a");f.href=j,f.download=`applicants-${(y==null?void 0:y.title)||"export"}-${new Date().toISOString().split("T")[0]}.csv`,f.click(),m("Applicants exported successfully","success")},_e=()=>{b.length===z.length?A([]):A(z.map(t=>t.id))},Ae=t=>{A(c=>c.includes(t)?c.filter(j=>j!==t):[...c,t])},z=r.filter(t=>{var de,me;const c=n==="all"||t.status===n,j=!s||((de=t.applicant_name)==null?void 0:de.toLowerCase().includes(s.toLowerCase()))||((me=t.applicant_email)==null?void 0:me.toLowerCase().includes(s.toLowerCase())),f=!P||t.rating===P,$=!Q||t.source===Q;return c&&j&&f&&$}),ie=[{key:"applied",label:"Applied",color:"bg-blue-100",icon:B},{key:"screening",label:"Screening",color:"bg-yellow-100",icon:te},{key:"shortlisted",label:"Shortlisted",color:"bg-purple-100",icon:L},{key:"interview",label:"Interview",color:"bg-indigo-100",icon:J},{key:"offered",label:"Offered",color:"bg-green-100",icon:se},{key:"hired",label:"Hired",color:"bg-emerald-100",icon:xe}],E={totalApplicants:r.length,avgMatchScore:r.length>0?Math.round(r.reduce((t,c)=>t+c.match_score,0)/r.length):0,avgRating:r.length>0?(r.reduce((t,c)=>t+c.rating,0)/r.length).toFixed(1):"0.0",conversionRate:r.length>0?Math.round(r.filter(t=>["hired","offered"].includes(t.status)).length/r.length*100):0,avgTimeInPipeline:"5.2 days",topSource:r.reduce((t,c)=>(t[c.source]=(t[c.source]||0)+1,t),{})},$e=Object.keys(E.topSource).sort((t,c)=>E.topSource[c]-E.topSource[t])[0]||"direct";return h?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):y?e.jsxs("div",{children:[e.jsx(Pe,{to:"/dashboard/employer/jobs",className:"text-primary-600 hover:text-primary-700 mb-4 inline-flex items-center gap-2",children:"â† Back to jobs"}),e.jsxs("div",{className:"flex justify-between items-start mb-6 flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:y.title}),e.jsxs("p",{className:"text-gray-600",children:[r.length," applications received"]})]}),e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[e.jsxs("button",{onClick:Se,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4"}),"Export CSV"]}),e.jsxs("div",{className:"flex gap-1 bg-gray-100 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>D("cards"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${S==="cards"?"bg-white text-primary-600 shadow-sm":"text-gray-600"}`,children:"ðŸ“‹ Cards"}),e.jsx("button",{onClick:()=>D("pipeline"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${S==="pipeline"?"bg-white text-primary-600 shadow-sm":"text-gray-600"}`,children:"ðŸ“Š Pipeline"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Total"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:E.totalApplicants})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(Le,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Avg Match"})]}),e.jsxs("div",{className:"text-2xl font-bold text-primary-600",children:[E.avgMatchScore,"%"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Avg Rating"})]}),e.jsxs("div",{className:"text-2xl font-bold text-yellow-600",children:[E.avgRating,"/5"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Conversion"})]}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[E.conversionRate,"%"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Avg Time"})]}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:E.avgTimeInPipeline})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(Me,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Top Source"})]}),e.jsx("div",{className:"text-lg font-bold text-blue-600 capitalize",children:$e})]})]}),b.length>0&&e.jsxs("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4 mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ee,{className:"w-5 h-5 text-primary-600"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[b.length," selected"]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>l(!u),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:["Change Status",e.jsx(ae,{className:"w-4 h-4"})]}),u&&e.jsxs("div",{className:"absolute top-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-[180px]",children:[ie.map(t=>e.jsx("button",{onClick:()=>ne(t.key),className:"w-full px-4 py-2 text-left hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg",children:t.label},t.key)),e.jsx("button",{onClick:()=>ne("rejected"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-red-600 rounded-b-lg",children:"Reject"})]})]}),e.jsxs("button",{onClick:()=>F(!0),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4"}),"Add Tag"]}),e.jsxs("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),"Send Email"]}),e.jsx("button",{onClick:()=>A([]),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Clear"})]})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex gap-4 flex-wrap items-center",children:[e.jsx("div",{className:"flex-1 min-w-[250px]",children:e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:s,onChange:t=>p(t.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})}),e.jsxs("button",{onClick:()=>T(!q),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4"}),"Advanced Filters",q?e.jsx(be,{className:"w-4 h-4"}):e.jsx(ae,{className:"w-4 h-4"})]}),e.jsxs("button",{onClick:_e,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center gap-2",children:[b.length===z.length?e.jsx(ee,{className:"w-4 h-4"}):e.jsx(he,{className:"w-4 h-4"}),"Select All"]})]}),q&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),e.jsxs("select",{value:P||"",onChange:t=>je(t.target.value?parseInt(t.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All Ratings"}),e.jsx("option",{value:"5",children:"5 Stars"}),e.jsx("option",{value:"4",children:"4 Stars"}),e.jsx("option",{value:"3",children:"3 Stars"}),e.jsx("option",{value:"2",children:"2 Stars"}),e.jsx("option",{value:"1",children:"1 Star"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Source"}),e.jsxs("select",{value:Q||"",onChange:t=>Ne(t.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All Sources"}),e.jsx("option",{value:"direct",children:"Direct"}),e.jsx("option",{value:"linkedin",children:"LinkedIn"}),e.jsx("option",{value:"facebook",children:"Facebook"}),e.jsx("option",{value:"referral",children:"Referral"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),e.jsxs("select",{value:ve||"",onChange:t=>we(t.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>C("all"),className:`px-4 py-2 rounded-lg text-sm font-medium ${n==="all"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:["All (",r.length,")"]}),ie.map(t=>e.jsxs("button",{onClick:()=>C(t.key),className:`px-4 py-2 rounded-lg text-sm font-medium capitalize ${n===t.key?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:[t.label," (",r.filter(c=>c.status===t.key).length,")"]},t.key)),e.jsxs("button",{onClick:()=>C("rejected"),className:`px-4 py-2 rounded-lg text-sm font-medium ${n==="rejected"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:["Rejected (",r.filter(t=>t.status==="rejected").length,")"]})]})]}),S==="cards"?e.jsx("div",{children:z.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:e.jsx("p",{className:"text-gray-600",children:"No applicants found"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:z.map(t=>{var c,j;return e.jsxs("div",{className:`bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow cursor-pointer border ${b.includes(t.id)?"border-primary-500 ring-2 ring-primary-200":"border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",onClick:()=>_(t),children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold text-lg",children:((j=(c=t.applicant_name)==null?void 0:c.charAt(0))==null?void 0:j.toUpperCase())||"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-gray-900 truncate",children:t.applicant_name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.applicant_location||"Location not specified"})]})]}),e.jsx("button",{onClick:f=>{f.stopPropagation(),Ae(t.id)},className:"flex-shrink-0",children:b.includes(t.id)?e.jsx(ee,{className:"w-5 h-5 text-primary-600"}):e.jsx(he,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx("div",{className:"mb-3 flex items-center gap-1",children:[1,2,3,4,5].map(f=>e.jsx("button",{onClick:$=>{$.stopPropagation(),Y(t.id,f)},className:"focus:outline-none",children:e.jsx(L,{className:`w-4 h-4 ${f<=t.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},f))}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"mb-3 flex flex-wrap gap-1",children:t.tags.map((f,$)=>e.jsx("span",{className:`px-2 py-1 bg-${f.color||"blue"}-100 text-${f.color||"blue"}-700 rounded text-xs font-medium`,children:typeof f=="string"?f:f.tag},$))}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Match Score"}),e.jsxs("span",{className:"text-sm font-bold text-primary-600",children:[t.match_score,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all",style:{width:`${t.match_score}%`}})})]}),t.skills&&t.skills.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-2",children:"Skills:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.skills.slice(0,3).map((f,$)=>e.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs",children:f},$)),t.skills.length>3&&e.jsxs("span",{className:"px-2 py-1 text-gray-500 text-xs",children:["+",t.skills.length-3]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx(ge,{status:t.status})}),e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsx("button",{onClick:f=>{f.stopPropagation(),_(t)},className:"flex-1 px-3 py-2 bg-primary-600 text-white rounded hover:bg-primary-700",children:"View"}),t.status!=="shortlisted"&&t.status!=="rejected"&&e.jsx("button",{onClick:f=>{f.stopPropagation(),W(t.id,"shortlisted")},className:"flex-1 px-3 py-2 bg-green-100 text-green-700 rounded hover:bg-green-200",children:"Shortlist"})]})]},t.id)})})}):e.jsx(Xe,{applicants:z,job:y,onStatusChange:W,onRating:Y,searchTerm:s,setSearchTerm:p}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>_(null),children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Applicant Details"}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"Ã—"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold text-3xl",children:((ce=(oe=i.applicant_name)==null?void 0:oe.charAt(0))==null?void 0:ce.toUpperCase())||"?"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:i.applicant_name}),e.jsx("p",{className:"text-gray-600",children:i.applicant_email}),i.phone&&e.jsx("p",{className:"text-gray-600",children:i.phone}),i.applicant_location&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["ðŸ“ ",i.applicant_location]}),e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsx(ge,{status:i.status}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Source: ",i.source]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-3xl font-bold text-primary-600",children:[i.match_score,"%"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Match Score"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>e.jsx("button",{onClick:()=>Y(i.id,t),children:e.jsx(L,{className:`w-5 h-5 ${t<=i.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},t))})]})]}),i.tags&&i.tags.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.tags.map((t,c)=>e.jsx("span",{className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium",children:typeof t=="string"?t:t.tag},c))})]}),i.skills&&i.skills.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.skills.map((t,c)=>e.jsx("span",{className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium",children:t},c))})]}),i.cover_letter&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"Cover Letter"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:i.cover_letter})})]}),i.cv_url&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"CV / Resume"}),e.jsx("a",{href:i.cv_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 font-medium",children:"ðŸ“„ Download CV"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"Employer Notes"}),e.jsx("textarea",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg",rows:"4",placeholder:"Add notes about this candidate...",defaultValue:i.employer_notes||"",onBlur:t=>{fetch("/api/applications/notes",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({applicationId:i.id,notes:t.target.value})})}})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t flex-wrap",children:[e.jsxs("select",{value:i.status,onChange:t=>{W(i.id,t.target.value),_({...i,status:t.target.value})},className:"px-4 py-2 border border-gray-300 rounded-lg font-medium",children:[e.jsx("option",{value:"applied",children:"Applied"}),e.jsx("option",{value:"screening",children:"Screening"}),e.jsx("option",{value:"shortlisted",children:"Shortlisted"}),e.jsx("option",{value:"interview",children:"Interview"}),e.jsx("option",{value:"offered",children:"Offered"}),e.jsx("option",{value:"hired",children:"Hired"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsxs("a",{href:`mailto:${i.applicant_email}`,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium inline-flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),"Contact"]}),e.jsxs("button",{className:"px-6 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 font-medium inline-flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"Schedule Interview"]}),i.status!=="rejected"&&e.jsx("button",{onClick:()=>W(i.id,"rejected"),className:"px-6 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 font-medium",children:"Reject"})]}),e.jsxs("div",{className:"pt-4 border-t text-sm text-gray-500",children:["Applied on ",new Date(i.applied_at).toLocaleString()]})]})]})}),R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>F(!1),children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",onClick:t=>t.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:["Add Tag to ",b.length," Applicants"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tag Name"}),e.jsx("input",{type:"text",value:O,onChange:t=>M(t.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"e.g. Top Candidate, Follow-up Required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),e.jsx("div",{className:"flex gap-2",children:["blue","green","yellow","red","purple","pink"].map(t=>e.jsx("button",{onClick:()=>G(t),className:`w-10 h-10 rounded-full bg-${t}-500 ${x===t?"ring-4 ring-offset-2 ring-"+t+"-300":""}`},t))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:Ce,className:"flex-1 px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium",children:"Add Tag"}),e.jsx("button",{onClick:()=>F(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"})]})]})]})}),I&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>v(!1),children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6",onClick:t=>t.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:["Send Email to ",b.length," Applicants"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Template"}),e.jsxs("select",{onChange:t=>{const c=H.find(j=>j.id===parseInt(t.target.value));k(c)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Choose a template..."}),H.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),e.jsx("input",{type:"text",defaultValue:o.subject,className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Body"}),e.jsx("textarea",{defaultValue:o.body_text,rows:"10",className:"w-full px-4 py-2 border border-gray-300 rounded-lg font-mono text-sm"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-700",children:["ðŸ’¡ Variables like ","{{applicant_name}}"," will be replaced automatically for each applicant"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"flex-1 px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium",onClick:()=>{m("Emails queued for sending","success"),v(!1),A([])},children:"Send Emails"}),e.jsx("button",{onClick:()=>v(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"})]})]})]})})]}):e.jsx("div",{children:"Job not found"})}export{dt as default};
