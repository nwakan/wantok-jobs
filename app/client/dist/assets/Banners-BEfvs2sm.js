import{r as i,$ as N,ao as n,j as e}from"./index-BpglRmhx.js";function _(){const[x,h]=i.useState([]),[y,u]=i.useState(!0),[o,m]=i.useState(!1),[d,g]=i.useState(null),{showToast:r}=N(),[t,a]=i.useState({title:"",image_url:"",link_url:"",placement:"homepage",start_date:"",end_date:"",active:!0});i.useEffect(()=>{c()},[]);const c=async()=>{try{u(!0);const s=await n.getAll();h(s.banners||[])}catch(s){r(s.message||"Failed to load banners","error")}finally{u(!1)}},b=async s=>{s.preventDefault();try{d?(await n.update(d.id,t),r("Banner updated successfully","success")):(await n.create(t),r("Banner created successfully","success")),c(),p()}catch(l){r(l.message||"Failed to save banner","error")}},j=s=>{g(s),a({title:s.title||"",image_url:s.image_url||"",link_url:s.link_url||"",placement:s.placement||"homepage",start_date:s.start_date||"",end_date:s.end_date||"",active:s.active===1}),m(!0)},f=async s=>{try{await n.update(s.id,{active:s.active===1?0:1}),r("Banner status updated","success"),c()}catch(l){r(l.message||"Failed to update banner","error")}},v=async s=>{if(confirm("Are you sure you want to delete this banner?"))try{await n.delete(s),r("Banner deleted successfully","success"),c()}catch(l){r(l.message||"Failed to delete banner","error")}},p=()=>{a({title:"",image_url:"",link_url:"",placement:"homepage",start_date:"",end_date:"",active:!0}),g(null),m(!1)};return y?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Banner Management"}),e.jsx("button",{onClick:()=>m(!o),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:o?"Cancel":"Add New Banner"})]}),o&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:d?"Edit Banner":"Add New Banner"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx("input",{type:"text",value:t.title,onChange:s=>a({...t,title:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Banner title (for internal reference)",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL"}),e.jsx("input",{type:"url",value:t.image_url,onChange:s=>a({...t,image_url:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"https://example.com/banner.jpg",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended size: 1200x300px"})]}),t.image_url&&e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Preview:"}),e.jsx("img",{src:t.image_url,alt:"Banner preview",className:"w-full h-auto rounded max-h-48 object-cover",onError:s=>{s.target.style.display="none"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link URL"}),e.jsx("input",{type:"url",value:t.link_url,onChange:s=>a({...t,link_url:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"https://example.com or /local-page",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Placement"}),e.jsxs("select",{value:t.placement,onChange:s=>a({...t,placement:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"homepage",children:"Homepage (Hero)"}),e.jsx("option",{value:"homepage-sidebar",children:"Homepage (Sidebar)"}),e.jsx("option",{value:"job-listing",children:"Job Listing Page"}),e.jsx("option",{value:"employer-dashboard",children:"Employer Dashboard"}),e.jsx("option",{value:"jobseeker-dashboard",children:"Jobseeker Dashboard"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:t.start_date,onChange:s=>a({...t,start_date:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:t.end_date,onChange:s=>a({...t,end_date:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"active",checked:t.active,onChange:s=>a({...t,active:s.target.checked}),className:"w-4 h-4 text-primary-600 rounded focus:ring-primary-500"}),e.jsx("label",{htmlFor:"active",className:"ml-2 text-sm text-gray-700",children:"Active (show banner immediately)"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[d?"Update":"Create"," Banner"]}),e.jsx("button",{type:"button",onClick:p,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}),e.jsx("div",{className:"space-y-4",children:x.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:e.jsx("p",{className:"text-gray-500 text-lg",children:"No banners yet. Create your first banner!"})}):x.map(s=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsx("img",{src:s.image_url,alt:s.title,className:"w-48 h-24 object-cover rounded-lg border border-gray-200",onError:l=>{l.target.src="https://via.placeholder.com/400x200?text=Image+Not+Found"}}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.title}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full whitespace-nowrap ml-4 ${s.active===1?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.active===1?"Active":"Inactive"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("strong",{children:"Link:"})," ",s.link_url]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("strong",{children:"Placement:"})," ",s.placement]}),s.start_date&&s.end_date&&e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:[e.jsx("strong",{children:"Duration:"})," ",s.start_date," to ",s.end_date]}),(s.impressions||s.clicks)&&e.jsxs("div",{className:"flex gap-4 mb-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Impressions:"}),e.jsx("span",{className:"font-semibold ml-1",children:s.impressions||0})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Clicks:"}),e.jsx("span",{className:"font-semibold ml-1",children:s.clicks||0})]}),s.impressions>0&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"CTR:"}),e.jsxs("span",{className:"font-semibold ml-1",children:[((s.clicks||0)/s.impressions*100).toFixed(2),"%"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>j(s),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>f(s),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:s.active===1?"Deactivate":"Activate"}),e.jsx("button",{onClick:()=>v(s.id),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm",children:"Delete"})]})]})]})},s.id))})]})}export{_ as default};
