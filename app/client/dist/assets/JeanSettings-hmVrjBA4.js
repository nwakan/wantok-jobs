import{c as p,r as i,j as e,ar as z,a6 as R}from"./index-BpglRmhx.js";import{R as P}from"./refresh-cw-BTr5EdfS.js";/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],U=p("chart-column",F);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],O=p("save",G);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],D=p("toggle-right",V),x="/api";function g(){const r=localStorage.getItem("token");return r?{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}:{}}const H=[{key:"jean_enabled",label:"Jean AI Assistant",desc:"Master toggle â€” disables the entire chat widget"},{key:"voice_enabled",label:"Voice Input/Output",desc:"Allow speech-to-text and text-to-speech"},{key:"auto_apply_enabled",label:"Auto-Apply (Jobseekers)",desc:"Allow jobseekers to set up automatic job applications"},{key:"auto_post_enabled",label:"Auto-Post Jobs (Employers)",desc:"Allow employers to auto-post from uploaded documents"},{key:"linkedin_import_enabled",label:"LinkedIn Import",desc:"Allow profile import from LinkedIn URLs"},{key:"document_parse_enabled",label:"Document Parsing",desc:"Allow PDF/Word upload for job creation"},{key:"guest_chat_enabled",label:"Guest Chat",desc:"Allow non-logged-in visitors to chat with Jean"},{key:"proactive_triggers_enabled",label:"Proactive Suggestions",desc:"Show contextual chat suggestions on pages"}],B=[{key:"max_auto_apply_daily",label:"Max Auto-Apply Per Day",desc:"Maximum automatic applications per user per day",min:1,max:50},{key:"max_linkedin_scrapes_hourly",label:"LinkedIn Scrapes/Hour",desc:"Rate limit for LinkedIn profile imports",min:1,max:100},{key:"auto_apply_min_match_score",label:"Auto-Apply Min Match %",desc:"Minimum match score for auto-applications (0-100)",min:0,max:100}],q=[{key:"jean_greeting",label:"Greeting Message",desc:"First message Jean shows when chat opens"},{key:"jean_offline_message",label:"Offline Message",desc:"Message shown when Jean is disabled"}];function K(){var w,k,_,S,A;const[r,m]=i.useState({}),[l,T]=i.useState(null),[M,I]=i.useState(!0),[h,d]=i.useState(!1),[b,o]=i.useState(""),[y,c]=i.useState(""),[f,j]=i.useState({});i.useEffect(()=>{$(),u()},[]);const $=async()=>{try{const s=await(await fetch(`${x}/chat/admin/settings`,{headers:g()})).json(),a={};(s.settings||[]).forEach(n=>{a[n.key]=n.value}),m(a)}catch{o("Failed to load settings")}I(!1)},u=async()=>{try{const t=await fetch(`${x}/chat/admin/stats`,{headers:g()});T(await t.json())}catch{}},v=async(t,s)=>{m(a=>({...a,[t]:s})),j(a=>({...a,[t]:!0}))},E=async t=>{const s=r[t]==="true"?"false":"true";d(!0),o("");try{if(!(await fetch(`${x}/chat/admin/settings`,{method:"PUT",headers:g(),body:JSON.stringify({key:t,value:s})})).ok)throw new Error("Failed");m(n=>({...n,[t]:s})),c(`${t} updated`),setTimeout(()=>c(""),2e3)}catch{o(`Failed to update ${t}`)}d(!1)},N=async t=>{d(!0),o("");try{if(!(await fetch(`${x}/chat/admin/settings`,{method:"PUT",headers:g(),body:JSON.stringify({key:t,value:r[t]})})).ok)throw new Error("Failed");j(a=>({...a,[t]:!1})),c(`${t} saved`),setTimeout(()=>c(""),2e3)}catch{o(`Failed to save ${t}`)}d(!1)},C=async()=>{var t;d(!0);try{const a=await(await fetch(`${x}/chat/admin/run-auto-apply`,{method:"POST",headers:g()})).json();c(`Auto-apply run: ${((t=a.results)==null?void 0:t.applied)||0} applications made`),setTimeout(()=>c(""),5e3),u()}catch{o("Auto-apply run failed")}d(!1)};return M?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"Loading Jean settings..."}):e.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:e.jsx(z,{className:"text-blue-600",size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Jean AI Settings"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage your AI sales assistant"})]})]}),e.jsxs("button",{onClick:u,className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[e.jsx(P,{size:14})," Refresh Stats"]})]}),b&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(R,{size:16})," ",b]}),y&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-300 px-4 py-3 rounded-lg",children:y}),l&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[{label:"Sessions Today",value:((w=l.sessions)==null?void 0:w.today)||0,icon:"ðŸ’¬"},{label:"Messages Today",value:((k=l.messages)==null?void 0:k.today)||0,icon:"ðŸ“¨"},{label:"Unique Users",value:((_=l.sessions)==null?void 0:_.uniqueUsers)||0,icon:"ðŸ‘¤"},{label:"Auto-Applications",value:((S=l.autoApply)==null?void 0:S.applicationsToday)||0,icon:"ðŸ¤–"}].map((t,s)=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border dark:border-gray-700 p-4 text-center",children:[e.jsx("div",{className:"text-2xl mb-1",children:t.icon}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.value}),e.jsx("div",{className:"text-xs text-gray-500",children:t.label})]},s))}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border dark:border-gray-700 divide-y dark:divide-gray-700",children:[e.jsx("div",{className:"px-6 py-4",children:e.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(D,{size:18})," Feature Toggles"]})}),H.map(({key:t,label:s,desc:a})=>e.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white text-sm",children:s}),e.jsx("div",{className:"text-xs text-gray-500",children:a})]}),e.jsx("button",{onClick:()=>E(t),disabled:h,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r[t]==="true"?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r[t]==="true"?"translate-x-6":"translate-x-1"}`})})]},t))]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border dark:border-gray-700 divide-y dark:divide-gray-700",children:[e.jsx("div",{className:"px-6 py-4",children:e.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(U,{size:18})," Limits & Thresholds"]})}),B.map(({key:t,label:s,desc:a,min:n,max:L})=>e.jsxs("div",{className:"px-6 py-4 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white text-sm",children:s}),e.jsx("div",{className:"text-xs text-gray-500",children:a})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:n,max:L,value:r[t]||"",onChange:J=>v(t,J.target.value),className:"w-20 px-2 py-1 border rounded-lg text-sm text-center dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),f[t]&&e.jsx("button",{onClick:()=>N(t),disabled:h,className:"px-2 py-1 bg-blue-600 text-white text-xs rounded-lg hover:bg-blue-700",children:e.jsx(O,{size:12})})]})]},t))]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border dark:border-gray-700 divide-y dark:divide-gray-700",children:[e.jsx("div",{className:"px-6 py-4",children:e.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white",children:"Messages"})}),q.map(({key:t,label:s,desc:a})=>e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white text-sm mb-1",children:s}),e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:a}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("textarea",{value:r[t]||"",onChange:n=>v(t,n.target.value),className:"flex-1 px-3 py-2 border rounded-lg text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white resize-none",rows:2}),f[t]&&e.jsx("button",{onClick:()=>N(t),disabled:h,className:"px-3 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 self-end",children:"Save"})]})]},t))]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border dark:border-gray-700 p-6",children:[e.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Actions"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:e.jsx("button",{onClick:C,disabled:h||r.auto_apply_enabled!=="true",className:"px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:"ðŸ¤– Run Auto-Apply Now"})}),r.auto_apply_enabled!=="true"&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Enable auto-apply to use this action"})]}),((A=l==null?void 0:l.topIntents)==null?void 0:A.length)>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border dark:border-gray-700 p-6",children:[e.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Top Intents (Last 7 Days)"}),e.jsx("div",{className:"space-y-2",children:l.topIntents.filter(t=>t.intent).map((t,s)=>{var a;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:t.intent}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 rounded-full h-2",style:{width:`${Math.min(t.count/(((a=l.topIntents[0])==null?void 0:a.count)||1)*100,100)}%`}})}),e.jsx("span",{className:"text-xs text-gray-500 w-8 text-right",children:t.count})]})]},s)})})]})]})}export{K as default};
