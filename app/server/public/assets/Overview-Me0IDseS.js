import{j as e,u as j,r as b,a9 as y,a2 as f,ak as E,a as M,U as c,aP as V,F as N,S as O,ba as D}from"./vendor-ui-K43rUeTs.js";import{r as d,L as i}from"./vendor-react-Dlyf-RJj.js";import{u as F,j as G,p as T,g as L,O as B}from"./index-CAGaxXNg.js";import{S as h}from"./StatsCard-LvlhXMmK.js";import{E as I,R as z}from"./ReferralSection-CebJgd66.js";function K(){const{user:v}=F(),[m,w]=d.useState([]),[r,_]=d.useState([]),[t,S]=d.useState(null),[C,J]=d.useState(!0);d.useEffect(()=>{k()},[]);const k=async()=>{try{const[s,l]=await Promise.all([G.getMy(),T.get().catch(()=>null)]);if(w(s),S(l==null?void 0:l.profile),s.length>0){const u=[];for(const o of s.slice(0,5))try{const p=await L.getForJob(o.id);u.push(...p.map($=>({...$,job_title:o.title,job_id:o.id})))}catch{}u.sort((o,p)=>new Date(p.applied_at)-new Date(o.applied_at)),_(u.slice(0,10))}}catch(s){console.error("Failed to load data:",s)}finally{J(!1)}},P=()=>{if(!t)return 0;let s=0,l=10;t.company_name&&s++,t.industry&&s++,t.company_size&&s++,t.location&&s++,t.logo_url&&s++,t.description&&t.description.length>50&&s++,t.website&&s++,t.phone&&s++;try{t.benefits&&JSON.parse(t.benefits).length>=3&&s++}catch{}try{t.social_links&&(JSON.parse(t.social_links).facebook||JSON.parse(t.social_links).linkedin)&&s++}catch{}return Math.round(s/l*100)};if(C)return e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});const a={activeJobs:m.filter(s=>s.status==="active").length,totalJobs:m.length,totalViews:m.reduce((s,l)=>s+(l.views_count||0),0),totalApplications:r.length,pendingReviews:r.filter(s=>["applied","screening"].includes(s.status)).length,interviewScheduled:r.filter(s=>s.status==="interview").length,offered:r.filter(s=>s.status==="offered").length},n=P(),x=new Date().getHours(),R=x<12?"Good morning":x<18?"Good afternoon":"Good evening",g=m.filter(s=>s.status==="active").slice(0,5).map(s=>({...s,viewCount:s.views_count||0,appCount:r.filter(l=>l.job_id===s.id).length})),A=Math.max(...g.map(s=>Math.max(s.viewCount,s.appCount*10)),100);return e.jsxs("div",{children:[e.jsx(I,{user:v}),e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-800 rounded-lg shadow-lg p-8 mb-6 text-white",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[t!=null&&t.logo_url?e.jsx(B,{src:t.logo_url,alt:t.company_name,width:64,height:64,className:"h-16 w-16 rounded-lg bg-white object-contain p-2",eager:!0}):e.jsx("div",{className:"h-16 w-16 rounded-lg bg-white/20 flex items-center justify-center",children:e.jsx(j,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold mb-1",children:[R,t!=null&&t.company_name?`, ${t.company_name}`:"","!",e.jsx("span",{className:"ml-2",children:x<12?"â˜€ï¸":x<18?"ðŸ‘‹":"ðŸŒ™"})]}),e.jsx("p",{className:"text-primary-100",children:a.pendingReviews>0?`You have ${a.pendingReviews} application${a.pendingReviews!==1?"s":""} to review`:a.activeJobs>0?`${a.activeJobs} active job${a.activeJobs!==1?"s":""} running`:"Post a job to start receiving applications"})]})]}),e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("div",{className:"text-sm opacity-75",children:"Total Views"}),e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx(b,{className:"w-5 h-5"}),e.jsx("span",{className:"text-3xl font-bold",children:a.totalViews})]}),e.jsx("div",{className:"text-xs opacity-75",children:"across all jobs"})]})]})}),n<50&&e.jsx("div",{className:"mb-6 bg-primary-50 border-l-4 border-primary-500 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(y,{className:"w-6 h-6 text-primary-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-primary-900 mb-1",children:"Complete your company profile to attract better candidates"}),e.jsxs("p",{className:"text-sm text-primary-800 mb-3",children:["Your profile is only ",n,"% complete. Our guided setup takes just a few minutes and helps you stand out."]}),e.jsxs(i,{to:"/dashboard/employer/onboarding",className:"inline-flex items-center gap-1 px-4 py-2 bg-primary-600 text-white rounded-lg text-sm font-semibold hover:bg-primary-700 transition",children:["Start guided setup ",e.jsx(f,{className:"w-4 h-4"})]})]})]})}),n>=50&&n<80&&e.jsx("div",{className:"mb-6 bg-amber-50 border-l-4 border-amber-400 rounded-lg p-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(E,{className:"w-6 h-6 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsxs("h3",{className:"font-semibold text-amber-900",children:["Complete your company profile (",n,"%)"]})}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-3",children:e.jsx("div",{className:"h-2 rounded-full bg-amber-500 transition-all",style:{width:`${n}%`}})}),e.jsx("p",{className:"text-sm text-amber-800 mb-2",children:"Companies with complete profiles receive 3x more quality applications."}),e.jsxs(i,{to:"/dashboard/employer/company-profile",className:"inline-flex items-center gap-1 text-sm font-semibold text-amber-900 hover:underline",children:["Complete profile ",e.jsx(f,{className:"w-4 h-4"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(h,{title:"Active Jobs",value:a.activeJobs,icon:e.jsx(M,{className:"w-6 h-6"}),color:"blue",subtitle:`${a.totalJobs} total`}),e.jsx(h,{title:"Total Views",value:a.totalViews,icon:e.jsx(b,{className:"w-6 h-6"}),color:"purple"}),e.jsx(h,{title:"Applications",value:a.totalApplications,icon:e.jsx(c,{className:"w-6 h-6"}),color:"green",subtitle:`${a.pendingReviews} pending`}),e.jsx(h,{title:"Interviews",value:a.interviewScheduled,icon:e.jsx(V,{className:"w-6 h-6"}),color:"orange",subtitle:`${a.offered} offered`})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsxs(i,{to:"/dashboard/employer/post-job",className:"flex flex-col items-center gap-2 p-4 bg-primary-50 text-primary-700 rounded-lg hover:bg-primary-100 transition",children:[e.jsx(N,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm font-semibold text-center",children:"Post New Job"})]}),e.jsxs(i,{to:"/dashboard/employer/applicants",className:"flex flex-col items-center gap-2 p-4 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition",children:[e.jsx(c,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm font-semibold text-center",children:"View Applicants"})]}),e.jsxs(i,{to:"/dashboard/employer/candidate-search",className:"flex flex-col items-center gap-2 p-4 bg-purple-50 text-purple-700 rounded-lg hover:bg-purple-100 transition",children:[e.jsx(O,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm font-semibold text-center",children:"Search Candidates"})]}),e.jsxs(i,{to:"/dashboard/employer/company-profile",className:"flex flex-col items-center gap-2 p-4 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition",children:[e.jsx(j,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm font-semibold text-center",children:"Edit Profile"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(c,{className:"w-5 h-5"})," Recent Applications"]}),e.jsxs(i,{to:"/dashboard/employer/applicants",className:"text-primary-600 hover:text-primary-700 text-sm font-medium flex items-center gap-1",children:["View all ",e.jsx(f,{className:"w-4 h-4"})]})]}),r.length===0?e.jsxs("div",{className:"text-center py-10",children:[e.jsx(c,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"No applications yet"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Post a job to start receiving applications from candidates"}),e.jsxs(i,{to:"/dashboard/employer/post-job",className:"inline-flex items-center gap-2 px-5 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium text-sm",children:[e.jsx(N,{className:"w-4 h-4"})," Post a Job"]})]}):e.jsx("div",{className:"space-y-3",children:r.slice(0,8).map(s=>e.jsxs("div",{className:"flex items-center justify-between border border-gray-200 rounded-lg p-3 hover:border-primary-300 transition",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 truncate",children:s.applicant_name}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${s.status==="applied"?"bg-blue-100 text-blue-700":s.status==="screening"?"bg-yellow-100 text-yellow-700":s.status==="shortlisted"?"bg-purple-100 text-purple-700":s.status==="interview"?"bg-indigo-100 text-indigo-700":s.status==="offered"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s.status})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:s.job_title}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.applied_at).toLocaleDateString()})]}),e.jsx(i,{to:`/dashboard/employer/applicants/${s.job_id}`,className:"text-primary-600 hover:text-primary-700 font-medium text-sm ml-4",children:"Review â†’"})]},s.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-primary-600"}),"Job Performance"]}),g.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No active jobs"}):e.jsx("div",{className:"space-y-4",children:g.map(s=>e.jsxs("div",{children:[e.jsx(i,{to:`/jobs/${s.id}`,className:"text-sm font-medium text-gray-900 hover:text-primary-600 truncate block mb-1",children:s.title}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(b,{className:"w-3 h-3"})," ",s.viewCount]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(c,{className:"w-3 h-3"})," ",s.appCount," apps"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:e.jsx("div",{className:"bg-primary-500 h-1.5 rounded-full",style:{width:`${Math.min(100,s.viewCount/A*100)}%`}})})]},s.id))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg shadow-sm p-5 border border-purple-200",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4 text-purple-600"}),"Hiring Tips for PNG"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsx(z,{}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"ðŸ“± Include phone contact"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Many PNG candidates prefer calling over email"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"ðŸ’° Show salary range"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Jobs with salary get 2x more applications"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"âš¡ Respond within 48hrs"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Fast responses improve your employer rating"})]})]})]})]})]})]})}export{K as default};
