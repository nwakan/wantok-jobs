import{j as t}from"./vendor-ui-K43rUeTs.js";import{r as a}from"./vendor-react-Dlyf-RJj.js";import{a as c}from"./index-CAGaxXNg.js";const g={proposed:"bg-yellow-100 text-yellow-800",scheduled:"bg-blue-100 text-blue-800",confirmed:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"};function y(s){return s?new Date(s).toLocaleString("en-PG",{dateStyle:"medium",timeStyle:"short"}):"â€”"}function N(){const[s,u]=a.useState([]),[p,o]=a.useState(!0),[m,x]=a.useState(null),n=a.useCallback(async()=>{try{o(!0);const e=await c.get("/interviews/my");u(Array.isArray(e)?e:[])}catch(e){console.error(e)}finally{o(!1)}},[]);a.useEffect(()=>{n()},[n]);const b=async(e,r)=>{x(e);try{await c.patch(`/interviews/${e}/confirm`,{confirmed_time:r}),n()}catch(d){alert(d.message||"Failed to confirm")}finally{x(null)}},h=async e=>{if(confirm("Cancel this interview?"))try{await c.patch(`/interviews/${e}/cancel`,{}),n()}catch(r){alert(r.message)}},l=s.filter(e=>e.status==="proposed"),i=s.filter(e=>["scheduled","confirmed"].includes(e.status));return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"My Interviews"}),p?t.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading..."}):s.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"text-4xl mb-3",children:"ðŸ“…"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No interviews yet"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"When employers invite you for an interview, it will appear here"})]}):t.jsxs(t.Fragment,{children:[l.length>0&&t.jsxs("div",{children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:["â³ Pending Invites (",l.length,")"]}),t.jsx("div",{className:"space-y-3",children:l.map(e=>t.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-4 sm:p-5",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.job_title}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.company_name})]}),t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${g.proposed}`,children:"Action Required"})]}),e.type&&t.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:["Type: ",t.jsx("strong",{children:e.type})]}),e.location&&t.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["ðŸ“ ",e.location]}),e.video_link&&t.jsx("p",{className:"text-sm mb-1",children:t.jsx("a",{href:e.video_link,target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline",children:"ðŸ”— Video Link"})}),e.notes&&t.jsxs("p",{className:"text-sm text-gray-500 italic mb-3",children:['"',e.notes,'"']}),e.duration_minutes&&t.jsxs("p",{className:"text-sm text-gray-500 mb-3",children:["Duration: ",e.duration_minutes," minutes"]}),t.jsxs("div",{className:"mt-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select your preferred time:"}),t.jsx("div",{className:"space-y-2",children:(e.proposed_times||[]).map((r,d)=>t.jsxs("button",{onClick:()=>b(e.id,r),disabled:m===e.id,className:"w-full text-left px-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors text-sm",children:[t.jsxs("span",{className:"font-medium",children:["ðŸ“… ",y(r)]}),t.jsx("span",{className:"float-right text-blue-600 font-medium",children:m===e.id?"...":"Confirm â†’"})]},d))})]}),t.jsx("button",{onClick:()=>h(e.id),className:"mt-3 text-sm text-red-500 hover:underline",children:"Decline interview"})]},e.id))})]}),i.length>0&&t.jsxs("div",{children:[t.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:["ðŸ“… Upcoming Interviews (",i.length,")"]}),t.jsx("div",{className:"space-y-3",children:i.map(e=>t.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-4 sm:p-5",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.job_title}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.company_name})]}),t.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${g[e.status]}`,children:e.status})]}),t.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["ðŸ“… ",y(e.confirmed_time||e.scheduled_at),e.duration_minutes&&` Â· ${e.duration_minutes} min`,e.type&&` Â· ${e.type}`]}),e.location&&t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["ðŸ“ ",e.location]}),e.video_link&&t.jsx("a",{href:e.video_link,target:"_blank",rel:"noreferrer",className:"inline-block mt-2 px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"Join Video Call"}),e.notes&&t.jsxs("p",{className:"text-sm text-gray-500 mt-2 italic",children:['"',e.notes,'"']}),t.jsx("button",{onClick:()=>h(e.id),className:"mt-3 text-sm text-red-500 hover:underline",children:"Cancel interview"})]},e.id))})]})]})]})}export{N as default};
