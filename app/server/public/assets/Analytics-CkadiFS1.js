import{j as e,a_ as x,a$ as C,b0 as u,b1 as f,b2 as N,b3 as g,b4 as R,b5 as S,b6 as D,b7 as K,b8 as T,b9 as $}from"./vendor-ui-K43rUeTs.js";import{r as i}from"./vendor-react-Dlyf-RJj.js";const E="/api",n=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#14b8a6","#f97316","#6366f1","#84cc16"];function L(){const t=localStorage.getItem("token");return t?{Authorization:`Bearer ${t}`}:{}}function _(){const[t,d]=i.useState(null),[c,l]=i.useState(!0),[p,k]=i.useState(null);if(i.useEffect(()=>{fetch(`${E}/analytics/jobseeker`,{headers:L()}).then(a=>{if(!a.ok)throw new Error("Failed to load analytics");return a.json()}).then(d).catch(a=>k(a.message)).finally(()=>l(!1))},[]),c)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Application Analytics"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(a=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 animate-pulse h-24"},a))}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[1,2,3].map(a=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 animate-pulse h-64"},a))})]});if(p)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-red-500",children:p})});const{funnel:v,timeline:m,responseRate:o,avgResponseDays:y,totalApplications:j,topCategories:r,tips:b}=t,w={pending:"Pending",reviewed:"Reviewed",shortlisted:"Shortlisted",interviewed:"Interviewed",offered:"Offered",hired:"Hired"},A=v.map(a=>({...a,label:w[a.stage]||a.stage}));return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Application Analytics"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsx(h,{icon:"ðŸ“",label:"Total Applications",value:j}),e.jsx(h,{icon:"ðŸ“¬",label:"Response Rate",value:`${o}%`,sub:o>=50?"Great!":o>=25?"Average":"Needs improvement"}),e.jsx(h,{icon:"â±ï¸",label:"Avg Response Time",value:y?`${y} days`:"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"Application Funnel"}),j===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No applications yet"}):e.jsx(x,{width:"100%",height:250,children:e.jsxs(C,{data:A,layout:"vertical",margin:{left:20},children:[e.jsx(u,{strokeDasharray:"3 3"}),e.jsx(f,{type:"number",allowDecimals:!1}),e.jsx(N,{type:"category",dataKey:"label",width:90,tick:{fontSize:12}}),e.jsx(g,{}),e.jsx(R,{dataKey:"count",fill:"#3b82f6",radius:[0,4,4,0]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"Applications per Week"}),m.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No recent applications"}):e.jsx(x,{width:"100%",height:250,children:e.jsxs(S,{data:m,children:[e.jsx(u,{strokeDasharray:"3 3"}),e.jsx(f,{dataKey:"week_start",tick:{fontSize:11}}),e.jsx(N,{allowDecimals:!1}),e.jsx(g,{}),e.jsx(D,{type:"monotone",dataKey:"count",stroke:"#10b981",fill:"#10b981",fillOpacity:.2,name:"Applications"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"Top Categories Applied To"}),r.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No data yet"}):e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x,{width:"60%",height:220,children:e.jsxs(K,{children:[e.jsx(T,{data:r,dataKey:"count",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:a,percent:s})=>`${(s*100).toFixed(0)}%`,labelLine:!1,children:r.map((a,s)=>e.jsx($,{fill:n[s%n.length]},s))}),e.jsx(g,{})]})}),e.jsx("div",{className:"w-[40%] space-y-1 text-sm",children:r.slice(0,6).map((a,s)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:n[s%n.length]}}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300 truncate",children:a.name}),e.jsx("span",{className:"text-gray-500 ml-auto",children:a.count})]},a.name))})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-gray-100",children:"ðŸ’¡ Application Tips"}),b.length===0?e.jsx("p",{className:"text-green-600 dark:text-green-400",children:"You're doing great! Keep applying and following up."}):e.jsx("ul",{className:"space-y-3",children:b.map((a,s)=>e.jsxs("li",{className:"flex gap-3 text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"text-yellow-500 flex-shrink-0",children:"âš¡"}),e.jsx("span",{children:a})]},s))})]})]})]})}function h({icon:t,label:d,value:c,sub:l}){return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:t}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:d}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:c}),l&&e.jsx("p",{className:"text-xs text-gray-400",children:l})]})]})})}export{_ as default};
