import{j as e}from"./vendor-ui-K43rUeTs.js";import{r}from"./vendor-react-Dlyf-RJj.js";import{u as C,c as P,n as y,p as g}from"./index-CAGaxXNg.js";function m({checked:n,onChange:i,disabled:c}){return e.jsxs("label",{className:`relative inline-flex items-center ${c?"opacity-50":"cursor-pointer"}`,children:[e.jsx("input",{type:"checkbox",checked:n,onChange:o=>i(o.target.checked),disabled:c,className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})}function T(){const{user:n}=C(),{showToast:i}=P(),[c,o]=r.useState(!0),[x,u]=r.useState(!1),[j,d]=r.useState(!1),[a,h]=r.useState({email_new_application:!0,email_status_change:!0,email_new_message:!0,email_job_alert:!0,email_newsletter:!0,push_enabled:!1,sms_enabled:!1}),[p,b]=r.useState({profile_visibility:"employers-only"});r.useEffect(()=>{v()},[]);const v=async()=>{var s;try{const[t,l]=await Promise.all([y.get(),g.get().catch(()=>null)]);h({email_new_application:!!t.email_new_application,email_status_change:!!t.email_status_change,email_new_message:!!t.email_new_message,email_job_alert:!!t.email_job_alert,email_newsletter:!!t.email_newsletter,push_enabled:!!t.push_enabled,sms_enabled:!!t.sms_enabled}),(s=l==null?void 0:l.settings)!=null&&s.profile_visibility&&b({profile_visibility:l.settings.profile_visibility})}catch(t){console.error("Failed to load settings:",t)}finally{o(!1)}},_=async()=>{u(!0);try{await y.update({email_new_application:a.email_new_application,email_status_change:a.email_status_change,email_new_message:a.email_new_message,email_job_alert:a.email_job_alert,email_newsletter:a.email_newsletter,push_enabled:a.push_enabled,sms_enabled:a.sms_enabled}),i("Notification preferences saved","success")}catch{i("Failed to save preferences","error")}finally{u(!1)}},N=async()=>{try{await g.update({settings:p}),i("Privacy settings saved","success")}catch{i("Failed to save settings","error")}},w=async()=>{try{i("Account deletion request submitted","success"),d(!1),setTimeout(()=>{window.location.href="/"},2e3)}catch{i("Failed to delete account","error")}};if(c)return e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});const f=[{key:"email_status_change",label:"Application Updates",desc:"Updates on your job applications (interview invites, status changes, etc.)"},{key:"email_new_message",label:"New Messages",desc:"Get notified when you receive new messages"},{key:"email_job_alert",label:"Job Alerts",desc:"Emails based on your saved job alerts and matching jobs"},{key:"email_new_application",label:"Application Confirmations",desc:"Confirmation when your application is submitted"},{key:"email_newsletter",label:"Newsletter",desc:"Career tips, industry news, and platform updates"}];return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Settings"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Choose which emails you'd like to receive"}),e.jsx("div",{className:"space-y-1",children:f.map(({key:s,label:t,desc:l},S)=>e.jsxs("div",{className:`flex items-center justify-between py-3 ${S<f.length-1?"border-b":""}`,children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t}),e.jsx("p",{className:"text-sm text-gray-600",children:l})]}),e.jsx(m,{checked:a[s],onChange:k=>h({...a,[s]:k})})]},s))}),e.jsxs("div",{className:"mt-8 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Push Notifications"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Coming soon"}),e.jsxs("div",{className:"flex items-center justify-between py-3 opacity-50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Enable Push Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive browser push notifications for important updates"})]}),e.jsx(m,{checked:a.push_enabled,onChange:()=>{},disabled:!0})]})]}),e.jsxs("div",{className:"mt-4 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"SMS Notifications"}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Coming soon"}),e.jsxs("div",{className:"flex items-center justify-between py-3 opacity-50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Enable SMS Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get text messages for urgent updates"})]}),e.jsx(m,{checked:a.sms_enabled,onChange:()=>{},disabled:!0})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:_,disabled:x,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium disabled:opacity-50",children:x?"Saving...":"Save Notification Preferences"})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Privacy Settings"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Profile Visibility"}),e.jsx("div",{className:"space-y-3",children:[{value:"public",label:"Public",desc:"Your profile is visible to everyone"},{value:"employers-only",label:"Employers Only",desc:"Only verified employers can view your full profile"},{value:"private",label:"Private",desc:"Your profile is hidden from searches (only visible when you apply)"}].map(s=>e.jsxs("label",{className:"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"visibility",value:s.value,checked:p.profile_visibility===s.value,onChange:t=>b({profile_visibility:t.target.value}),className:"mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.label}),e.jsx("p",{className:"text-sm text-gray-600",children:s.desc})]})]},s.value))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:N,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium",children:"Save Privacy Settings"})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border-2 border-red-200",children:[e.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Danger Zone"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Permanently delete your account and all your data. This action cannot be undone."})]}),e.jsx("button",{onClick:()=>d(!0),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium",children:"Delete Account"})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Delete Account?"}),e.jsx("p",{className:"text-gray-700 mb-6",children:"Are you absolutely sure? This will:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-700 mb-6 space-y-1",children:[e.jsx("li",{children:"Delete your profile and all personal information"}),e.jsx("li",{children:"Remove all your job applications"}),e.jsx("li",{children:"Cancel all job alerts"}),e.jsxs("li",{children:["This action ",e.jsx("strong",{children:"cannot be undone"})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Type ",e.jsx("strong",{children:n==null?void 0:n.email})," to confirm:"]}),e.jsx("input",{type:"text",placeholder:"Enter your email",className:"w-full px-4 py-2 border border-gray-300 rounded-lg mb-6"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:w,className:"flex-1 px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium",children:"Yes, Delete My Account"}),e.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"})]})]})})]})}export{T as default};
