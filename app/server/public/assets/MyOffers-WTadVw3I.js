import{j as e,F as N,Z as S,a as O,am as F,ap as o,x as c,aA as x,f as T}from"./vendor-ui-K43rUeTs.js";import{d as k,r as n}from"./vendor-react-Dlyf-RJj.js";import{c as E}from"./index-CAGaxXNg.js";function P(){const{id:l}=k(),{showToast:i}=E(),[m,w]=n.useState([]),[t,v]=n.useState(null),[_,h]=n.useState(!0),[d,g]=n.useState(null);n.useEffect(()=>{l?b(l):p()},[l]);const p=async()=>{try{const s=await fetch("/api/offer-letters/my",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!s.ok)throw new Error("Failed to load offers");const a=await s.json();w(a)}catch(s){console.error("Failed to load offers:",s),i("Failed to load offers","error")}finally{h(!1)}},b=async s=>{try{const a=await fetch(`/api/offer-letters/${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!a.ok)throw new Error("Failed to load offer");const r=await a.json();v(r)}catch{i("Failed to load offer","error")}finally{h(!1)}},j=async s=>{if(confirm(s==="accepted"?"Accept this job offer? This action cannot be undone.":"Decline this job offer? You can provide a reason via messaging.")){g(s);try{if(!(await fetch(`/api/offer-letters/${t.id}/respond`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({response:s})})).ok)throw new Error("Failed to respond to offer");i(s==="accepted"?"ðŸŽ‰ Congratulations! Offer accepted!":"Offer declined",s==="accepted"?"success":"info"),l?b(l):p()}catch(r){i("Failed to respond to offer: "+r.message,"error")}finally{g(null)}}},f=s=>{const a={sent:{color:"bg-blue-100 text-blue-800",icon:o,label:"Pending Response"},accepted:{color:"bg-green-100 text-green-800",icon:c,label:"Accepted"},declined:{color:"bg-red-100 text-red-800",icon:x,label:"Declined"},expired:{color:"bg-orange-100 text-orange-800",icon:o,label:"Expired"}},r=a[s]||a.sent,D=r.icon;return e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${r.color}`,children:[e.jsx(D,{className:"h-4 w-4 mr-1"}),r.label]})},y=s=>{if(!s)return!1;const a=Math.ceil((new Date(s)-new Date)/(1e3*60*60*24));return a<=3&&a>0},u=s=>s?new Date(s)<new Date:!1;if(_)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})});if(t){const s=u(t.expires_at),a=y(t.expires_at);return e.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Job Offer"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[t.job_title," at ",t.company_name]})]}),f(t.status)]}),t.status==="sent"&&e.jsxs(e.Fragment,{children:[s&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-red-800 font-medium",children:["âš ï¸ This offer has expired on ",new Date(t.expires_at).toLocaleDateString()]})}),a&&!s&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-yellow-800 font-medium",children:["â° This offer expires soon on ",new Date(t.expires_at).toLocaleDateString(),". Please respond promptly!"]})})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-8 mb-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-blue-500 rounded-full mx-auto mb-4 flex items-center justify-center",children:e.jsx(N,{className:"h-10 w-10 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Congratulations! ðŸŽ‰"}),e.jsxs("p",{className:"text-gray-600",children:["You've received a job offer from ",t.company_name]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-700",children:["Dear ",t.candidate_name,","]}),e.jsxs("p",{className:"text-gray-700",children:["We are pleased to offer you the position of ",e.jsx("strong",{children:t.job_title})," at ",t.company_name,"."]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-6 my-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4 text-lg",children:"ðŸ“‹ Offer Details"}),e.jsxs("div",{className:"space-y-4",children:[t.salary&&e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-white rounded-lg p-3 mr-4",children:e.jsx(S,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Salary"}),e.jsxs("div",{className:"font-bold text-gray-900 text-xl",children:[t.salary_currency," ",t.salary.toLocaleString()]}),e.jsxs("span",{className:"text-gray-500 text-sm capitalize",children:["(",t.salary_period,")"]})]})]}),t.employment_type&&e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-white rounded-lg p-3 mr-4",children:e.jsx(O,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Employment Type"}),e.jsx("div",{className:"font-semibold text-gray-900 capitalize",children:t.employment_type})]})]}),t.start_date&&e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-white rounded-lg p-3 mr-4",children:e.jsx(F,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Start Date"}),e.jsx("div",{className:"font-semibold text-gray-900",children:new Date(t.start_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),t.probation_months&&e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-white rounded-lg p-3 mr-4",children:e.jsx(o,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Probation Period"}),e.jsxs("div",{className:"font-semibold text-gray-900",children:[t.probation_months," months"]})]})]})]})]}),t.benefits&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[e.jsx("span",{className:"text-lg",children:"âœ¨"}),e.jsx("span",{className:"ml-2",children:"Benefits"})]}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:t.benefits})]}),t.additional_terms&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Additional Terms"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:t.additional_terms})]}),e.jsxs("div",{className:"pt-6 border-t",children:[e.jsx("p",{className:"text-gray-700",children:"We look forward to having you join our team!"}),e.jsxs("p",{className:"text-gray-700 mt-4",children:["Best regards,",e.jsx("br",{}),e.jsx("strong",{children:t.company_name})]})]})]})]})}),t.status==="sent"&&!s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>j("accepted"),disabled:d!==null,className:"px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:d==="accepted"?e.jsx(e.Fragment,{children:"Processing..."}):e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"h-5 w-5 mr-2"}),"Accept Offer"]})}),e.jsx("button",{onClick:()=>j("declined"),disabled:d!==null,className:"px-6 py-4 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:d==="declined"?e.jsx(e.Fragment,{children:"Processing..."}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"h-5 w-5 mr-2"}),"Decline Offer"]})})]}),e.jsxs("button",{className:"w-full px-6 py-3 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 font-medium flex items-center justify-center",children:[e.jsx(T,{className:"h-5 w-5 mr-2"}),"Have Questions? Message the Employer"]})]}),t.status==="accepted"&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 text-center",children:[e.jsx(c,{className:"h-12 w-12 text-green-600 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:"Offer Accepted!"}),e.jsxs("p",{className:"text-green-700",children:["You accepted this offer on ",new Date(t.responded_at).toLocaleDateString(),". The employer will contact you with next steps."]})]}),t.status==="declined"&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 text-center",children:[e.jsx(x,{className:"h-12 w-12 text-gray-600 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Offer Declined"}),e.jsxs("p",{className:"text-gray-700",children:["You declined this offer on ",new Date(t.responded_at).toLocaleDateString(),"."]})]})]})}return e.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"My Job Offers"}),m.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx(N,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No offers yet"}),e.jsx("p",{className:"text-gray-500",children:"When employers send you job offers, they'll appear here."})]}):e.jsx("div",{className:"grid gap-6",children:m.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:s.job_title}),e.jsx("p",{className:"text-gray-600",children:s.company_name})]}),f(s.status)]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 text-sm",children:[s.salary&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Salary"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:[s.salary_currency," ",s.salary.toLocaleString()]})]}),s.employment_type&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Type"}),e.jsx("p",{className:"font-semibold text-gray-900 capitalize",children:s.employment_type})]}),s.start_date&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Start Date"}),e.jsx("p",{className:"font-semibold text-gray-900",children:new Date(s.start_date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Received"}),e.jsx("p",{className:"font-semibold text-gray-900",children:new Date(s.sent_at).toLocaleDateString()})]})]}),s.expires_at&&s.status==="sent"&&e.jsx("div",{className:`${y(s.expires_at)?"bg-yellow-50 border-yellow-200 text-yellow-800":"bg-blue-50 border-blue-200 text-blue-700"} border rounded-lg p-3 mb-4 text-sm`,children:u(s.expires_at)?e.jsxs("strong",{children:["Expired on ",new Date(s.expires_at).toLocaleDateString()]}):e.jsxs(e.Fragment,{children:["Expires on ",new Date(s.expires_at).toLocaleDateString()]})}),e.jsx("a",{href:`/dashboard/jobseeker/offers/${s.id}`,className:"block w-full text-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"View Full Offer"})]},s.id))})]})}export{P as default};
