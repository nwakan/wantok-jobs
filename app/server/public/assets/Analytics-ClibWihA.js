import{j as e}from"./vendor-ui-K43rUeTs.js";import{r as i}from"./vendor-react-Dlyf-RJj.js";import{u as g,a as u,P as y}from"./index-CAGaxXNg.js";import{S as r}from"./StatsCard-LvlhXMmK.js";function b(){const{user:f}=g(),[d,o]=i.useState(null),[m,x]=i.useState(!0),[a,p]=i.useState("30");i.useEffect(()=>{h()},[a]);const h=async()=>{try{x(!0);const s=await u.get(`/employer/analytics?period=${a}`);o(s.data)}catch(s){console.error("Failed to fetch analytics:",s)}finally{x(!1)}};if(m)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!d)return e.jsx("div",{className:"text-center py-12",children:"Failed to load analytics"});const{overview:t,jobMetrics:l,topPerformingJobs:c,applicationsByStatus:n}=d;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(y,{title:"Analytics",description:"Track your job posting performance"}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("select",{value:a,onChange:s=>p(s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"7",children:"Last 7 days"}),e.jsx("option",{value:"30",children:"Last 30 days"}),e.jsx("option",{value:"90",children:"Last 90 days"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(r,{title:"Total Views",value:t.totalViews||0,subtitle:`${t.recentViews||0} in last ${a} days`,icon:"ðŸ“Š"}),e.jsx(r,{title:"Total Applications",value:t.totalApplications||0,subtitle:`${t.recentApplications||0} in last ${a} days`,icon:"ðŸ“"}),e.jsx(r,{title:"Conversion Rate",value:`${t.conversionRate||0}%`,subtitle:"Applications / Views",icon:"ðŸ“ˆ"}),e.jsx(r,{title:"Active Jobs",value:t.totalJobs||0,subtitle:"Currently posted",icon:"ðŸ’¼"})]}),c&&c.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Top Performing Jobs"}),e.jsx("div",{className:"space-y-3",children:c.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition",children:[e.jsx("div",{className:"flex-1",children:e.jsx("h3",{className:"font-medium text-gray-900",children:s.title})}),e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["ðŸ‘ï¸ ",s.views_count," views"]}),e.jsxs("span",{className:"text-gray-600",children:["ðŸ“ ",s.applications," applications"]})]})]},s.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-semibold",children:"Job Performance"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Job Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Views"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recent Views"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Applications"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Conversion"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l&&l.length>0?l.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:s.title}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-gray-900",children:s.total_views||0}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-gray-600",children:s.recent_views||0}),e.jsx("td",{className:"px-6 py-4 text-sm text-right text-gray-900",children:s.total_applications||0}),e.jsx("td",{className:"px-6 py-4 text-sm text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${Math.min(s.conversion_rate||0,100)}%`}})}),e.jsxs("span",{className:"text-gray-900 font-medium",children:[s.conversion_rate||0,"%"]})]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"No jobs found"})})})]})})]}),n&&n.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Application Status"}),e.jsx("div",{className:"space-y-3",children:n.map(s=>e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium capitalize text-gray-700",children:s.status.replace("_"," ")}),e.jsxs("span",{className:"text-sm text-gray-600",children:[s.count," applications"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${s.count/t.totalApplications*100}%`}})})]})},s.status))})]})]})}export{b as default};
