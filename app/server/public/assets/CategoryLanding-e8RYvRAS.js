import{I as E,m as R,r as i,j as e,S as J,G as T,T as $,q as U,i as m,s as D,t as G,v as A,H,w as M,x as B,y as F,z as I,U as L,D as q,e as z,P as K,J as d,K as V,N as W,B as N}from"./index-BNk0NZme.js";import{M as O,U as Q,C as X}from"./user-plus-BdT8OdBi.js";const f={Calculator:X,FileText:z,DollarSign:q,Users:L,Hammer:I,GraduationCap:F,Cog:B,Landmark:M,Heart:H,Coffee:A,UserPlus:Q,Code:G,Scale:D,Briefcase:m,Truck:U,TrendingUp:$,Globe:T,Microscope:O,Shield:J};function ee(){const{slug:l}=E(),n=R(),[a,w]=i.useState(null),[x,v]=i.useState([]),[g,C]=i.useState([]),[p,h]=i.useState([]),[_,b]=i.useState(!0),[k,j]=i.useState(null),[t,y]=i.useState({page:1,limit:12,total:0,totalPages:0});i.useEffect(()=>{P()},[l]);const P=async()=>{try{b(!0),j(null);const s=await fetch(`/api/categories/${l}`);if(!s.ok)throw new Error("Category not found");const o=await s.json();w(o.category),v(o.related||[]),C(o.topEmployers||[]);const u=await(await fetch(`/api/categories/${l}/jobs?page=1&limit=12`)).json();h(u.jobs||[]),y(u.pagination||{})}catch(s){console.error("Error loading category:",s),j(s.message)}finally{b(!1)}},c=async s=>{try{const r=await(await fetch(`/api/categories/${l}/jobs?page=${s}&limit=12`)).json();h(r.jobs||[]),y(r.pagination||{}),window.scrollTo({top:0,behavior:"smooth"})}catch(o){console.error("Error loading more jobs:",o)}};if(_)return e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(k||!a)return e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Category Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The category you're looking for doesn't exist."}),e.jsx("button",{onClick:()=>n("/categories"),className:"px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition",children:"Browse All Categories"})]})});const S=f[a.icon_name]||m;return e.jsxs(e.Fragment,{children:[e.jsx(K,{title:a.meta_title||`${a.name} Jobs in PNG | WantokJobs`,description:a.meta_description||a.description}),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-800 text-white py-16",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"p-4 bg-white/10 rounded-lg backdrop-blur-sm",children:e.jsx(S,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:a.name}),e.jsxs("p",{className:"text-primary-100 text-lg",children:[a.active_jobs||0," active job",a.active_jobs!==1?"s":""," in Papua New Guinea"]})]})]}),a.description&&e.jsx("p",{className:"text-lg text-primary-50 max-w-3xl mt-6",children:a.description})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Latest ",a.name," Jobs"]}),e.jsxs("button",{onClick:()=>n(`/jobs?category=${a.slug}`),className:"text-sm text-primary-600 hover:text-primary-700 font-medium flex items-center gap-1",children:["View All ",e.jsx(d,{className:"w-4 h-4"})]})]}),p.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx(V,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No jobs found"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["There are currently no active ",a.name," jobs. Set up a job alert to be notified when new positions are posted."]}),e.jsx("button",{onClick:()=>n("/dashboard"),className:"px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition",children:"Create Job Alert"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:p.map(s=>e.jsx(W,{job:s},s.id))}),t.totalPages>1&&e.jsxs("div",{className:"mt-8 flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>c(t.page-1),disabled:t.page===1,className:"min-w-[100px] min-h-[48px] px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 active:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-2",children:[...Array(t.totalPages)].map((s,o)=>{const r=o+1;return r<=2||r>t.totalPages-2||Math.abs(r-t.page)<=1?e.jsx("button",{onClick:()=>c(r),className:`min-w-[44px] min-h-[44px] rounded-lg ${r===t.page?"bg-primary-600 text-white":"border border-gray-300 text-gray-700 hover:bg-gray-50 active:bg-gray-100"}`,children:r},r):r===3&&t.page>4||r===t.totalPages-2&&t.page<t.totalPages-3?e.jsx("span",{className:"text-gray-500",children:"..."},r):null})}),e.jsx("button",{onClick:()=>c(t.page+1),disabled:t.page===t.totalPages,className:"min-w-[100px] min-h-[48px] px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 active:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[g.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 text-gray-600"}),"Top Employers Hiring"]}),e.jsx("div",{className:"space-y-3",children:g.map((s,o)=>e.jsxs("button",{onClick:()=>n(`/jobs?company=${encodeURIComponent(s.company_display_name)}`),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg transition text-left",children:[s.company_logo?e.jsx("img",{src:s.company_logo,alt:s.company_display_name,className:"w-10 h-10 object-contain"}):e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded flex items-center justify-center",children:e.jsx(N,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate text-sm",children:s.company_display_name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.job_count," job",s.job_count!==1?"s":""]})]}),e.jsx(d,{className:"w-4 h-4 text-gray-400"})]},o))})]}),x.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Related Categories"}),e.jsx("div",{className:"space-y-2",children:x.map(s=>{const o=f[s.icon_name]||m;return e.jsxs("button",{onClick:()=>n(`/category/${s.slug}`),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg transition text-left",children:[e.jsx("div",{className:"p-2 bg-primary-50 rounded text-primary-600",children:e.jsx(o,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.active_jobs||0," jobs"]})]}),e.jsx(d,{className:"w-4 h-4 text-gray-400"})]},s.id)})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-primary-600 to-primary-800 rounded-lg p-6 text-white",children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Stay Updated"}),e.jsxs("p",{className:"text-primary-100 text-sm mb-4",children:["Get notified when new ",a.name," jobs are posted."]}),e.jsx("button",{onClick:()=>n("/dashboard"),className:"w-full bg-white text-primary-600 px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition",children:"Create Job Alert"})]})]})]})})]})]})}export{ee as default};
