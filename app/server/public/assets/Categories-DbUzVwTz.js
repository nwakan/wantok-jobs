import{j as e}from"./vendor-ui-K43rUeTs.js";import{r}from"./vendor-react-Dlyf-RJj.js";import{c as N,y as n}from"./index-CAGaxXNg.js";function _(){const[x,m]=r.useState([]),[h,y]=r.useState(!0),[i,l]=r.useState(!1),[d,p]=r.useState(null),{showToast:a}=N(),[s,o]=r.useState({name:"",description:"",sort_order:0});r.useEffect(()=>{c()},[]);const c=async()=>{try{const t=await n.getAll();m(t||[])}catch(t){console.error("Failed to load categories:",t),m([{id:1,name:"Information Technology",description:"Tech jobs",job_count:45,sort_order:1},{id:2,name:"Healthcare",description:"Medical jobs",job_count:32,sort_order:2},{id:3,name:"Education",description:"Teaching jobs",job_count:28,sort_order:3},{id:4,name:"Finance",description:"Financial jobs",job_count:19,sort_order:4}])}finally{y(!1)}},g=async t=>{t.preventDefault();try{d?(await n.update(d.id,s),a("Category updated successfully","success")):(await n.create(s),a("Category created successfully","success")),c(),u()}catch{a("Failed to save category","error")}},b=t=>{p(t),o({name:t.name,description:t.description||"",sort_order:t.sort_order||0}),l(!0)},j=async t=>{if(confirm("Are you sure you want to delete this category?"))try{await n.delete(t),a("Category deleted successfully","success"),c()}catch{a("Failed to delete category","error")}},u=()=>{o({name:"",description:"",sort_order:0}),p(null),l(!1)};return h?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Category Management"}),e.jsx("button",{onClick:()=>l(!i),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:i?"Cancel":"Add Category"})]}),i&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:d?"Edit Category":"Add New Category"}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Name"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>o({...s,name:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:s.description,onChange:t=>o({...s,description:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",rows:"3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort Order"}),e.jsx("input",{type:"number",value:s.sort_order,onChange:t=>o({...s,sort_order:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[d?"Update":"Create"," Category"]}),e.jsx("button",{type:"button",onClick:u,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Job Count"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-12 text-center text-gray-500",children:"No categories found"})}):x.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.sort_order}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:t.description}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.job_count||0}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:[e.jsx("button",{onClick:()=>b(t),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Edit"}),e.jsx("button",{onClick:()=>j(t.id),className:"text-red-600 hover:text-red-700 font-medium",children:"Delete"})]})]},t.id))})]})})]})}export{_ as default};
