import{ap as v,x,aA as p,j as e,a6 as w}from"./vendor-ui-K43rUeTs.js";import{r}from"./vendor-react-Dlyf-RJj.js";import{c as C,v as h}from"./index-CAGaxXNg.js";function S(){const{showToast:c}=C(),[i,g]=r.useState([]),[l,j]=r.useState({}),[a,u]=r.useState("pending"),[y,d]=r.useState(!0);r.useEffect(()=>{o()},[a]);const o=async()=>{try{d(!0);const s=await h.getReviews({status:a});g(s.reviews||[]),j(s.counts||{})}catch{c("Failed to load reviews","error")}finally{d(!1)}},m=async(s,t)=>{try{await h.updateReview(s,t),c(`Review ${t}d successfully`,"success"),o()}catch{c(`Failed to ${t} review`,"error")}},f=s=>e.jsx("div",{className:"flex gap-0.5",children:[...Array(5)].map((t,n)=>e.jsx(w,{className:`w-4 h-4 ${n<s?"text-yellow-400 fill-current":"text-gray-300"}`},n))}),b=[{key:"pending",label:"Pending",count:l.pending,icon:v},{key:"approved",label:"Approved",count:l.approved,icon:x},{key:"rejected",label:"Rejected",count:l.rejected,icon:p}];return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Review Management"}),e.jsx("div",{className:"flex gap-2 mb-6",children:b.map(({key:s,label:t,count:n,icon:N})=>e.jsxs("button",{onClick:()=>u(s),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${a===s?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(N,{className:"w-4 h-4"}),t," (",n||0,")"]},s))}),y?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary-600"})}):i.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:["No ",a," reviews found."]}):e.jsx("div",{className:"space-y-4",children:i.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[f(s.rating),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()})]}),s.title&&e.jsx("h3",{className:"font-semibold text-gray-900",children:s.title}),e.jsxs("div",{className:"text-sm text-gray-600",children:["By ",s.reviewer_name||"Unknown"," → ",s.company_name||"Unknown Company",s.job_title&&` • ${s.job_title}`,s.is_current_employee?" • Current Employee":" • Former Employee"]})]}),a==="pending"&&e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsxs("button",{onClick:()=>m(s.id,"approve"),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700",children:[e.jsx(x,{className:"w-4 h-4"})," Approve"]}),e.jsxs("button",{onClick:()=>m(s.id,"reject"),className:"flex items-center gap-1 px-3 py-1.5 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700",children:[e.jsx(p,{className:"w-4 h-4"})," Reject"]})]})]}),s.pros&&e.jsxs("div",{className:"text-sm mb-2",children:[e.jsx("span",{className:"font-medium text-green-700",children:"Pros:"})," ",e.jsx("span",{className:"text-gray-700",children:s.pros})]}),s.cons&&e.jsxs("div",{className:"text-sm mb-2",children:[e.jsx("span",{className:"font-medium text-red-700",children:"Cons:"})," ",e.jsx("span",{className:"text-gray-700",children:s.cons})]}),s.advice&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"Advice:"})," ",e.jsx("span",{className:"text-gray-700",children:s.advice})]})]},s.id))})]})}export{S as default};
