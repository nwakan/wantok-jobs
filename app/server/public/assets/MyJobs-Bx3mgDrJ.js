import{j as e,aW as $}from"./vendor-ui-K43rUeTs.js";import{r as o,L as i}from"./vendor-react-Dlyf-RJj.js";import{c as _,j as b,o as k}from"./index-CAGaxXNg.js";function J(){const{showToast:d}=_(),[r,x]=o.useState([]),[y,u]=o.useState(!0),[m,g]=o.useState(!1),[t,n]=o.useState("all");o.useEffect(()=>{f()},[]);const f=async()=>{try{const s=await b.getMy();x(s.data)}catch(s){console.error("Failed to load jobs:",s)}finally{u(!1)}},j=async s=>{if(confirm("Are you sure you want to delete this job? This action cannot be undone."))try{await b.delete(s),x(r.filter(a=>a.id!==s)),d("Job deleted successfully","success")}catch(a){d("Failed to delete job: "+a.message,"error")}},N=async s=>{d("Clone feature coming soon - redirecting to post job","info")},v=async()=>{g(!0);try{const s=localStorage.getItem("token"),a=await fetch("/api/export/jobs",{headers:{Authorization:`Bearer ${s}`}});if(!a.ok)throw new Error("Export failed");const w=await a.blob(),p=window.URL.createObjectURL(w),c=document.createElement("a");c.href=p,c.download=`my-jobs-${new Date().toISOString().split("T")[0]}.csv`,c.click(),window.URL.revokeObjectURL(p),d("Jobs exported successfully","success")}catch{d("Failed to export jobs","error")}finally{g(!1)}},h=t==="all"?r:r.filter(s=>s.status===t),l={active:r.filter(s=>s.status==="active").length,draft:r.filter(s=>s.status==="draft").length,closed:r.filter(s=>s.status==="closed").length,totalViews:r.reduce((s,a)=>s+(a.views_count||0),0),totalApplications:r.reduce((s,a)=>s+(a.applications_count||0),0)};return y?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Jobs"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your job listings and applications"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:v,disabled:m,className:"px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center gap-2 disabled:opacity-50 font-semibold",children:[m?e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):e.jsx($,{className:"w-4 h-4"}),"Export CSV"]}),e.jsx(i,{to:"/dashboard/employer/post-job",className:"px-6 py-3 bg-primary-600 text-white font-semibold rounded-lg hover:bg-primary-700 shadow-sm",children:"+ Post New Job"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Active Jobs"}),e.jsx("span",{className:"text-2xl",children:"âœ“"})]}),e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:l.active}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Currently published"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Drafts"}),e.jsx("span",{className:"text-2xl",children:"ğŸ“"})]}),e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:l.draft}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Not yet published"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Closed"}),e.jsx("span",{className:"text-2xl",children:"ğŸ”’"})]}),e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:l.closed}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No longer accepting"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total Views"}),e.jsx("span",{className:"text-2xl",children:"ğŸ‘ï¸"})]}),e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:l.totalViews}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Across all jobs"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Applications"}),e.jsx("span",{className:"text-2xl",children:"ğŸ“„"})]}),e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:l.totalApplications}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total received"})]})]}),e.jsxs("div",{className:"mb-6 flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>n("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${t==="all"?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,children:["All (",r.length,")"]}),e.jsxs("button",{onClick:()=>n("active"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${t==="active"?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,children:["Active (",l.active,")"]}),e.jsxs("button",{onClick:()=>n("draft"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${t==="draft"?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,children:["Drafts (",l.draft,")"]}),e.jsxs("button",{onClick:()=>n("closed"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${t==="closed"?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"}`,children:["Closed (",l.closed,")"]})]}),h.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center border border-gray-100",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ğŸ’¼"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:t==="all"?"No jobs yet":`No ${t} jobs`}),e.jsx("p",{className:"text-gray-600 mb-6",children:t==="all"?"Get started by posting your first job listing":`You don't have any ${t} jobs at the moment`}),t==="all"&&e.jsx(i,{to:"/dashboard/employer/post-job",className:"inline-flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium",children:"+ Post your first job"})]}):e.jsx("div",{className:"space-y-4",children:h.map(s=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(i,{to:`/jobs/${s.id}`,className:"text-xl font-bold text-gray-900 hover:text-primary-600 transition-colors",children:s.title}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${s.status==="active"?"bg-green-100 text-green-700 border border-green-200":s.status==="draft"?"bg-gray-100 text-gray-700 border border-gray-200":"bg-red-100 text-red-700 border border-red-200"}`,children:s.status})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:["ğŸ“ ",s.location||"Remote",", ",s.country]}),e.jsxs("span",{className:"flex items-center gap-1",children:["ğŸ’¼ ",s.job_type]}),e.jsxs("span",{className:"flex items-center gap-1",children:["ğŸ•’ Posted ",k(s.created_at)]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 py-4 px-4 bg-gray-50 rounded-lg mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Views"}),e.jsx("div",{className:"text-xl font-bold text-gray-900",children:s.views_count||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Applications"}),e.jsx("div",{className:"text-xl font-bold text-gray-900",children:s.applications_count||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Salary Range"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:s.salary_min&&s.salary_max?`${s.salary_currency} ${s.salary_min.toLocaleString()}-${s.salary_max.toLocaleString()}`:"Not specified"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Deadline"}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:s.application_deadline?new Date(s.application_deadline).toLocaleDateString():"Open"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(i,{to:`/dashboard/employer/applicants/${s.id}`,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 text-sm font-medium shadow-sm",children:["View Applicants ",s.applications_count>0?`(${s.applications_count})`:""]}),e.jsx(i,{to:`/dashboard/employer/edit-job/${s.id}`,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm font-medium",children:"âœï¸ Edit"}),e.jsx(i,{to:`/jobs/${s.id}`,target:"_blank",className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm font-medium",children:"ğŸ‘ï¸ Preview"}),e.jsx("button",{onClick:()=>N(),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm font-medium",children:"ğŸ“‹ Clone"}),e.jsx("button",{onClick:()=>j(s.id),className:"px-4 py-2 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 text-sm font-medium border border-red-200",children:"ğŸ—‘ï¸ Delete"})]})]})},s.id))})]})}export{J as default};
