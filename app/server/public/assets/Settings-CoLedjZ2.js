import{c as x,r as a,j as e,g as I,S as P}from"./index-BNk0NZme.js";/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],w=x("credit-card",$);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],D=x("database",E);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],U=x("package",O);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],L=x("user-check",R);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],G=x("user-x",M),J="/api",z=()=>localStorage.getItem("token"),B=()=>({Authorization:`Bearer ${z()}`,"Content-Type":"application/json"});async function l(c,d={}){return(await fetch(`${J}${c}`,{headers:B(),...d})).json()}function i({title:c,icon:d,children:s}){return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(d,{className:"w-5 h-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:c})]}),s]})}function V(){var N,f,v,k;const[c,d]=a.useState([]),[s,S]=a.useState(null),[r,o]=a.useState(""),[m,y]=a.useState(""),[p,_]=a.useState("job_posting"),[h,u]=a.useState(""),[j,b]=a.useState(""),[n,C]=a.useState(null);a.useEffect(()=>{Promise.all([l("/credits/packages/all").then(t=>t.packages||[]).catch(()=>[]),l("/orders/admin/stats").catch(()=>null),l("/admin/stats").catch(()=>null)]).then(([t,A,T])=>{d(t),S(A),C(T)})},[]);const g=t=>{b(t),setTimeout(()=>b(""),4e3)};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Platform Settings"}),j&&e.jsx("div",{className:"mb-4 bg-green-50 border border-green-200 text-green-800 rounded-lg p-3 text-sm",children:j}),e.jsx(i,{title:"System Information",icon:D,children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Platform"}),e.jsx("p",{className:"font-bold text-gray-900",children:"WantokJobs v2.0"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Environment"}),e.jsx("p",{className:"font-bold text-gray-900",children:"production"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Total Users"}),e.jsx("p",{className:"font-bold text-gray-900",children:((N=n==null?void 0:n.totalUsers)==null?void 0:N.toLocaleString())||"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Active Jobs"}),e.jsx("p",{className:"font-bold text-gray-900",children:((f=n==null?void 0:n.activeJobs)==null?void 0:f.toLocaleString())||"—"})]})]})}),s&&e.jsxs(i,{title:"Revenue & Credits",icon:w,children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-green-600",children:"Total Revenue"}),e.jsxs("p",{className:"text-xl font-bold text-green-800",children:["K",((v=s.totalRevenue)==null?void 0:v.toLocaleString())||0]})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-yellow-600",children:"Pending Revenue"}),e.jsxs("p",{className:"text-xl font-bold text-yellow-800",children:["K",((k=s.pendingRevenue)==null?void 0:k.toLocaleString())||0]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-blue-600",children:"Active Trials"}),e.jsx("p",{className:"text-xl font-bold text-blue-800",children:s.activeTrials||0})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-purple-600",children:"Premium Trials"}),e.jsx("p",{className:"text-xl font-bold text-purple-800",children:s.premiumTrials||0})]})]}),s.totalCreditsOutstanding&&e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Outstanding credits:"})," ","Job posting: ",s.totalCreditsOutstanding.job_posting," | AI matching: ",s.totalCreditsOutstanding.ai_matching," | Candidate search: ",s.totalCreditsOutstanding.candidate_search," | Alert: ",s.totalCreditsOutstanding.alert]})]}),e.jsx(i,{title:"Credit Packages",icon:U,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-500",children:"Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-500",children:"Role"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-500",children:"Type"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"Price"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"JP"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"AI"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"CS"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"Alert"}),e.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-500",children:"Active"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:c.map(t=>e.jsxs("tr",{className:t.popular?"bg-primary-50":"",children:[e.jsx("td",{className:"px-3 py-2 font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-3 py-2 text-gray-600 capitalize",children:t.target_role}),e.jsx("td",{className:"px-3 py-2 text-gray-600",children:t.package_type}),e.jsxs("td",{className:"px-3 py-2 text-right font-semibold",children:["K",t.price]}),e.jsx("td",{className:"px-3 py-2 text-right",children:t.job_posting_credits||"—"}),e.jsx("td",{className:"px-3 py-2 text-right",children:t.ai_matching_credits||"—"}),e.jsx("td",{className:"px-3 py-2 text-right",children:t.candidate_search_credits||"—"}),e.jsx("td",{className:"px-3 py-2 text-right",children:t.alert_credits||"—"}),e.jsx("td",{className:"px-3 py-2 text-center",children:t.active?"✅":"❌"})]},t.id))})]})})}),e.jsx(i,{title:"Trial Management",icon:I,children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4 text-green-600"})," Grant Premium Trial"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Give a user unlimited access (no credit consumption, no expiry)."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"User ID",value:r,onChange:t=>o(t.target.value),className:"border rounded-lg px-3 py-2 text-sm flex-1"}),e.jsx("button",{onClick:async()=>{if(!r)return;const t=await l("/credits/admin/grant-trial",{method:"POST",body:JSON.stringify({user_id:parseInt(r)})});g(t.success?`✅ Premium trial granted to user ${r}`:`❌ ${t.error}`),o("")},className:"bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-green-700",children:"Grant"})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-red-600"})," Revoke Premium Trial"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Remove unlimited access from a user."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"User ID",value:r,onChange:t=>o(t.target.value),className:"border rounded-lg px-3 py-2 text-sm flex-1"}),e.jsx("button",{onClick:async()=>{if(!r)return;const t=await l("/credits/admin/revoke-trial",{method:"POST",body:JSON.stringify({user_id:parseInt(r)})});g(t.success?`✅ Premium trial revoked for user ${r}`:`❌ ${t.error}`),o("")},className:"bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-red-700",children:"Revoke"})]})]})]})}),e.jsxs(i,{title:"Manual Credit Grant",icon:w,children:[e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Manually add credits to a user's account (e.g., as compensation or promotion)."}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"User ID"}),e.jsx("input",{type:"number",placeholder:"User ID",value:m,onChange:t=>y(t.target.value),className:"border rounded-lg px-3 py-2 text-sm w-28"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Credit Type"}),e.jsxs("select",{value:p,onChange:t=>_(t.target.value),className:"border rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"job_posting",children:"Job Posting"}),e.jsx("option",{value:"ai_matching",children:"AI Matching"}),e.jsx("option",{value:"candidate_search",children:"Candidate Search"}),e.jsx("option",{value:"alert",children:"Alert"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Amount"}),e.jsx("input",{type:"number",placeholder:"Amount",value:h,onChange:t=>u(t.target.value),className:"border rounded-lg px-3 py-2 text-sm w-24"})]}),e.jsx("button",{onClick:async()=>{if(!m||!h)return;const t=await l("/credits/admin/grant-credits",{method:"POST",body:JSON.stringify({user_id:parseInt(m),credit_type:p,amount:parseInt(h),reason:"admin_manual_grant"})});g(t.success?`✅ Added ${h} ${p} credits to user ${m} (new balance: ${t.newBalance})`:`❌ ${t.error}`),y(""),u("")},className:"bg-primary-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-primary-700",children:"Grant Credits"})]})]}),e.jsx(i,{title:"Security",icon:P,children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-700",children:"Helmet.js Security Headers"}),e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs font-semibold",children:"ENABLED"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-700",children:"Rate Limiting (200/min global, 10/min auth)"}),e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs font-semibold",children:"ENABLED"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-700",children:"Zod Input Validation (13 schemas)"}),e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs font-semibold",children:"ENABLED"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-700",children:"FTS5 Full-Text Search"}),e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs font-semibold",children:"ENABLED"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-700",children:"Brevo Email Delivery"}),e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs font-semibold",children:"CONFIGURED"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-gray-700",children:"HTTPS / TLS"}),e.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded text-xs font-semibold",children:"PENDING"})]})]})})]})}export{V as default};
