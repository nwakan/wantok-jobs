import{j as e,x as re,bc as Oe,am as J,ak as ye,aX as Fe,aM as fe,ac as z,a6 as P,aA as je,ap as le,S as me,X as Ne,a4 as se,h as ae,a7 as ve,ad as Le,t as Pe,a as Ee,$ as Be,aW as ge,U as he,p as ze,r as pe,bd as ee,aI as Me,aC as qe,be as ue}from"./vendor-ui-K43rUeTs.js";import{r as x,d as Ue,L as Je}from"./vendor-react-Dlyf-RJj.js";import{c as V,j as Ve,g as te}from"./index-CAGaxXNg.js";import{A as be}from"./ApplicationStatusBadge-DiPMe70s.js";function He({applicationId:a}){const{showToast:c}=V(),[f,j]=x.useState(!0),[l,h]=x.useState(null),[p,v]=x.useState(!1),[i,k]=x.useState({item:"",category:"general",due_date:"",notes:""});x.useEffect(()=>{C()},[a]);const C=async()=>{try{const n=await fetch(`/api/onboarding/${a}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(n.ok){const D=await n.json();h(D)}else c("Failed to load onboarding checklist","error")}catch{c("Failed to load onboarding checklist","error")}finally{j(!1)}},I=async n=>{try{(await fetch(`/api/onboarding/${a}/item/${n}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok&&(await C(),c("Checklist updated","success"))}catch{c("Failed to update checklist","error")}},o=async()=>{if(!i.item.trim()){c("Item text is required","error");return}try{(await fetch(`/api/onboarding/${a}/item`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(i)})).ok&&(await C(),k({item:"",category:"general",due_date:"",notes:""}),v(!1),c("Item added","success"))}catch{c("Failed to add item","error")}},_=async n=>{if(confirm("Remove this checklist item?"))try{(await fetch(`/api/onboarding/${a}/item/${n}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok&&(await C(),c("Item removed","success"))}catch{c("Failed to remove item","error")}};if(f)return e.jsx("div",{className:"text-center py-8",children:"Loading..."});if(!l||!l.items)return e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No checklist available"});const{items:s,progress:u}=l,y={documentation:s.filter(n=>n.category==="documentation"),IT:s.filter(n=>n.category==="IT"),orientation:s.filter(n=>n.category==="orientation"),training:s.filter(n=>n.category==="training"),general:s.filter(n=>n.category==="general"||!n.category)},R={documentation:"Documentation",IT:"IT Setup",orientation:"Orientation",training:"Training",general:"General"},b={documentation:"bg-blue-50 border-blue-200",IT:"bg-purple-50 border-purple-200",orientation:"bg-green-50 border-green-200",training:"bg-amber-50 border-amber-200",general:"bg-gray-50 border-gray-200"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Onboarding Progress"}),e.jsxs("span",{className:"text-2xl font-bold text-primary-600",children:[u.percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-2",children:e.jsx("div",{className:"bg-primary-600 h-4 rounded-full transition-all duration-500",style:{width:`${u.percentage}%`}})}),e.jsxs("p",{className:"text-sm text-gray-600",children:[u.completed," of ",u.total," items completed"]})]}),Object.entries(y).map(([n,D])=>D.length===0?null:e.jsxs("div",{className:`rounded-lg border p-4 ${b[n]}`,children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3 text-lg",children:R[n]}),e.jsx("div",{className:"space-y-2",children:D.map(N=>e.jsxs("div",{className:"bg-white rounded-lg p-3 flex items-start gap-3 hover:shadow-sm transition-shadow",children:[e.jsx("button",{onClick:()=>I(N.id),className:"flex-shrink-0 mt-0.5",children:N.is_completed?e.jsx(re,{className:"w-6 h-6 text-green-600"}):e.jsx(Oe,{className:"w-6 h-6 text-gray-400 hover:text-primary-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`font-medium ${N.is_completed?"text-gray-500 line-through":"text-gray-900"}`,children:N.item}),N.notes&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:N.notes}),N.due_date&&e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-sm text-gray-500",children:[e.jsx(J,{className:"w-4 h-4"}),"Due: ",new Date(N.due_date).toLocaleDateString(),new Date(N.due_date)<new Date&&!N.is_completed&&e.jsx(ye,{className:"w-4 h-4 text-red-500 ml-2"})]}),N.completed_at&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Completed on ",new Date(N.completed_at).toLocaleDateString()]})]}),e.jsx("button",{onClick:()=>_(N.id),className:"flex-shrink-0 text-gray-400 hover:text-red-600",children:e.jsx(Fe,{className:"w-4 h-4"})})]},N.id))})]},n)),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:p?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Item"}),e.jsx("input",{type:"text",value:i.item,onChange:n=>k({...i,item:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"e.g., Complete background check"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:i.category,onChange:n=>k({...i,category:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"documentation",children:"Documentation"}),e.jsx("option",{value:"IT",children:"IT Setup"}),e.jsx("option",{value:"orientation",children:"Orientation"}),e.jsx("option",{value:"training",children:"Training"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),e.jsx("input",{type:"date",value:i.due_date,onChange:n=>k({...i,due_date:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (optional)"}),e.jsx("textarea",{value:i.notes,onChange:n=>k({...i,notes:n.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",rows:"2",placeholder:"Additional details..."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:o,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium",children:"Add Item"}),e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"})]})]}):e.jsxs("button",{onClick:()=>v(!0),className:"w-full flex items-center justify-center gap-2 py-3 text-primary-600 hover:text-primary-700 font-medium",children:[e.jsx(fe,{className:"w-5 h-5"}),"Add Custom Item"]})})]})}function Ge({applicationId:a,references:c,onRefresh:f}){const{showToast:j}=V(),[l,h]=x.useState(!1),[p,v]=x.useState({referee_name:"",referee_email:"",referee_phone:"",referee_company:"",referee_relationship:"colleague"}),[i,k]=x.useState(null),C=async()=>{if(!p.referee_name||!p.referee_email){j("Name and email are required","error");return}try{const s=await fetch("/api/references",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({application_id:a,...p})});if(s.ok)j("Reference request sent successfully","success"),v({referee_name:"",referee_email:"",referee_phone:"",referee_company:"",referee_relationship:"colleague"}),h(!1),f();else{const u=await s.json();j(u.error||"Failed to send reference request","error")}}catch{j("Failed to send reference request","error")}},I=async s=>{try{(await fetch(`/api/references/${s}/remind`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok?j("Reminder sent","success"):j("Failed to send reminder","error")}catch{j("Failed to send reminder","error")}},o=s=>{const u={pending:{icon:le,color:"bg-gray-100 text-gray-700",label:"Pending"},sent:{icon:z,color:"bg-blue-100 text-blue-700",label:"Sent"},completed:{icon:re,color:"bg-green-100 text-green-700",label:"Completed"},declined:{icon:je,color:"bg-red-100 text-red-700",label:"Declined"}},y=u[s]||u.pending,R=y.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${y.color}`,children:[e.jsx(R,{className:"w-4 h-4"}),y.label]})},_=s=>{const u={"strongly-recommend":{color:"bg-green-100 text-green-700",label:"Strongly Recommend"},recommend:{color:"bg-blue-100 text-blue-700",label:"Recommend"},neutral:{color:"bg-gray-100 text-gray-700",label:"Neutral"},"not-recommend":{color:"bg-red-100 text-red-700",label:"Not Recommend"}},y=u[s]||u.neutral;return e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${y.color}`,children:y.label})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:l?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 text-lg",children:"Request Reference Check"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Referee Name *"}),e.jsx("input",{type:"text",value:p.referee_name,onChange:s=>v({...p,referee_name:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"John Smith"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:p.referee_email,onChange:s=>v({...p,referee_email:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"john@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone (optional)"}),e.jsx("input",{type:"tel",value:p.referee_phone,onChange:s=>v({...p,referee_phone:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"+675 1234 5678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company (optional)"}),e.jsx("input",{type:"text",value:p.referee_company,onChange:s=>v({...p,referee_company:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Company name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Relationship"}),e.jsxs("select",{value:p.referee_relationship,onChange:s=>v({...p,referee_relationship:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"manager",children:"Manager"}),e.jsx("option",{value:"colleague",children:"Colleague"}),e.jsx("option",{value:"report",children:"Direct Report"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-700",children:[e.jsx(ye,{className:"w-4 h-4 inline mr-2"}),"An email will be sent to the referee with a secure link to provide their reference."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:C,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium",children:"Send Request"}),e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"})]})]}):e.jsxs("button",{onClick:()=>h(!0),className:"w-full flex items-center justify-center gap-2 py-3 text-primary-600 hover:text-primary-700 font-medium",children:[e.jsx(fe,{className:"w-5 h-5"}),"Request New Reference"]})}),c.length===0?e.jsxs("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-8 text-center",children:[e.jsx(z,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No reference checks requested yet"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Request references from candidates' former employers or colleagues"})]}):e.jsx("div",{className:"space-y-4",children:c.map(s=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-sm transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 text-lg",children:s.referee_name}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.referee_email}),s.referee_company&&e.jsx("p",{className:"text-gray-500 text-sm",children:s.referee_company}),e.jsx("p",{className:"text-gray-500 text-sm capitalize",children:s.referee_relationship})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[o(s.status),s.recommendation&&_(s.recommendation)]})]}),s.overall_rating&&e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overall Rating:"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(u=>e.jsx(P,{className:`w-4 h-4 ${u<=s.overall_rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},u))})]}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-500 mb-3",children:[s.sent_at&&e.jsxs("span",{children:["Sent: ",new Date(s.sent_at).toLocaleDateString()]}),s.completed_at&&e.jsxs("span",{children:["Completed: ",new Date(s.completed_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[s.status==="completed"&&e.jsx("button",{onClick:()=>k(s),className:"px-4 py-2 bg-primary-100 text-primary-700 rounded-lg hover:bg-primary-200 font-medium text-sm",children:"View Responses"}),s.status==="sent"&&e.jsx("button",{onClick:()=>I(s.id),className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 font-medium text-sm",children:"Send Reminder"})]})]},s.id))}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>k(null),children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Reference from ",i.referee_name]}),e.jsx("button",{onClick:()=>k(null),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"Ã—"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Referee Information"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",i.referee_name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",i.referee_email]}),i.referee_company&&e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Company:"})," ",i.referee_company]}),e.jsxs("p",{className:"capitalize",children:[e.jsx("span",{className:"font-medium",children:"Relationship:"})," ",i.referee_relationship]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.overall_rating&&e.jsxs("div",{className:"bg-amber-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Overall Rating"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(s=>e.jsx(P,{className:`w-6 h-6 ${s<=i.overall_rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},s))})]}),i.recommendation&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Recommendation"}),_(i.recommendation)]})]}),i.responses&&i.responses.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-4",children:"Reference Responses"}),e.jsx("div",{className:"space-y-4",children:i.responses.map((s,u)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h5",{className:"font-semibold text-gray-900 mb-2",children:i.questions[u]}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:s})]},u))})]}),e.jsxs("div",{className:"text-sm text-gray-500 text-center pt-4 border-t",children:["Reference completed on ",new Date(i.completed_at).toLocaleString()]})]})]})})]})}function We({applicants:a,job:c,onStatusChange:f,onRating:j,searchTerm:l,setSearchTerm:h}){const{showToast:p}=V(),[v,i]=x.useState(null),[k,C]=x.useState(null),[I,o]=x.useState({}),[_,s]=x.useState(null),u=[{key:"pending",label:"Pending",color:"bg-gray-100",textColor:"text-gray-700",icon:z},{key:"reviewed",label:"Reviewed",color:"bg-blue-100",textColor:"text-blue-700",icon:me},{key:"shortlisted",label:"Shortlisted",color:"bg-yellow-100",textColor:"text-yellow-700",icon:P},{key:"interviewed",label:"Interviewed",color:"bg-purple-100",textColor:"text-purple-700",icon:J},{key:"offered",label:"Offered",color:"bg-green-100",textColor:"text-green-700",icon:se},{key:"hired",label:"Hired",color:"bg-emerald-100",textColor:"text-emerald-700",icon:re},{key:"rejected",label:"Rejected",color:"bg-red-100",textColor:"text-red-700",icon:je}],y=d=>{if(!l)return d;const w=l.toLowerCase();return d.filter($=>{var F,O,E;return((F=$.applicant_name)==null?void 0:F.toLowerCase().includes(w))||((O=$.applicant_email)==null?void 0:O.toLowerCase().includes(w))||((E=$.headline)==null?void 0:E.toLowerCase().includes(w))})},R=(d,w)=>{i(w),d.dataTransfer.effectAllowed="move",d.target.style.opacity="0.5"},b=d=>{d.target.style.opacity="1",i(null),C(null)},n=(d,w)=>{d.preventDefault(),d.dataTransfer.dropEffect="move",C(w)},D=()=>{C(null)},N=async(d,w)=>{if(d.preventDefault(),C(null),!v||v.status===w){i(null);return}try{await f(v.id,w),p(`Moved ${v.applicant_name} to ${w}`,"success")}catch($){p("Failed to update status: "+$.message,"error")}i(null)},H=d=>{o(w=>({...w,[d]:!w[d]}))},Q=d=>d>=80?"bg-green-100 text-green-700":d>=60?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700";return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search applicants across all columns...",value:l,onChange:d=>h(d.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),l&&e.jsx("button",{onClick:()=>h(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(Ne,{className:"w-5 h-5"})})]})}),e.jsx("div",{className:"overflow-x-auto pb-6",children:e.jsx("div",{className:"flex gap-4 min-w-max",children:u.map(d=>{const w=a.filter(g=>g.status===d.key),$=y(w),F=d.icon,O=I[d.key],E=k===d.key;return e.jsxs("div",{className:`flex-shrink-0 ${O?"w-16":"w-80"} transition-all duration-200`,children:[e.jsx("div",{className:`${d.color} rounded-t-lg px-4 py-3 flex items-center justify-between cursor-pointer border-2 ${E?"border-primary-500 border-dashed":"border-transparent"}`,onClick:()=>H(d.key),children:O?e.jsxs("div",{className:"flex flex-col items-center gap-2 w-full",children:[e.jsx(F,{className:`w-5 h-5 ${d.textColor}`}),e.jsx("span",{className:`text-xs font-bold ${d.textColor} transform -rotate-90 whitespace-nowrap origin-center`,children:$.length})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(F,{className:`w-5 h-5 ${d.textColor}`}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold ${d.textColor}`,children:d.label}),e.jsxs("p",{className:"text-sm text-gray-600",children:[$.length," applicant",$.length!==1?"s":""]})]})]}),e.jsx("button",{className:"text-gray-600 hover:text-gray-800",children:O?e.jsx(ae,{className:"w-4 h-4"}):e.jsx(ve,{className:"w-4 h-4"})})]})}),!O&&e.jsx("div",{className:`bg-gray-50 rounded-b-lg p-3 space-y-3 min-h-[600px] max-h-[70vh] overflow-y-auto border-2 ${E?"border-primary-500 border-dashed bg-primary-50":"border-transparent"}`,onDragOver:g=>n(g,d.key),onDragLeave:D,onDrop:g=>N(g,d.key),children:$.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:l?"No matches":"No applicants"}):$.map(g=>{var G,M;return e.jsxs("div",{draggable:!0,onDragStart:T=>R(T,g),onDragEnd:b,onClick:()=>s(g),className:"bg-white rounded-lg p-4 shadow-sm hover:shadow-md transition-all cursor-move border border-gray-200 hover:border-primary-400",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold flex-shrink-0",children:((M=(G=g.applicant_name)==null?void 0:G.charAt(0))==null?void 0:M.toUpperCase())||"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-900 truncate",children:g.applicant_name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:g.headline||g.applicant_email})]})]}),e.jsx("div",{className:"flex items-center gap-1 mb-2",children:[1,2,3,4,5].map(T=>e.jsx("button",{onClick:L=>{L.stopPropagation(),j(g.id,T)},className:"focus:outline-none",children:e.jsx(P,{className:`w-3 h-3 ${T<=(g.rating||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},T))}),e.jsx("div",{className:"mb-2",children:e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${Q(g.match_score||70)}`,children:[g.match_score||70,"% Match"]})}),g.tags&&g.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[g.tags.slice(0,2).map((T,L)=>e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs",children:typeof T=="string"?T:T.tag},L)),g.tags.length>2&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",g.tags.length-2]})]}),g.skills&&g.skills.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[g.skills.slice(0,2).map((T,L)=>e.jsx("span",{className:"px-2 py-0.5 bg-purple-50 text-purple-700 rounded text-xs",children:T},L)),g.skills.length>2&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",g.skills.length-2]})]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-2",children:[e.jsx(le,{className:"w-3 h-3 mr-1"}),new Date(g.applied_at).toLocaleDateString()]})]},g.id)})})]},d.key)})})}),_&&e.jsx(Xe,{applicant:_,onClose:()=>s(null),onStatusChange:f,onRating:j})]})}function Xe({applicant:a,onClose:c,onStatusChange:f,onRating:j}){var y,R;const{showToast:l}=V(),[h,p]=x.useState("profile"),[v,i]=x.useState(a.employer_notes||""),[k,C]=x.useState(null),[I,o]=x.useState([]);x.useEffect(()=>{a.status==="hired"&&_(),s()},[a.id]);const _=async()=>{try{const b=await fetch(`/api/onboarding/${a.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(b.ok){const n=await b.json();C(n)}}catch(b){console.error("Failed to load onboarding:",b)}},s=async()=>{try{const b=await fetch(`/api/references/application/${a.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(b.ok){const n=await b.json();o(n)}}catch(b){console.error("Failed to load references:",b)}},u=async()=>{try{await fetch("/api/applications/notes",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({applicationId:a.id,notes:v})}),l("Notes saved","success")}catch{l("Failed to save notes","error")}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:c,children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:"bg-gray-50 border-b px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold text-2xl",children:((R=(y=a.applicant_name)==null?void 0:y.charAt(0))==null?void 0:R.toUpperCase())||"?"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:a.applicant_name}),e.jsx("p",{className:"text-gray-600",children:a.headline||a.applicant_email})]})]}),e.jsx("button",{onClick:c,className:"text-gray-500 hover:text-gray-700 text-2xl",children:e.jsx(Ne,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"border-b px-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>p("profile"),className:`px-4 py-3 font-medium border-b-2 transition-colors ${h==="profile"?"border-primary-600 text-primary-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Profile"}),e.jsx("button",{onClick:()=>p("cover"),className:`px-4 py-3 font-medium border-b-2 transition-colors ${h==="cover"?"border-primary-600 text-primary-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Cover Letter"}),e.jsx("button",{onClick:()=>p("screening"),className:`px-4 py-3 font-medium border-b-2 transition-colors ${h==="screening"?"border-primary-600 text-primary-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Screening"}),e.jsxs("button",{onClick:()=>p("references"),className:`px-4 py-3 font-medium border-b-2 transition-colors ${h==="references"?"border-primary-600 text-primary-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:["References ",I.length>0&&`(${I.length})`]}),a.status==="hired"&&e.jsx("button",{onClick:()=>p("onboarding"),className:`px-4 py-3 font-medium border-b-2 transition-colors ${h==="onboarding"?"border-primary-600 text-primary-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Onboarding"}),e.jsx("button",{onClick:()=>p("notes"),className:`px-4 py-3 font-medium border-b-2 transition-colors ${h==="notes"?"border-primary-600 text-primary-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Notes"})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[h==="profile"&&e.jsx(Ke,{applicant:a}),h==="cover"&&e.jsx(Qe,{applicant:a}),h==="screening"&&e.jsx(Ye,{applicant:a}),h==="references"&&e.jsx(Ze,{applicant:a,references:I,onRefresh:s}),h==="onboarding"&&e.jsx(et,{applicant:a,onboardingData:k,onRefresh:_}),h==="notes"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Employer Notes"}),e.jsx("textarea",{value:v,onChange:b=>i(b.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 min-h-[200px]",placeholder:"Add your notes about this candidate..."}),e.jsx("button",{onClick:u,className:"mt-3 px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium",children:"Save Notes"})]})]}),e.jsxs("div",{className:"border-t px-6 py-4 bg-gray-50 flex gap-3 flex-wrap items-center justify-between",children:[e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsxs("select",{value:a.status,onChange:b=>f(a.id,b.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg font-medium",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"reviewed",children:"Reviewed"}),e.jsx("option",{value:"shortlisted",children:"Shortlisted"}),e.jsx("option",{value:"interviewed",children:"Interviewed"}),e.jsx("option",{value:"offered",children:"Offered"}),e.jsx("option",{value:"hired",children:"Hired"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsxs("a",{href:`mailto:${a.applicant_email}`,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium inline-flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"Email"]}),e.jsxs("button",{className:"px-6 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 font-medium inline-flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"Schedule Interview"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Rating:"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(b=>e.jsx("button",{onClick:()=>j(a.id,b),children:e.jsx(P,{className:`w-5 h-5 ${b<=(a.rating||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},b))})]})]})]})})}function Ke({applicant:a}){const c=a.skills&&Array.isArray(a.skills)?a.skills:[],f=a.work_history?JSON.parse(a.work_history):[],j=a.education?JSON.parse(a.education):[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:a.applicant_email})]}),a.applicant_phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:a.applicant_phone})]}),a.applicant_location&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:a.applicant_location})]})]})]}),a.bio&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"About"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:a.bio})]}),c.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((l,h)=>e.jsx("span",{className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium",children:l},h))})]}),f.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Work Experience"}),e.jsx("div",{className:"space-y-4",children:f.map((l,h)=>e.jsx("div",{className:"border-l-4 border-primary-500 pl-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ee,{className:"w-5 h-5 text-gray-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:l.title}),e.jsx("p",{className:"text-gray-600",children:l.company}),e.jsxs("p",{className:"text-sm text-gray-500",children:[l.startDate," - ",l.endDate||"Present"]}),l.description&&e.jsx("p",{className:"text-gray-700 mt-2",children:l.description})]})]})},h))})]}),j.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Education"}),e.jsx("div",{className:"space-y-4",children:j.map((l,h)=>e.jsx("div",{className:"border-l-4 border-green-500 pl-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Be,{className:"w-5 h-5 text-gray-500 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:l.degree}),e.jsx("p",{className:"text-gray-600",children:l.school}),e.jsx("p",{className:"text-sm text-gray-500",children:l.year})]})]})},h))})]}),a.cv_url&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Resume / CV"}),e.jsx("a",{href:a.cv_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 font-medium",children:"ðŸ“„ Download CV"})]})]})}function Qe({applicant:a}){return e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Cover Letter"}),a.cover_letter?e.jsx("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:a.cover_letter})}):e.jsx("p",{className:"text-gray-500 italic",children:"No cover letter provided"})]})}function Ye({applicant:a}){const c=a.screening_answers||[];return e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Screening Responses"}),c.length>0?e.jsx("div",{className:"space-y-4",children:c.map((f,j)=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:f.question}),e.jsx("p",{className:"text-gray-700",children:f.answer})]},j))}):e.jsx("p",{className:"text-gray-500 italic",children:"No screening responses"})]})}function Ze({applicant:a,references:c,onRefresh:f}){return e.jsx(Ge,{applicationId:a.id,references:c,onRefresh:f})}function et({applicant:a,onboardingData:c,onRefresh:f}){return e.jsx(He,{applicationId:a.id})}function lt(){var oe,ce;const{jobId:a}=Ue(),{showToast:c}=V(),[f,j]=x.useState(null),[l,h]=x.useState([]),[p,v]=x.useState(!0),[i,k]=x.useState("all"),[C,I]=x.useState("cards"),[o,_]=x.useState(null),[s,u]=x.useState(""),[y,R]=x.useState([]),[b,n]=x.useState(!1),[D,N]=x.useState(!1),[H,Q]=x.useState([]),[d,w]=x.useState(null),[$,F]=x.useState(!1),[O,E]=x.useState(""),[g,G]=x.useState("blue"),[M,T]=x.useState(!1),[L,we]=x.useState(null),[Y,ke]=x.useState(null),[Ce,Se]=x.useState(null);x.useEffect(()=>{U(),_e()},[a]);const U=async()=>{try{const[t,r]=await Promise.all([Ve.getById(a),te.getForJob(a)]);j(t);const S=(r==null?void 0:r.data)||(Array.isArray(r)?r:[]);h(S.map(m=>({...m,skills:m.skills?JSON.parse(m.skills):[],tags:m.tags?JSON.parse(m.tags):[],match_score:m.match_score||Math.floor(Math.random()*30)+70,rating:m.rating||0,source:m.source||"direct"})))}catch(t){console.error("Failed to load data:",t)}finally{v(!1)}},_e=async()=>{try{const t=await fetch("/api/email-templates",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(t.ok){const r=await t.json();Q(r)}}catch(t){console.error("Failed to load email templates:",t)}},W=async(t,r)=>{try{await te.updateStatus(t,r),await U(),c("Status updated successfully","success")}catch(S){c("Failed to update status: "+S.message,"error")}},ne=async t=>{try{await Promise.all(y.map(r=>te.updateStatus(r,t))),await U(),R([]),n(!1),c(`${y.length} applicants updated to ${t}`,"success")}catch(r){c("Failed to update applicants: "+r.message,"error")}},Re=async()=>{if(O.trim())try{await Promise.all(y.map(t=>fetch("/api/applications/tag",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({applicationId:t,tag:O.trim(),color:g})}))),await U(),E(""),F(!1),R([]),c(`Tag "${O}" added to ${y.length} applicants`,"success")}catch(t){c("Failed to add tags: "+t.message,"error")}},Z=async(t,r)=>{try{await fetch("/api/applications/rate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({applicationId:t,rating:r})}),await U(),c("Rating updated","success")}catch{c("Failed to update rating","error")}},[X,K]=x.useState(!1),Ae=async()=>{K(!0);try{const t=localStorage.getItem("token"),r=await fetch(`/api/export/applicants?job_id=${a}`,{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error("Export failed");const S=await r.blob(),m=window.URL.createObjectURL(S),A=document.createElement("a");A.href=m,A.download=`applicants-${(f==null?void 0:f.title)||"export"}-${new Date().toISOString().split("T")[0]}.csv`,A.click(),window.URL.revokeObjectURL(m),c("Applicants exported successfully","success")}catch{c("Failed to export applicants","error")}finally{K(!1)}},$e=async()=>{K(!0);try{const t=localStorage.getItem("token"),r=await fetch("/api/export/applicants/all",{headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw new Error("Export failed");const S=await r.blob(),m=window.URL.createObjectURL(S),A=document.createElement("a");A.href=m,A.download=`all-applicants-${new Date().toISOString().split("T")[0]}.csv`,A.click(),window.URL.revokeObjectURL(m),c("All applicants exported successfully","success")}catch{c("Failed to export applicants","error")}finally{K(!1)}},Te=()=>{y.length===q.length?R([]):R(q.map(t=>t.id))},Ie=t=>{R(r=>r.includes(t)?r.filter(S=>S!==t):[...r,t])},q=l.filter(t=>{var de,xe;const r=i==="all"||t.status===i,S=!s||((de=t.applicant_name)==null?void 0:de.toLowerCase().includes(s.toLowerCase()))||((xe=t.applicant_email)==null?void 0:xe.toLowerCase().includes(s.toLowerCase())),m=!L||t.rating===L,A=!Y||t.source===Y;return r&&S&&m&&A}),ie=[{key:"pending",label:"Pending",color:"bg-gray-100",icon:z},{key:"reviewed",label:"Reviewed",color:"bg-blue-100",icon:pe},{key:"shortlisted",label:"Shortlisted",color:"bg-yellow-100",icon:P},{key:"interviewed",label:"Interviewed",color:"bg-purple-100",icon:J},{key:"offered",label:"Offered",color:"bg-green-100",icon:se},{key:"hired",label:"Hired",color:"bg-emerald-100",icon:he}],B={totalApplicants:l.length,avgMatchScore:l.length>0?Math.round(l.reduce((t,r)=>t+r.match_score,0)/l.length):0,avgRating:l.length>0?(l.reduce((t,r)=>t+r.rating,0)/l.length).toFixed(1):"0.0",conversionRate:l.length>0?Math.round(l.filter(t=>["hired","offered"].includes(t.status)).length/l.length*100):0,avgTimeInPipeline:"5.2 days",topSource:l.reduce((t,r)=>(t[r.source]=(t[r.source]||0)+1,t),{})},De=Object.keys(B.topSource).sort((t,r)=>B.topSource[r]-B.topSource[t])[0]||"direct";return p?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):f?e.jsxs("div",{children:[e.jsx(Je,{to:"/dashboard/employer/jobs",className:"text-primary-600 hover:text-primary-700 mb-4 inline-flex items-center gap-2",children:"â† Back to jobs"}),e.jsxs("div",{className:"flex justify-between items-start mb-6 flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:f.title}),e.jsxs("p",{className:"text-gray-600",children:[l.length," applications received"]})]}),e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[e.jsxs("button",{onClick:Ae,disabled:X,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center gap-2 disabled:opacity-50",children:[X?e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):e.jsx(ge,{className:"w-4 h-4"}),"Export CSV"]}),e.jsxs("button",{onClick:$e,disabled:X,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center gap-2 disabled:opacity-50",children:[X?e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):e.jsx(ge,{className:"w-4 h-4"}),"Export All"]}),e.jsxs("div",{className:"flex gap-1 bg-gray-100 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>I("cards"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${C==="cards"?"bg-white text-primary-600 shadow-sm":"text-gray-600"}`,children:"ðŸ“‹ Cards"}),e.jsx("button",{onClick:()=>I("pipeline"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${C==="pipeline"?"bg-white text-primary-600 shadow-sm":"text-gray-600"}`,children:"ðŸ“Š Pipeline"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(he,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Total"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:B.totalApplicants})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(ze,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Avg Match"})]}),e.jsxs("div",{className:"text-2xl font-bold text-primary-600",children:[B.avgMatchScore,"%"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Avg Rating"})]}),e.jsxs("div",{className:"text-2xl font-bold text-yellow-600",children:[B.avgRating,"/5"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Conversion"})]}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[B.conversionRate,"%"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Avg Time"})]}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:B.avgTimeInPipeline})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Top Source"})]}),e.jsx("div",{className:"text-lg font-bold text-blue-600 capitalize",children:De})]})]}),y.length>0&&e.jsxs("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4 mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ee,{className:"w-5 h-5 text-primary-600"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[y.length," selected"]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>n(!b),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:["Change Status",e.jsx(ae,{className:"w-4 h-4"})]}),b&&e.jsxs("div",{className:"absolute top-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-[180px]",children:[ie.map(t=>e.jsx("button",{onClick:()=>ne(t.key),className:"w-full px-4 py-2 text-left hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg",children:t.label},t.key)),e.jsx("button",{onClick:()=>ne("rejected"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-red-600 rounded-b-lg",children:"Reject"})]})]}),e.jsxs("button",{onClick:()=>F(!0),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4"}),"Add Tag"]}),e.jsxs("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"Send Email"]}),e.jsx("button",{onClick:()=>R([]),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Clear"})]})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex gap-4 flex-wrap items-center",children:[e.jsx("div",{className:"flex-1 min-w-[250px]",children:e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:s,onChange:t=>u(t.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})}),e.jsxs("button",{onClick:()=>T(!M),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center gap-2",children:[e.jsx(qe,{className:"w-4 h-4"}),"Advanced Filters",M?e.jsx(ve,{className:"w-4 h-4"}):e.jsx(ae,{className:"w-4 h-4"})]}),e.jsxs("button",{onClick:Te,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center gap-2",children:[y.length===q.length?e.jsx(ee,{className:"w-4 h-4"}):e.jsx(ue,{className:"w-4 h-4"}),"Select All"]})]}),M&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),e.jsxs("select",{value:L||"",onChange:t=>we(t.target.value?parseInt(t.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All Ratings"}),e.jsx("option",{value:"5",children:"5 Stars"}),e.jsx("option",{value:"4",children:"4 Stars"}),e.jsx("option",{value:"3",children:"3 Stars"}),e.jsx("option",{value:"2",children:"2 Stars"}),e.jsx("option",{value:"1",children:"1 Star"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Source"}),e.jsxs("select",{value:Y||"",onChange:t=>ke(t.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All Sources"}),e.jsx("option",{value:"direct",children:"Direct"}),e.jsx("option",{value:"linkedin",children:"LinkedIn"}),e.jsx("option",{value:"facebook",children:"Facebook"}),e.jsx("option",{value:"referral",children:"Referral"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),e.jsxs("select",{value:Ce||"",onChange:t=>Se(t.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>k("all"),className:`px-4 py-2 rounded-lg text-sm font-medium ${i==="all"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:["All (",l.length,")"]}),ie.map(t=>e.jsxs("button",{onClick:()=>k(t.key),className:`px-4 py-2 rounded-lg text-sm font-medium capitalize ${i===t.key?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:[t.label," (",l.filter(r=>r.status===t.key).length,")"]},t.key)),e.jsxs("button",{onClick:()=>k("rejected"),className:`px-4 py-2 rounded-lg text-sm font-medium ${i==="rejected"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:["Rejected (",l.filter(t=>t.status==="rejected").length,")"]})]})]}),C==="cards"?e.jsx("div",{children:q.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:e.jsx("p",{className:"text-gray-600",children:"No applicants found"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map(t=>{var r,S;return e.jsxs("div",{className:`bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow cursor-pointer border ${y.includes(t.id)?"border-primary-500 ring-2 ring-primary-200":"border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",onClick:()=>_(t),children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold text-lg",children:((S=(r=t.applicant_name)==null?void 0:r.charAt(0))==null?void 0:S.toUpperCase())||"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-gray-900 truncate",children:t.applicant_name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.applicant_location||"Location not specified"})]})]}),e.jsx("button",{onClick:m=>{m.stopPropagation(),Ie(t.id)},className:"flex-shrink-0",children:y.includes(t.id)?e.jsx(ee,{className:"w-5 h-5 text-primary-600"}):e.jsx(ue,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx("div",{className:"mb-3 flex items-center gap-1",children:[1,2,3,4,5].map(m=>e.jsx("button",{onClick:A=>{A.stopPropagation(),Z(t.id,m)},className:"focus:outline-none",children:e.jsx(P,{className:`w-4 h-4 ${m<=t.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},m))}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"mb-3 flex flex-wrap gap-1",children:t.tags.map((m,A)=>e.jsx("span",{className:`px-2 py-1 bg-${m.color||"blue"}-100 text-${m.color||"blue"}-700 rounded text-xs font-medium`,children:typeof m=="string"?m:m.tag},A))}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Match Score"}),e.jsxs("span",{className:"text-sm font-bold text-primary-600",children:[t.match_score,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all",style:{width:`${t.match_score}%`}})})]}),t.skills&&t.skills.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-2",children:"Skills:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.skills.slice(0,3).map((m,A)=>e.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs",children:m},A)),t.skills.length>3&&e.jsxs("span",{className:"px-2 py-1 text-gray-500 text-xs",children:["+",t.skills.length-3]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx(be,{status:t.status})}),e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsx("button",{onClick:m=>{m.stopPropagation(),_(t)},className:"flex-1 px-3 py-2 bg-primary-600 text-white rounded hover:bg-primary-700",children:"View"}),t.status!=="shortlisted"&&t.status!=="rejected"&&e.jsx("button",{onClick:m=>{m.stopPropagation(),W(t.id,"shortlisted")},className:"flex-1 px-3 py-2 bg-green-100 text-green-700 rounded hover:bg-green-200",children:"Shortlist"})]})]},t.id)})})}):e.jsx(We,{applicants:q,job:f,onStatusChange:W,onRating:Z,searchTerm:s,setSearchTerm:u}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>_(null),children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Applicant Details"}),e.jsx("button",{onClick:()=>_(null),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"Ã—"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold text-3xl",children:((ce=(oe=o.applicant_name)==null?void 0:oe.charAt(0))==null?void 0:ce.toUpperCase())||"?"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:o.applicant_name}),e.jsx("p",{className:"text-gray-600",children:o.applicant_email}),o.phone&&e.jsx("p",{className:"text-gray-600",children:o.phone}),o.applicant_location&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["ðŸ“ ",o.applicant_location]}),e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsx(be,{status:o.status}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Source: ",o.source]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-3xl font-bold text-primary-600",children:[o.match_score,"%"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Match Score"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>e.jsx("button",{onClick:()=>Z(o.id,t),children:e.jsx(P,{className:`w-5 h-5 ${t<=o.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},t))})]})]}),o.tags&&o.tags.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.tags.map((t,r)=>e.jsx("span",{className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium",children:typeof t=="string"?t:t.tag},r))})]}),o.skills&&o.skills.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:o.skills.map((t,r)=>e.jsx("span",{className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium",children:t},r))})]}),o.cover_letter&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"Cover Letter"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:o.cover_letter})})]}),o.cv_url&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"CV / Resume"}),e.jsx("a",{href:o.cv_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 font-medium",children:"ðŸ“„ Download CV"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"Employer Notes"}),e.jsx("textarea",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg",rows:"4",placeholder:"Add notes about this candidate...",defaultValue:o.employer_notes||"",onBlur:t=>{fetch("/api/applications/notes",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({applicationId:o.id,notes:t.target.value})})}})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t flex-wrap",children:[e.jsxs("select",{value:o.status,onChange:t=>{W(o.id,t.target.value),_({...o,status:t.target.value})},className:"px-4 py-2 border border-gray-300 rounded-lg font-medium",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"reviewed",children:"Reviewed"}),e.jsx("option",{value:"shortlisted",children:"Shortlisted"}),e.jsx("option",{value:"interviewed",children:"Interviewed"}),e.jsx("option",{value:"offered",children:"Offered"}),e.jsx("option",{value:"hired",children:"Hired"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsxs("a",{href:`mailto:${o.applicant_email}`,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium inline-flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"Contact"]}),e.jsxs("button",{className:"px-6 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 font-medium inline-flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"Schedule Interview"]}),o.status!=="rejected"&&e.jsx("button",{onClick:()=>W(o.id,"rejected"),className:"px-6 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 font-medium",children:"Reject"})]}),e.jsxs("div",{className:"pt-4 border-t text-sm text-gray-500",children:["Applied on ",new Date(o.applied_at).toLocaleString()]})]})]})}),$&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>F(!1),children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",onClick:t=>t.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:["Add Tag to ",y.length," Applicants"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tag Name"}),e.jsx("input",{type:"text",value:O,onChange:t=>E(t.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"e.g. Top Candidate, Follow-up Required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),e.jsx("div",{className:"flex gap-2",children:["blue","green","yellow","red","purple","pink"].map(t=>e.jsx("button",{onClick:()=>G(t),className:`w-10 h-10 rounded-full bg-${t}-500 ${g===t?"ring-4 ring-offset-2 ring-"+t+"-300":""}`},t))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:Re,className:"flex-1 px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium",children:"Add Tag"}),e.jsx("button",{onClick:()=>F(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"})]})]})]})}),D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>N(!1),children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6",onClick:t=>t.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:["Send Email to ",y.length," Applicants"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Template"}),e.jsxs("select",{onChange:t=>{const r=H.find(S=>S.id===parseInt(t.target.value));w(r)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Choose a template..."}),H.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),e.jsx("input",{type:"text",defaultValue:d.subject,className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Body"}),e.jsx("textarea",{defaultValue:d.body_text,rows:"10",className:"w-full px-4 py-2 border border-gray-300 rounded-lg font-mono text-sm"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-700",children:["ðŸ’¡ Variables like ","{{applicant_name}}"," will be replaced automatically for each applicant"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"flex-1 px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium",onClick:()=>{c("Emails queued for sending","success"),N(!1),R([])},children:"Send Emails"}),e.jsx("button",{onClick:()=>N(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"})]})]})]})})]}):e.jsx("div",{children:"Job not found"})}export{lt as default};
