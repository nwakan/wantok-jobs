import{j as e}from"./vendor-ui-K43rUeTs.js";import{r}from"./vendor-react-Dlyf-RJj.js";import{c as v,x as d}from"./index-CAGaxXNg.js";function C(){const[b,m]=r.useState([]),[g,h]=r.useState(!0),[n,c]=r.useState(!1),[i,u]=r.useState(null),{showToast:l}=v(),[s,a]=r.useState({name:"",price:"",duration:30,job_limit:5,features:"",active:!0});r.useEffect(()=>{o()},[]);const o=async()=>{try{const t=await d.getAll();m(t||[])}catch(t){console.error("Failed to load plans:",t),m([{id:1,name:"Basic",price:49.99,duration:30,job_limit:5,features:"Post up to 5 jobs, Basic support",active:!0},{id:2,name:"Premium",price:199.99,duration:30,job_limit:20,features:"Post up to 20 jobs, Priority support, Featured listings",active:!0}])}finally{h(!1)}},p=async t=>{t.preventDefault();try{i?(await d.update(i.id,s),l("Plan updated successfully","success")):(await d.create(s),l("Plan created successfully","success")),o(),x()}catch{l("Failed to save plan","error")}},y=t=>{u(t),a({name:t.name,price:t.price,duration:t.duration,job_limit:t.job_limit,features:t.features,active:t.active}),c(!0)},j=async t=>{if(confirm("Are you sure you want to delete this plan?"))try{await d.delete(t),l("Plan deleted successfully","success"),o()}catch{l("Failed to delete plan","error")}},x=()=>{a({name:"",price:"",duration:30,job_limit:5,features:"",active:!0}),u(null),c(!1)};return g?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Plan Management"}),e.jsx("button",{onClick:()=>c(!n),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:n?"Cancel":"Add New Plan"})]}),n&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:i?"Edit Plan":"Add New Plan"}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plan Name"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>a({...s,name:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price ($)"}),e.jsx("input",{type:"number",step:"0.01",value:s.price,onChange:t=>a({...s,price:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (days)"}),e.jsx("input",{type:"number",value:s.duration,onChange:t=>a({...s,duration:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Job Limit"}),e.jsx("input",{type:"number",value:s.job_limit,onChange:t=>a({...s,job_limit:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Features"}),e.jsx("textarea",{value:s.features,onChange:t=>a({...s,features:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",rows:"3",placeholder:"Comma-separated features",required:!0})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.active,onChange:t=>a({...s,active:t.target.checked}),className:"mr-2"}),e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Active"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[i?"Update":"Create"," Plan"]}),e.jsx("button",{type:"button",onClick:x,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(t=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:t.name}),e.jsxs("p",{className:"text-3xl font-bold text-primary-600 mt-2",children:["$",t.price]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["per ",t.duration," days"]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${t.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.active?"Active":"Inactive"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("strong",{children:"Job Limit:"})," ",t.job_limit]}),e.jsx("p",{className:"text-sm text-gray-700",children:t.features})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>y(t),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Edit"}),e.jsx("button",{onClick:()=>j(t.id),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]},t.id))})]})}export{C as default};
