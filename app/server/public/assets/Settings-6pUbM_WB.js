import{j as e,bn as I,bo as S,bp as P,a9 as A,a5 as E,bq as D,w as O}from"./vendor-ui-K43rUeTs.js";import{r as a}from"./vendor-react-Dlyf-RJj.js";const U="/api",R=()=>localStorage.getItem("token"),$=()=>({Authorization:`Bearer ${R()}`,"Content-Type":"application/json"});async function l(d,c={}){return(await fetch(`${U}${d}`,{headers:$(),...c})).json()}function i({title:d,icon:c,children:s}){return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(c,{className:"w-5 h-5 text-primary-600"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:d})]}),s]})}function J(){var b,N,f,v;const[d,c]=a.useState([]),[s,w]=a.useState(null),[r,x]=a.useState(""),[o,p]=a.useState(""),[g,C]=a.useState("job_posting"),[m,u]=a.useState(""),[j,y]=a.useState(""),[n,T]=a.useState(null);a.useEffect(()=>{Promise.all([l("/credits/packages/all").then(t=>t.packages||[]).catch(()=>[]),l("/orders/admin/stats").catch(()=>null),l("/admin/stats").catch(()=>null)]).then(([t,k,_])=>{c(t),w(k),T(_)})},[]);const h=t=>{y(t),setTimeout(()=>y(""),4e3)};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Platform Settings"}),j&&e.jsx("div",{className:"mb-4 bg-green-50 border border-green-200 text-green-800 rounded-lg p-3 text-sm",children:j}),e.jsx(i,{title:"System Information",icon:I,children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Platform"}),e.jsx("p",{className:"font-bold text-gray-900",children:"WantokJobs v2.0"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Environment"}),e.jsx("p",{className:"font-bold text-gray-900",children:"production"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Total Users"}),e.jsx("p",{className:"font-bold text-gray-900",children:((b=n==null?void 0:n.totalUsers)==null?void 0:b.toLocaleString())||"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Active Jobs"}),e.jsx("p",{className:"font-bold text-gray-900",children:((N=n==null?void 0:n.activeJobs)==null?void 0:N.toLocaleString())||"—"})]})]})}),s&&e.jsxs(i,{title:"Revenue & Credits",icon:S,children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-4",children:[e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-green-600",children:"Total Revenue"}),e.jsxs("p",{className:"text-xl font-bold text-green-800",children:["K",((f=s.totalRevenue)==null?void 0:f.toLocaleString())||0]})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-yellow-600",children:"Pending Revenue"}),e.jsxs("p",{className:"text-xl font-bold text-yellow-800",children:["K",((v=s.pendingRevenue)==null?void 0:v.toLocaleString())||0]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-blue-600",children:"Active Trials"}),e.jsx("p",{className:"text-xl font-bold text-blue-800",children:s.activeTrials||0})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-purple-600",children:"Premium Trials"}),e.jsx("p",{className:"text-xl font-bold text-purple-800",children:s.premiumTrials||0})]})]}),s.totalCreditsOutstanding&&e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Outstanding credits:"})," ","Job posting: ",s.totalCreditsOutstanding.job_posting," | AI matching: ",s.totalCreditsOutstanding.ai_matching," | Candidate search: ",s.totalCreditsOutstanding.candidate_search," | Alert: ",s.totalCreditsOutstanding.alert]})]}),e.jsx(i,{title:"Credit Packages",icon:P,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-500",children:"Name"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-500",children:"Role"}),e.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-500",children:"Type"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"Price"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"JP"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"AI"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"CS"}),e.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-500",children:"Alert"}),e.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-500",children:"Active"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:d.map(t=>e.jsxs("tr",{className:t.popular?"bg-primary-50":"",children:[e.jsx("td",{className:"px-3 py-2 font-medium text-gray-900",children:t.name}),e.jsx("td",{className:"px-3 py-2 text-gray-600 capitalize",children:t.target_role}),e.jsx("td",{className:"px-3 py-2 text-gray-600",children:t.package_type}),e.jsxs("td",{className:"px-3 py-2 text-right font-semibold",children:["K",t.price]}),e.jsx("td",{className:"px-3 py-2 text-right",children:t.job_posting_credits||"—"}),e.jsx("td",{className:"px-3 py-2 text-right",children:t.ai_matching_credits||"—"}),e.jsx("td",{className:"px-3 py-2 text-right",children:t.candidate_search_credits||"—"}),e.jsx("td",{className:"px-3 py-2 text-right",children:t.alert_credits||"—"}),e.jsx("td",{className:"px-3 py-2 text-center",children:t.active?"✅":"❌"})]},t.id))})]})})}),e.jsx(i,{title:"Trial Management",icon:A,children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-green-600"})," Grant Premium Trial"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Give a user unlimited access (no credit consumption, no expiry)."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"User ID",value:r,onChange:t=>x(t.target.value),className:"border rounded-lg px-3 py-2 text-sm flex-1"}),e.jsx("button",{onClick:async()=>{if(!r)return;const t=await l("/credits/admin/grant-trial",{method:"POST",body:JSON.stringify({user_id:parseInt(r)})});h(t.success?`✅ Premium trial granted to user ${r}`:`❌ ${t.error}`),x("")},className:"bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-green-700",children:"Grant"})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4 text-red-600"})," Revoke Premium Trial"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Remove unlimited access from a user."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"User ID",value:r,onChange:t=>x(t.target.value),className:"border rounded-lg px-3 py-2 text-sm flex-1"}),e.jsx("button",{onClick:async()=>{if(!r)return;const t=await l("/credits/admin/revoke-trial",{method:"POST",body:JSON.stringify({user_id:parseInt(r)})});h(t.success?`✅ Premium trial revoked for user ${r}`:`❌ ${t.error}`),x("")},className:"bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-red-700",children:"Revoke"})]})]})]})}),e.jsxs(i,{title:"Manual Credit Grant",icon:S,children:[e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Manually add credits to a user's account (e.g., as compensation or promotion)."}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"User ID"}),e.jsx("input",{type:"number",placeholder:"User ID",value:o,onChange:t=>p(t.target.value),className:"border rounded-lg px-3 py-2 text-sm w-28"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Credit Type"}),e.jsxs("select",{value:g,onChange:t=>C(t.target.value),className:"border rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"job_posting",children:"Job Posting"}),e.jsx("option",{value:"ai_matching",children:"AI Matching"}),e.jsx("option",{value:"candidate_search",children:"Candidate Search"}),e.jsx("option",{value:"alert",children:"Alert"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Amount"}),e.jsx("input",{type:"number",placeholder:"Amount",value:m,onChange:t=>u(t.target.value),className:"border rounded-lg px-3 py-2 text-sm w-24"})]}),e.jsx("button",{onClick:async()=>{if(!o||!m)return;const t=await l("/credits/admin/grant-credits",{method:"POST",body:JSON.stringify({user_id:parseInt(o),credit_type:g,amount:parseInt(m),reason:"admin_manual_grant"})});h(t.success?`✅ Added ${m} ${g} credits to user ${o} (new balance: ${t.newBalance})`:`❌ ${t.error}`),p(""),u("")},className:"bg-primary-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-primary-700",children:"Grant Credits"})]})]}),e.jsx(i,{title:"Security",icon:O,children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-700",children:"Helmet.js Security Headers"}),e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs font-semibold",children:"ENABLED"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-700",children:"Rate Limiting (200/min global, 10/min auth)"}),e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs font-semibold",children:"ENABLED"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-700",children:"Zod Input Validation (13 schemas)"}),e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs font-semibold",children:"ENABLED"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-700",children:"FTS5 Full-Text Search"}),e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs font-semibold",children:"ENABLED"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b",children:[e.jsx("span",{className:"text-gray-700",children:"Brevo Email Delivery"}),e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs font-semibold",children:"CONFIGURED"})]}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-gray-700",children:"HTTPS / TLS"}),e.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded text-xs font-semibold",children:"PENDING"})]})]})})]})}export{J as default};
