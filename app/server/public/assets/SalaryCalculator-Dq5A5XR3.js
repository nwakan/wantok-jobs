import{j as e}from"./vendor-ui-K43rUeTs.js";import{r as i,L as C}from"./vendor-react-Dlyf-RJj.js";import{P as G}from"./index-CAGaxXNg.js";const _=["Mining","Construction","Banking","IT","Health","Education","Agriculture","Oil & Gas","Retail","Government","NGO","Telecommunications","Tourism","Transport","Legal"],K=["Entry","Mid","Senior","Executive"],T=["Port Moresby","Lae","Mt Hagen","Goroka","Other"];function P(r){if(r<=12500)return 0;let x=0,n=r;const m=[{limit:12500,rate:0},{limit:2e4,rate:.22},{limit:33e3,rate:.3},{limit:7e4,rate:.35},{limit:25e4,rate:.4},{limit:1/0,rate:.42}];let l=0;for(const o of m){const d=Math.min(n,o.limit-l);if(d<=0)break;x+=d*o.rate,n-=d,l=o.limit}return Math.round(x)}function t(r){return r?"K"+Number(r).toLocaleString("en-US",{maximumFractionDigits:0}):"K0"}function O(){var v,p,j,f,N,k,w;const[r,x]=i.useState(""),[n,m]=i.useState(""),[l,o]=i.useState(""),[d,S]=i.useState(""),[a,E]=i.useState(null),[A,u]=i.useState(!1),y=i.useCallback(async()=>{u(!0);try{const s=new URLSearchParams;r&&s.set("industry",r),n&&s.set("experience",n),l&&l!=="Other"&&s.set("location",l);const L=await(await fetch(`/api/salary-estimates?${s}`)).json();E(L)}catch(s){console.error(s)}finally{u(!1)}},[r,n,l]);i.useEffect(()=>{y()},[y]);const g=((v=a==null?void 0:a.stats)==null?void 0:v.avg_salary)||0,c=d?Number(d):g,h=P(c),b=c-h;return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx(G,{title:"Salary Calculator - WantokJobs",description:"Estimate salaries in Papua New Guinea by industry, experience and location. Calculate your take-home pay with PNG tax brackets."}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"ðŸ§® PNG Salary Calculator"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Estimate salaries and calculate take-home pay for jobs in Papua New Guinea"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Industry"}),e.jsxs("select",{value:r,onChange:s=>x(s.target.value),className:"w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white shadow-sm focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"All Industries"}),_.map(s=>e.jsx("option",{value:s,children:s},s)),(j=(p=a==null?void 0:a.filters)==null?void 0:p.industries)==null?void 0:j.filter(s=>!_.includes(s)).map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Experience Level"}),e.jsxs("select",{value:n,onChange:s=>m(s.target.value),className:"w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white shadow-sm focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"All Levels"}),K.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Location"}),e.jsxs("select",{value:l,onChange:s=>o(s.target.value),className:"w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white shadow-sm focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"All Locations"}),T.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),A?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Estimated Salary Range"}),((f=a==null?void 0:a.stats)==null?void 0:f.job_count)>0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Average Salary"}),e.jsxs("p",{className:"text-3xl font-bold text-primary-600",children:[t(a.stats.avg_salary),e.jsx("span",{className:"text-base font-normal text-gray-500",children:"/year"})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Based on ",a.stats.job_count," jobs"]})})]}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-full h-3 relative",children:e.jsx("div",{className:"bg-primary-500 h-3 rounded-full",style:{width:a.stats.highest>0?`${Math.min(100,(a.stats.avg_salary-a.stats.lowest)/(a.stats.highest-a.stats.lowest)*100)}%`:"50%"}})}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:["Low: ",t(a.stats.lowest)]}),e.jsxs("span",{children:["Range: ",t(a.stats.avg_min)," â€“ ",t(a.stats.avg_max)]}),e.jsxs("span",{children:["High: ",t(a.stats.highest)]})]})]}):e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No salary data available for these filters. Try broadening your search."})]}),r&&((N=a==null?void 0:a.industryAvg)==null?void 0:N.avg_salary)>0&&((k=a==null?void 0:a.stats)==null?void 0:k.avg_salary)>0&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-200 mb-2",children:"ðŸ“Š Your Estimate vs Industry Average"}),e.jsxs("p",{className:"text-blue-800 dark:text-blue-300",children:["Your filtered estimate: ",e.jsx("strong",{children:t(a.stats.avg_salary)})," | Overall ",r," average: ",e.jsx("strong",{children:t(a.industryAvg.avg_salary)}),a.stats.avg_salary>a.industryAvg.avg_salary?` â€” ${Math.round((a.stats.avg_salary-a.industryAvg.avg_salary)/a.industryAvg.avg_salary*100)}% above average âœ…`:a.stats.avg_salary<a.industryAvg.avg_salary?` â€” ${Math.round((a.industryAvg.avg_salary-a.stats.avg_salary)/a.industryAvg.avg_salary*100)}% below average`:" â€” Right at average"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"ðŸ’° PNG Tax Calculator (Annual)"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Gross Annual Salary (PGK)"}),e.jsx("input",{type:"number",value:d,onChange:s=>S(s.target.value),placeholder:g?`Using estimate: ${g}`:"Enter salary",className:"w-full sm:w-64 rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:ring-primary-500 focus:border-primary-500"})]}),c>0&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Gross"}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t(c)})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:"Tax"}),e.jsxs("p",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:["-",t(h)]}),e.jsxs("p",{className:"text-xs text-red-500",children:[c>0?Math.round(h/c*100):0,"% effective rate"]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Take Home"}),e.jsx("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:t(b)}),e.jsxs("p",{className:"text-xs text-green-500",children:[t(Math.round(b/26)),"/fortnight"]})]})]}),e.jsx("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400",children:e.jsx("p",{children:"PNG Tax Brackets: 0% up to K12,500 Â· 22% K12,501â€“K20,000 Â· 30% K20,001â€“K33,000 Â· 35% K33,001â€“K70,000 Â· 40% K70,001â€“K250,000 Â· 42% over K250,000"})})]}),((w=a==null?void 0:a.jobs)==null?void 0:w.length)>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["ðŸ“‹ Related Jobs (",a.jobs.length,")"]}),e.jsx("div",{className:"space-y-3",children:a.jobs.map(s=>e.jsx(C,{to:`/jobs/${s.id}`,className:"block p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s.company_name," Â· ",s.location]})]}),e.jsx("span",{className:"text-sm font-semibold text-primary-600 whitespace-nowrap",children:s.salary_min&&s.salary_max?`${t(s.salary_min)} â€“ ${t(s.salary_max)}`:"Salary TBD"})]})},s.id))})]})]})]})}export{O as default};
