import{j as e}from"./vendor-ui-K43rUeTs.js";import{r as n}from"./vendor-react-Dlyf-RJj.js";import{c as w,B as c}from"./index-CAGaxXNg.js";function k(){const[m,h]=n.useState([]),[b,x]=n.useState(!0),[o,u]=n.useState(!1),[i,g]=n.useState(null),{showToast:a}=w(),[s,r]=n.useState({title:"",content:"",excerpt:"",category:"news",status:"draft",tags:"",featured_image:""});n.useEffect(()=>{d()},[]);const d=async()=>{try{x(!0);const t=await c.getAll();h(t.articles||[])}catch(t){a(t.message||"Failed to load articles","error")}finally{x(!1)}},y=async t=>{t.preventDefault();try{i?(await c.update(i.id,s),a("Article updated successfully","success")):(await c.create(s),a("Article created successfully","success")),d(),p()}catch(l){a(l.message||"Failed to save article","error")}},f=t=>{g(t),r({title:t.title,content:t.content||"",excerpt:t.excerpt||"",category:t.category||"news",status:t.status||"draft",tags:t.tags||"",featured_image:t.featured_image||""}),u(!0)},j=async t=>{try{const l=t.status==="published"?"draft":"published";await c.update(t.id,{status:l}),a("Article status updated","success"),d()}catch(l){a(l.message||"Failed to update status","error")}},v=async t=>{if(confirm("Are you sure you want to delete this article?"))try{await c.delete(t),a("Article deleted successfully","success"),d()}catch(l){a(l.message||"Failed to delete article","error")}},p=()=>{r({title:"",content:"",excerpt:"",category:"news",status:"draft",tags:"",featured_image:""}),g(null),u(!1)};return b?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Article Management"}),e.jsx("button",{onClick:()=>u(!o),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:o?"Cancel":"New Article"})]}),o&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:i?"Edit Article":"Create New Article"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title"}),e.jsx("input",{type:"text",value:s.title,onChange:t=>r({...s,title:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Excerpt"}),e.jsx("textarea",{value:s.excerpt,onChange:t=>r({...s,excerpt:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2",placeholder:"Brief summary of the article...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content (Markdown supported)"}),e.jsx("textarea",{value:s.content,onChange:t=>r({...s,content:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"12",placeholder:"Write your article content here...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Featured Image URL"}),e.jsx("input",{type:"url",value:s.featured_image,onChange:t=>r({...s,featured_image:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"https://..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:s.category,onChange:t=>r({...s,category:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"news",children:"News"}),e.jsx("option",{value:"career-advice",children:"Career Advice"}),e.jsx("option",{value:"industry-trends",children:"Industry Trends"}),e.jsx("option",{value:"company-news",children:"Company News"}),e.jsx("option",{value:"tips",children:"Tips & Guides"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:s.status,onChange:t=>r({...s,status:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"published",children:"Published"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (comma-separated)"}),e.jsx("input",{type:"text",value:s.tags,onChange:t=>r({...s,tags:t.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"job search, cv tips, interview"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[i?"Update":"Create"," Article"]}),e.jsx("button",{type:"button",onClick:p,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}),e.jsx("div",{className:"space-y-4",children:m.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:e.jsx("p",{className:"text-gray-500 text-lg",children:"No articles yet. Create your first article!"})}):m.map(t=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:t.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-3",children:t.excerpt}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsx("span",{className:"capitalize",children:t.category}),e.jsx("span",{children:"•"}),e.jsx("span",{children:new Date(t.created_at).toLocaleDateString()}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[t.views||0," views"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["By ",t.author_name||"Admin"]})]})]}),e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full whitespace-nowrap ml-4 ${t.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.status})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{onClick:()=>f(t),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>j(t),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:t.status==="published"?"Unpublish":"Publish"}),e.jsx("button",{onClick:()=>v(t.id),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm",children:"Delete"})]})]},t.id))})]})}export{k as default};
