import{j as e,a9 as z,u as C,F as S,bg as _,a as P,ao as v,t as B,N as O,ad as U,X as $,bh as H,bi as J,bj as Y,a2 as W}from"./vendor-ui-K43rUeTs.js";import{u as q,r as c,L as w}from"./vendor-react-Dlyf-RJj.js";import{u as V,p as k}from"./index-CAGaxXNg.js";const d=[{key:"company-info",title:"Company Information",icon:C},{key:"description",title:"Description & Culture",icon:S},{key:"logo",title:"Upload Logo",icon:_},{key:"first-job",title:"Post Your First Job",icon:P}],X=["Agriculture & Farming","Automotive","Aviation & Airlines","Banking & Finance","Construction","Consulting","Education","Energy & Mining","Engineering","Forestry & Timber","Government","Healthcare","Hospitality & Tourism","Insurance","IT & Technology","Legal","Manufacturing","Media & Communications","NGO & Development","Oil & Gas","Real Estate","Retail & Trade","Security","Shipping & Logistics","Telecommunications"],Z=["1-10","11-50","51-200","201-500","500+"];function te(){const{user:K}=V(),L=q(),p=c.useRef(null),[r,m]=c.useState(0),[F,I]=c.useState(!0),[h,u]=c.useState(!1),[x,g]=c.useState(null),[a,y]=c.useState({company_name:"",industry:"",company_size:"",location:"",website:"",phone:"",description:"",culture:"",benefits:"[]",logo_url:""});c.useEffect(()=>{T()},[]);const T=async()=>{try{const s=await k.get();if(s!=null&&s.profile){const t=s.profile;y(o=>({...o,company_name:t.company_name||"",industry:t.industry||"",company_size:t.company_size||"",location:t.location||"",website:t.website||"",phone:t.phone||"",description:t.description||"",culture:t.culture||"",benefits:t.benefits||"[]",logo_url:t.logo_url||""})),t.logo_url&&g(t.logo_url)}}catch(s){console.error("Failed to load profile:",s)}finally{I(!1)}},f=async s=>{u(!0);try{const t={};for(const o of s)t[o]=a[o];await k.update(t)}catch(t){console.error("Failed to save:",t)}finally{u(!1)}},A=async()=>{r===0?await f(["company_name","industry","company_size","location","website","phone"]):r===1&&await f(["description","culture","benefits"]),r<d.length-1&&m(r+1)},E=()=>{r<d.length-1?m(r+1):L("/dashboard/employer")},M=async s=>{var i;const t=(i=s.target.files)==null?void 0:i[0];if(!t)return;if(t.size>2*1024*1024){alert("Logo must be under 2MB");return}const o=new FileReader;o.onload=()=>g(o.result),o.readAsDataURL(t),u(!0);try{const n=new FormData;n.append("logo",t);const R="/api",D=localStorage.getItem("token"),j=await fetch(`${R}/profile/logo`,{method:"POST",headers:{Authorization:`Bearer ${D}`},body:n});if(j.ok){const N=await j.json();y(G=>({...G,logo_url:N.logo_url||N.url}))}}catch(n){console.error("Logo upload failed:",n)}finally{u(!1)}},l=(s,t)=>{y(o=>({...o,[s]:t}))},b=(()=>{let s=0,t=8;return a.company_name&&s++,a.industry&&s++,a.company_size&&s++,a.location&&s++,a.logo_url&&s++,a.description&&a.description.length>50&&s++,a.website&&s++,a.phone&&s++,Math.round(s/t*100)})();return F?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-primary-50 text-primary-700 px-4 py-2 rounded-full text-sm font-medium mb-4",children:[e.jsx(z,{className:"w-4 h-4"}),"Welcome to WantokJobs!"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Set up your company profile"}),e.jsx("p",{className:"text-gray-600",children:"Complete these steps to start attracting top candidates in PNG"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Profile ",b,"% complete"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Step ",r+1," of ",d.length]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:"h-2.5 rounded-full bg-primary-600 transition-all duration-500",style:{width:`${Math.max(5,(r+1)/d.length*100)}%`}})}),e.jsx("div",{className:"flex justify-between mt-3",children:d.map((s,t)=>{const o=s.icon,i=t<r,n=t===r;return e.jsxs("button",{onClick:()=>m(t),className:`flex flex-col items-center gap-1 text-xs transition ${n?"text-primary-700 font-semibold":i?"text-green-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition ${n?"bg-primary-100 ring-2 ring-primary-500":i?"bg-green-100":"bg-gray-100"}`,children:i?e.jsx(v,{className:"w-4 h-4"}):e.jsx(o,{className:"w-4 h-4"})}),e.jsx("span",{className:"hidden sm:block",children:s.title})]},s.key)})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-6 sm:p-8 mb-6",children:[r===0&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-primary-600"}),"Company Information"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Tell us about your company so candidates know who you are."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),e.jsx("input",{type:"text",value:a.company_name,onChange:s=>l("company_name",s.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g. Pacific Industries Ltd"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Industry *"}),e.jsxs("select",{value:a.industry,onChange:s=>l("industry",s.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select industry"}),X.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Size"}),e.jsxs("select",{value:a.company_size,onChange:s=>l("company_size",s.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select size"}),Z.map(s=>e.jsxs("option",{value:s,children:[s," employees"]},s))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location *"}),e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:a.location,onChange:s=>l("location",s.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g. Port Moresby, NCD"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"url",value:a.website,onChange:s=>l("website",s.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"https://..."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"tel",value:a.phone,onChange:s=>l("phone",s.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"+675 ..."})]})]})]})]}),r===1&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5 text-primary-600"}),"Company Description & Culture"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Help candidates understand what it's like to work at your company."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"About Your Company *"}),e.jsx("textarea",{value:a.description,onChange:s=>l("description",s.target.value),rows:5,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Tell candidates about your company â€” what you do, your mission, and what makes you unique..."}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.description.length,"/1000 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Work Culture"}),e.jsx("textarea",{value:a.culture,onChange:s=>l("culture",s.target.value),rows:3,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Describe your work environment, team values, and what employees love about working here..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Benefits"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Health Insurance","Housing Allowance","Transport","Training & Development","Paid Leave","Flexible Hours","Remote Work","Performance Bonus","Meals Provided","Relocation Support"].map(s=>{let t=[];try{t=JSON.parse(a.benefits)}catch{}const o=t.includes(s);return e.jsxs("button",{type:"button",onClick:()=>{const i=o?t.filter(n=>n!==s):[...t,s];l("benefits",JSON.stringify(i))},className:`text-left px-3 py-2 rounded-lg text-sm border transition ${o?"border-primary-500 bg-primary-50 text-primary-700 font-medium":"border-gray-200 text-gray-600 hover:border-gray-300"}`,children:[o?"âœ“ ":"",s]},s)})})]})]}),r===2&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5 text-primary-600"}),"Company Logo"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"A logo helps your company stand out and builds trust with candidates."}),e.jsxs("div",{className:"flex flex-col items-center gap-4 py-6",children:[x?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:x,alt:"Company logo",className:"w-32 h-32 rounded-xl object-contain border-2 border-gray-200 bg-white p-2"}),e.jsx("button",{onClick:()=>{g(null),l("logo_url","")},className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600",children:e.jsx($,{className:"w-3 h-3"})})]}):e.jsxs("div",{onClick:()=>{var s;return(s=p.current)==null?void 0:s.click()},className:"w-32 h-32 rounded-xl border-2 border-dashed border-gray-300 flex flex-col items-center justify-center gap-2 cursor-pointer hover:border-primary-400 hover:bg-primary-50 transition",children:[e.jsx(H,{className:"w-8 h-8 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Click to upload"})]}),e.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:M,className:"hidden"}),e.jsx("button",{onClick:()=>{var s;return(s=p.current)==null?void 0:s.click()},className:"px-4 py-2 text-sm font-medium text-primary-700 bg-primary-50 rounded-lg hover:bg-primary-100 transition",children:x?"Change Logo":"Upload Logo"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG or SVG. Max 2MB. Square recommended."})]})]}),r===3&&e.jsxs("div",{className:"space-y-5 text-center py-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-100 mb-2",children:e.jsx(v,{className:"w-10 h-10 text-green-600"})}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"You're all set! ðŸŽ‰"}),e.jsxs("p",{className:"text-gray-600 max-w-md mx-auto",children:["Your company profile is ",b,"% complete. Now post your first job to start receiving applications from candidates across Papua New Guinea."]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 pt-4",children:[e.jsxs(w,{to:"/dashboard/employer/post-job",className:"inline-flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-semibold transition",children:[e.jsx(P,{className:"w-5 h-5"}),"Post Your First Job"]}),e.jsx(w,{to:"/dashboard/employer",className:"inline-flex items-center gap-2 px-6 py-3 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 font-medium transition",children:"Go to Dashboard"})]})]})]}),r<3&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>r>0&&m(r-1),disabled:r===0,className:`inline-flex items-center gap-1 px-4 py-2 rounded-lg text-sm font-medium transition ${r===0?"text-gray-300 cursor-not-allowed":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(J,{className:"w-4 h-4"})," Back"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:E,className:"inline-flex items-center gap-1 px-4 py-2 text-gray-500 hover:text-gray-700 text-sm font-medium transition",children:[e.jsx(Y,{className:"w-4 h-4"})," Skip for now"]}),e.jsxs("button",{onClick:A,disabled:h,className:"inline-flex items-center gap-1 px-6 py-2.5 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-semibold text-sm transition disabled:opacity-50",children:[h?"Saving...":"Save & Continue",e.jsx(W,{className:"w-4 h-4"})]})]})]})]})}export{te as default};
