import{j as e,ak as R,x as S,a6 as q}from"./vendor-ui-K43rUeTs.js";import{d as P,r as a}from"./vendor-react-Dlyf-RJj.js";function $(){const{token:d}=P(),[g,p]=a.useState(!0),[m,u]=a.useState(null),[l,f]=a.useState(null),[n,x]=a.useState([]),[o,y]=a.useState(0),[i,j]=a.useState(""),[N,w]=a.useState(!1),[h,b]=a.useState(!1);a.useEffect(()=>{v()},[d]);const v=async()=>{try{const s=await fetch(`/api/references/respond/${d}`);if(s.ok){const t=await s.json();f(t),x(new Array(t.questions.length).fill(""))}else{const t=await s.json();u(t.error||"Failed to load reference request")}}catch{u("Failed to load reference request")}finally{p(!1)}},k=async s=>{if(s.preventDefault(),!n.every(r=>r.trim().length>0)){alert("Please answer all questions");return}if(!i){alert("Please select a recommendation");return}b(!0);try{const r=await fetch(`/api/references/respond/${d}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({responses:n,overall_rating:o,recommendation:i})});if(r.ok)w(!0);else{const c=await r.json();alert(c.error||"Failed to submit reference")}}catch{alert("Failed to submit reference")}finally{b(!1)}};return g?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading reference request..."})]})}):m?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx(R,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Invalid or Expired Link"}),e.jsx("p",{className:"text-gray-600 mb-4",children:m}),e.jsx("p",{className:"text-sm text-gray-500",children:"Please contact the requester for a new link."})]})}):N?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx(S,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Reference Submitted"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Thank you for providing your reference for ",l.candidate_name,"."]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Your feedback has been recorded and will be kept confidential."}),e.jsx("div",{className:"mt-6 pt-6 border-t",children:e.jsx("a",{href:"https://wantokjobs.com",className:"text-primary-600 hover:text-primary-700 font-medium",children:"Visit WantokJobs â†’"})})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reference Check Request"}),e.jsxs("p",{className:"text-gray-600",children:[l.candidate_name," has applied for the position of"," ",e.jsx("span",{className:"font-semibold",children:l.job_title})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm text-blue-800",children:[e.jsxs("p",{className:"font-medium mb-2",children:["Dear ",l.referee_name,","]}),e.jsxs("p",{children:[l.candidate_name," has listed you as a professional reference. We would greatly appreciate your honest feedback about your working relationship with them. Your responses will be kept confidential and used solely for employment evaluation purposes."]})]})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[l.questions.map((s,t)=>e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("label",{className:"block text-lg font-semibold text-gray-900 mb-3",children:[t+1,". ",s]}),e.jsx("textarea",{value:n[t],onChange:r=>{const c=[...n];c[t]=r.target.value,x(c)},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",rows:"4",placeholder:"Please provide your response...",required:!0})]},t)),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("label",{className:"block text-lg font-semibold text-gray-900 mb-3",children:"Overall Rating"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"How would you rate this candidate overall?"}),e.jsxs("div",{className:"flex gap-2 items-center",children:[[1,2,3,4,5].map(s=>e.jsx("button",{type:"button",onClick:()=>y(s),className:"focus:outline-none",children:e.jsx(q,{className:`w-10 h-10 ${s<=o?"fill-yellow-400 text-yellow-400":"text-gray-300 hover:text-yellow-400"}`})},s)),o>0&&e.jsxs("span",{className:"ml-4 text-lg font-medium text-gray-700",children:[o," / 5"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("label",{className:"block text-lg font-semibold text-gray-900 mb-3",children:"Recommendation"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Would you recommend this candidate for employment?"}),e.jsx("div",{className:"space-y-3",children:[{value:"strongly-recommend",label:"Strongly Recommend",color:"green"},{value:"recommend",label:"Recommend",color:"blue"},{value:"neutral",label:"Neutral",color:"gray"},{value:"not-recommend",label:"Do Not Recommend",color:"red"}].map(s=>e.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-colors ${i===s.value?`border-${s.color}-500 bg-${s.color}-50`:"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"recommendation",value:s.value,checked:i===s.value,onChange:t=>j(t.target.value),className:"w-5 h-5 mr-3",required:!0}),e.jsx("span",{className:"font-medium text-gray-900",children:s.label})]},s.value))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("button",{type:"submit",disabled:h,className:"w-full px-6 py-4 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?"Submitting...":"Submit Reference"}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:"By submitting, you confirm that the information provided is truthful and accurate."})]})]}),e.jsxs("div",{className:"text-center mt-8 text-sm text-gray-500",children:[e.jsxs("p",{children:["Powered by ",e.jsx("a",{href:"https://wantokjobs.com",className:"text-primary-600 hover:text-primary-700 font-medium",children:"WantokJobs"})]}),e.jsx("p",{className:"mt-2",children:"Papua New Guinea's Premier Job Portal"})]})]})})}export{$ as default};
