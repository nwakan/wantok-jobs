import{j as e,ao as Ae,E as J,aM as f,a9 as ne,N as oe,X as L,bb as ce,ac as de,at as Ie,ak as De}from"./vendor-ui-K43rUeTs.js";import{u as Me,d as Ee,r as i,L as A}from"./vendor-react-Dlyf-RJj.js";import{c as Re,u as Te,j as I}from"./index-CAGaxXNg.js";const Fe="/api";function Oe(){var Q,Y,z,V,W,X,Z,ee,se,te,re,ae,le,ie;const v=Me(),{id:g}=Ee(),o=!!g,{showToast:d}=Re(),p=i.useRef(null),[me,xe]=i.useState(o),[u,D]=i.useState(!1),[n,m]=i.useState(1),[N,pe]=i.useState(!1),[M,h]=i.useState(!1),[ue,E]=i.useState(!1),[R,T]=i.useState(null),[a,ge]=i.useState(null),[F,he]=i.useState([]),[t,l]=i.useState({title:"",description:"",requirements:[],location:"",country:"Papua New Guinea",job_type:"full-time",experience_level:"Mid Level",industry:"",category_slug:"",skills:[],remote_work:!1,salary_min:"",salary_max:"",salary_currency:"PGK",application_deadline:"",application_method:"internal",application_url:"",application_email:"",screening_questions:[],status:"active"}),[w,B]=i.useState(""),[b,H]=i.useState(""),[_,G]=i.useState(""),{user:k}=Te(),C=(k==null?void 0:k.account_type)==="agency",[be,ye]=i.useState([]),[S,je]=i.useState(null),fe=["Papua New Guinea","Fiji","Solomon Islands","Vanuatu","Samoa","Tonga"],ve=["Port Moresby","Lae","Mount Hagen","Goroka","Madang","Wewak"],Ne=["Technology","Banking & Finance","Healthcare","Education","Mining & Resources","Construction","Retail","Hospitality & Tourism","Government","Agriculture","Telecommunications","Manufacturing"],O=[{number:1,title:"Basic Info",icon:"ðŸ“"},{number:2,title:"Job Details",icon:"ðŸ“„"},{number:3,title:"Compensation",icon:"ðŸ’°"},{number:4,title:"Applications",icon:"ðŸ“§"},{number:5,title:"Review & Publish",icon:"âœ“"}];i.useEffect(()=>{P(),we(),o&&_e(),C&&fetch(`${Fe}/agency/clients`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(s=>s.json()).then(s=>ye(s.data||[])).catch(()=>{})},[g]);const P=async()=>{try{const s=await fetch("/api/credits/status",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(s.ok){const r=await s.json();ge(r)}}catch(s){console.error("Failed to load credit status:",s)}},we=async()=>{try{const s=await fetch("/api/categories");if(s.ok){const r=await s.json();he(r.data||[])}}catch(s){console.error("Failed to load categories:",s)}},_e=async()=>{try{const s=await I.getById(g);l({title:s.title,description:s.description,requirements:s.requirements?JSON.parse(s.requirements):[],location:s.location||"",country:s.country||"Papua New Guinea",job_type:s.job_type,experience_level:s.experience_level||"Mid Level",industry:s.industry||"",category_slug:s.category_slug||"",skills:s.skills?JSON.parse(s.skills):[],remote_work:s.remote_work||!1,salary_min:s.salary_min||"",salary_max:s.salary_max||"",salary_currency:s.salary_currency||"PGK",application_deadline:s.application_deadline||"",application_method:s.application_method||"internal",application_url:s.application_url||"",application_email:s.application_email||"",screening_questions:s.screening_questions?JSON.parse(s.screening_questions):[],status:s.status})}catch(s){d("Failed to load job: "+s.message,"error"),v("/dashboard/employer/jobs")}finally{xe(!1)}},q=async(s,r=!1)=>{var c;if(s==null||s.preventDefault(),!t.title.trim()){d("Job title is required","error"),m(1);return}if(!t.description.trim()){d("Job description is required","error"),m(2);return}if(!t.category_slug){d("Please select a job category","error"),m(1);return}if(!o&&!r&&t.status==="active"&&!M){h(!0);return}D(!0);try{const y={...t,status:r?"draft":t.status,requirements:JSON.stringify(t.requirements),skills:JSON.stringify(t.skills),screening_questions:JSON.stringify(t.screening_questions),...C&&S?{client_id:S}:{}};let j;o?(j=await I.update(g,y),d("Job updated successfully!","success"),v("/dashboard/employer/jobs")):(j=await I.create(y),d("Job posted successfully!","success"),T(((c=j.data)==null?void 0:c.id)||j.id),E(!0),P())}catch(y){d("Failed to save job: "+y.message,"error"),h(!1)}finally{D(!1)}},$=()=>{w.trim()&&(l({...t,requirements:[...t.requirements,w.trim()]}),B(""))},ke=s=>{l({...t,requirements:t.requirements.filter((r,c)=>c!==s)})},K=()=>{b.trim()&&!t.skills.includes(b.trim())&&(l({...t,skills:[...t.skills,b.trim()]}),H(""))},Ce=s=>{l({...t,skills:t.skills.filter((r,c)=>c!==s)})},U=()=>{_.trim()&&(l({...t,screening_questions:[...t.screening_questions,_.trim()]}),G(""))},Se=s=>{l({...t,screening_questions:t.screening_questions.filter((r,c)=>c!==s)})},x=(s,r=null)=>{document.execCommand(s,!1,r),p.current&&l({...t,description:p.current.innerHTML})},Pe=()=>{p.current&&l({...t,description:p.current.innerHTML})},qe=()=>{n<5&&m(n+1)},Je=()=>{n>1&&m(n-1)},Le=s=>{const r=document.createElement("div");return r.innerHTML=s,r.textContent.length};return me?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):ue&&R?e.jsx("div",{className:"max-w-2xl mx-auto text-center py-12",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 border border-gray-100",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Ae,{className:"w-10 h-10 text-green-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Job Posted Successfully! ðŸŽ‰"}),e.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Your job listing is now live and visible to thousands of job seekers across the Pacific."}),a&&!((Q=a.trial)!=null&&Q.active)&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"1 job posting credit used."})," ","You have ",((Y=a.credits)==null?void 0:Y.job_posting)||0," credits remaining."]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(A,{to:`/jobs/${R}`,className:"px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium inline-flex items-center justify-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"}),"View Public Listing"]}),e.jsx(A,{to:"/dashboard/employer/jobs",className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Manage Jobs"}),e.jsxs("button",{onClick:()=>{E(!1),T(null),l({title:"",description:"",requirements:[],location:"",country:"Papua New Guinea",job_type:"full-time",experience_level:"Mid Level",industry:"",category_slug:"",skills:[],remote_work:!1,salary_min:"",salary_max:"",salary_currency:"PGK",application_deadline:"",application_method:"internal",application_url:"",application_email:"",screening_questions:[],status:"active"}),m(1),P()},className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium inline-flex items-center gap-2",children:[e.jsx(f,{className:"w-5 h-5"}),"Post Another Job"]})]})]})}):e.jsxs("div",{className:"max-w-4xl",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:o?"Edit Job":"Post New Job"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Fill in the details to create a compelling job listing"}),a&&!o&&e.jsx("div",{className:`mb-6 rounded-lg border p-4 ${(z=a.trial)!=null&&z.active?"bg-purple-50 border-purple-200":((V=a.credits)==null?void 0:V.job_posting)>0?"bg-green-50 border-green-200":"bg-amber-50 border-amber-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ne,{className:`w-5 h-5 mt-0.5 ${(W=a.trial)!=null&&W.active?"text-purple-600":((X=a.credits)==null?void 0:X.job_posting)>0?"text-green-600":"text-amber-600"}`}),e.jsx("div",{className:"flex-1",children:(Z=a.trial)!=null&&Z.active?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-semibold text-purple-900",children:a.trial.type==="premium_indefinite"?"âœ¨ Premium Trial Active":"ðŸŽ‰ Free Trial Active"}),e.jsx("p",{className:"text-sm text-purple-700 mt-1",children:a.trial.type==="premium_indefinite"?"Unlimited job postings â€” no credit cost":`Post jobs for free until ${new Date(a.trial.expiresAt).toLocaleDateString()}`})]}):((ee=a.credits)==null?void 0:ee.job_posting)>0?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"font-semibold text-green-900",children:[a.credits.job_posting," Job Posting Credit",a.credits.job_posting!==1?"s":""," Available"]}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Posting this job will use 1 credit"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-semibold text-amber-900",children:"âš ï¸ No Job Posting Credits"}),e.jsxs("p",{className:"text-sm text-amber-700 mt-1",children:["You can save this as a draft, but you'll need credits to publish."," ",e.jsx(A,{to:"/pricing",className:"underline font-medium",children:"Purchase credits"})]})]})})]})}),e.jsx("div",{className:"mb-8 overflow-x-auto",children:e.jsx("div",{className:"flex items-center justify-between min-w-max",children:O.map((s,r)=>e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("button",{onClick:()=>m(s.number),className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg transition-all ${n>=s.number?"bg-primary-600 text-white":"bg-gray-200 text-gray-500"}`,children:s.icon}),e.jsx("span",{className:`mt-2 text-xs sm:text-sm font-medium ${n>=s.number?"text-gray-900":"text-gray-500"}`,children:s.title})]}),r<O.length-1&&e.jsx("div",{className:`h-1 flex-1 mx-4 rounded ${n>s.number?"bg-primary-600":"bg-gray-200"}`})]},s.number))})}),e.jsxs("form",{onSubmit:q,className:"bg-white rounded-xl shadow-sm p-8 border border-gray-100",children:[n===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Basic Information"}),C&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Posting For"}),e.jsxs("select",{value:S||"",onChange:s=>je(s.target.value?Number(s.target.value):null),className:"w-full border border-gray-300 rounded-lg px-3 py-2.5 text-sm focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"My Company"}),be.map(s=>e.jsx("option",{value:s.id,children:s.company_name},s.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select which company this job is for, or post under your own agency name."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:["Job Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.title,onChange:s=>l({...t,title:s.target.value}),required:!0,maxLength:100,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g. Senior Software Developer"}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Be clear and specific to attract the right candidates"}),e.jsxs("span",{className:"text-xs text-gray-400",children:[t.title.length,"/100"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:t.category_slug,onChange:s=>l({...t,category_slug:s.target.value}),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select a category..."}),F.map(s=>e.jsx("option",{value:s.slug,children:s.name},s.slug))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Helps job seekers find your listing"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:["Country ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:t.country,onChange:s=>l({...t,country:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:fe.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"City/Location"}),e.jsx("input",{type:"text",list:"cities",value:t.location,onChange:s=>l({...t,location:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g. Port Moresby"}),e.jsx("datalist",{id:"cities",children:ve.map(s=>e.jsx("option",{value:s},s))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.remote_work,onChange:s=>l({...t,remote_work:s.target.checked}),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),e.jsx(oe,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Remote work available"})]}),e.jsx("p",{className:"text-xs text-gray-500 ml-6 mt-1",children:"Remote jobs get 3x more applications"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:["Job Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:t.job_type,onChange:s=>l({...t,job_type:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"full-time",children:"Full-time"}),e.jsx("option",{value:"part-time",children:"Part-time"}),e.jsx("option",{value:"contract",children:"Contract"}),e.jsx("option",{value:"casual",children:"Casual"}),e.jsx("option",{value:"internship",children:"Internship"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Experience Level"}),e.jsxs("select",{value:t.experience_level,onChange:s=>l({...t,experience_level:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"Entry Level",children:"Entry Level"}),e.jsx("option",{value:"Mid Level",children:"Mid Level"}),e.jsx("option",{value:"Senior",children:"Senior"}),e.jsx("option",{value:"Executive",children:"Executive"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Industry"}),e.jsxs("select",{value:t.industry,onChange:s=>l({...t,industry:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:"Select an industry..."}),Ne.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),n===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Job Details"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:["Job Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"border border-gray-300 rounded-t-lg bg-gray-50 p-2 flex flex-wrap gap-1",children:[e.jsx("button",{type:"button",onClick:()=>x("bold"),className:"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 font-bold text-sm",title:"Bold",children:"B"}),e.jsx("button",{type:"button",onClick:()=>x("italic"),className:"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 italic text-sm",title:"Italic",children:"I"}),e.jsx("button",{type:"button",onClick:()=>x("underline"),className:"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 underline text-sm",title:"Underline",children:"U"}),e.jsx("div",{className:"w-px bg-gray-300 mx-1"}),e.jsx("button",{type:"button",onClick:()=>x("insertUnorderedList"),className:"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm",title:"Bullet List",children:"â€¢ List"}),e.jsx("button",{type:"button",onClick:()=>x("insertOrderedList"),className:"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm",title:"Numbered List",children:"1. List"}),e.jsx("div",{className:"w-px bg-gray-300 mx-1"}),e.jsx("button",{type:"button",onClick:()=>x("formatBlock","h3"),className:"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 font-bold text-sm",title:"Heading",children:"H"}),e.jsx("button",{type:"button",onClick:()=>x("formatBlock","p"),className:"px-3 py-1 bg-white border border-gray-300 rounded hover:bg-gray-100 text-sm",title:"Paragraph",children:"P"})]}),e.jsx("div",{ref:p,contentEditable:!0,onInput:Pe,dangerouslySetInnerHTML:{__html:t.description},className:"w-full min-h-[300px] px-4 py-3 border border-t-0 border-gray-300 rounded-b-lg focus:outline-none focus:ring-2 focus:ring-primary-500 prose prose-sm max-w-none",style:{outline:"none"}}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Describe responsibilities, team, growth opportunities"}),e.jsxs("span",{className:"text-xs text-gray-400",children:[Le(t.description)," chars"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Key Requirements"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",value:w,onChange:s=>B(s.target.value),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),$()),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g. 5+ years experience in software development"}),e.jsxs("button",{type:"button",onClick:$,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium inline-flex items-center gap-1",children:[e.jsx(f,{className:"w-4 h-4"}),"Add"]})]}),e.jsx("ul",{className:"space-y-2",children:t.requirements.map((s,r)=>e.jsxs("li",{className:"flex items-start gap-3 bg-gray-50 px-4 py-3 rounded-lg border border-gray-200",children:[e.jsx("span",{className:"text-primary-600 mt-0.5",children:"âœ“"}),e.jsx("span",{className:"flex-1 text-gray-700 text-sm",children:s}),e.jsx("button",{type:"button",onClick:()=>ke(r),className:"text-red-600 hover:text-red-700 text-sm",children:e.jsx(L,{className:"w-4 h-4"})})]},r))}),t.requirements.length===0&&e.jsx("p",{className:"text-xs text-gray-500 italic",children:"No requirements added yet"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Required Skills (for AI matching)"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",value:b,onChange:s=>H(s.target.value),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),K()),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g. Python, Project Management, Excel"}),e.jsxs("button",{type:"button",onClick:K,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium inline-flex items-center gap-1",children:[e.jsx(f,{className:"w-4 h-4"}),"Add"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.skills.map((s,r)=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-primary-100 text-primary-800 rounded-full text-sm font-medium",children:[s,e.jsx("button",{type:"button",onClick:()=>Ce(r),className:"hover:text-primary-900",children:e.jsx(L,{className:"w-3 h-3"})})]},r))}),t.skills.length===0&&e.jsx("p",{className:"text-xs text-gray-500 italic",children:"No skills added yet"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-start gap-1",children:[e.jsx(ce,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Skills help our AI match candidates and show compatibility scores"})]})]})]}),n===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Compensation & Benefits"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Currency"}),e.jsxs("select",{value:t.salary_currency,onChange:s=>l({...t,salary_currency:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"PGK",children:"PGK"}),e.jsx("option",{value:"FJD",children:"FJD"}),e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"AUD",children:"AUD"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Minimum Salary"}),e.jsx("input",{type:"number",value:t.salary_min,onChange:s=>l({...t,salary_min:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g. 30000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Maximum Salary"}),e.jsx("input",{type:"number",value:t.salary_max,onChange:s=>l({...t,salary_max:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g. 50000"})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800 flex items-start gap-2",children:[e.jsx(ne,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Pro tip:"})," Jobs with visible salaries receive 3x more applications and 5x more views"]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Application Deadline"}),e.jsx("input",{type:"date",value:t.application_deadline,onChange:s=>l({...t,application_deadline:s.target.value}),min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional â€” job will auto-close after this date"})]})]}),n===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Application Method"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-3",children:"How should candidates apply?"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-start gap-3 p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-primary-500 hover:bg-primary-50 transition-colors",children:[e.jsx("input",{type:"radio",name:"application_method",value:"internal",checked:t.application_method==="internal",onChange:s=>l({...t,application_method:s.target.value}),className:"mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Internal Application (Recommended)"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Candidates apply through WantokJobs â€” you manage applications in your dashboard"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-primary-500 hover:bg-primary-50 transition-colors",children:[e.jsx("input",{type:"radio",name:"application_method",value:"external_url",checked:t.application_method==="external_url",onChange:s=>l({...t,application_method:s.target.value}),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"External Website"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Redirect candidates to your company's careers page or ATS"}),t.application_method==="external_url"&&e.jsx("input",{type:"url",value:t.application_url,onChange:s=>l({...t,application_url:s.target.value}),placeholder:"https://yourcompany.com/careers/apply",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-primary-500 hover:bg-primary-50 transition-colors",children:[e.jsx("input",{type:"radio",name:"application_method",value:"email",checked:t.application_method==="email",onChange:s=>l({...t,application_method:s.target.value}),className:"mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4"}),"Email Applications"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Candidates email their CV directly to you"}),t.application_method==="email"&&e.jsx("input",{type:"email",value:t.application_email,onChange:s=>l({...t,application_email:s.target.value}),placeholder:"hr@yourcompany.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm"})]})]})]})]}),t.application_method==="internal"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-2 flex items-center gap-2",children:["Screening Questions",e.jsx(Ie,{className:"w-4 h-4 text-gray-400",title:"Optional questions to filter candidates"})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",value:_,onChange:s=>G(s.target.value),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),U()),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"e.g. Do you have a valid driver's license?"}),e.jsxs("button",{type:"button",onClick:U,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium inline-flex items-center gap-1",children:[e.jsx(f,{className:"w-4 h-4"}),"Add"]})]}),e.jsx("ul",{className:"space-y-2",children:t.screening_questions.map((s,r)=>e.jsxs("li",{className:"flex items-start gap-3 bg-gray-50 px-4 py-3 rounded-lg border border-gray-200",children:[e.jsxs("span",{className:"text-gray-600 mt-0.5",children:[r+1,"."]}),e.jsx("span",{className:"flex-1 text-gray-700 text-sm",children:s}),e.jsx("button",{type:"button",onClick:()=>Se(r),className:"text-red-600 hover:text-red-700 text-sm",children:e.jsx(L,{className:"w-4 h-4"})})]},r))}),t.screening_questions.length===0&&e.jsx("p",{className:"text-xs text-gray-500 italic",children:"No screening questions added"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Candidates must answer these when applying â€” helps you filter applicants"})]})]}),n===5&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Review & Publish"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 space-y-4 border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-1",children:t.title}),e.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[t.remote_work&&e.jsx(oe,{className:"w-4 h-4 text-green-600"}),t.location?`${t.location}, `:"",t.country,t.remote_work&&e.jsx("span",{className:"text-green-600 font-medium",children:"â€¢ Remote OK"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm border-t pt-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Category:"}),e.jsx("p",{className:"font-medium",children:((se=F.find(s=>s.slug===t.category_slug))==null?void 0:se.name)||"Not selected"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Job Type:"}),e.jsx("p",{className:"font-medium capitalize",children:t.job_type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Experience:"}),e.jsx("p",{className:"font-medium",children:t.experience_level})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Industry:"}),e.jsx("p",{className:"font-medium",children:t.industry||"Not specified"})]})]}),(t.salary_min||t.salary_max)&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Salary Range:"}),e.jsxs("p",{className:"font-semibold text-lg text-green-600",children:[t.salary_currency," ",t.salary_min&&parseInt(t.salary_min).toLocaleString(),t.salary_min&&t.salary_max&&" - ",t.salary_max&&parseInt(t.salary_max).toLocaleString()]})]}),t.skills.length>0&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("span",{className:"text-sm text-gray-600 block mb-2",children:"Required Skills:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.skills.map((s,r)=>e.jsx("span",{className:"px-2 py-1 bg-primary-100 text-primary-800 rounded text-xs font-medium",children:s},r))})]}),t.application_method!=="internal"&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Application Method:"}),e.jsxs("p",{className:"font-medium flex items-center gap-2 mt-1",children:[t.application_method==="external_url"&&e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-4 h-4"}),"External URL: ",e.jsx("a",{href:t.application_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:t.application_url})]}),t.application_method==="email"&&e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"w-4 h-4"}),"Email: ",t.application_email]})]})]}),e.jsxs("button",{type:"button",onClick:()=>pe(!N),className:"text-primary-600 hover:text-primary-700 font-medium text-sm",children:[N?"Hide":"Show"," full preview"]}),N&&e.jsxs("div",{className:"border-t pt-4 mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Description:"}),e.jsx("div",{className:"prose prose-sm max-w-none text-gray-700",dangerouslySetInnerHTML:{__html:t.description}})]}),t.requirements.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Requirements:"}),e.jsx("ul",{className:"space-y-1",children:t.requirements.map((s,r)=>e.jsxs("li",{className:"text-sm text-gray-700 flex items-start gap-2",children:[e.jsx("span",{className:"text-primary-600 mt-0.5",children:"âœ“"}),s]},r))})]}),t.screening_questions.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Screening Questions:"}),e.jsx("ol",{className:"space-y-1 list-decimal list-inside",children:t.screening_questions.map((s,r)=>e.jsx("li",{className:"text-sm text-gray-700",children:s},r))})]})]})]}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800 flex items-start gap-2",children:[e.jsx(ce,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Ready to publish?"})," Your job will be visible to thousands of job seekers across the Pacific and promoted through our AI matching system."]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Publication Status"}),e.jsxs("select",{value:t.status,onChange:s=>l({...t,status:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"draft",children:"Draft (not visible, no credit cost)"}),e.jsx("option",{value:"active",children:"Active (publicly visible)"}),e.jsx("option",{value:"closed",children:"Closed (no longer accepting applications)"})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-4 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("div",{children:n>1&&e.jsx("button",{type:"button",onClick:Je,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"â† Previous"})}),e.jsxs("div",{className:"flex gap-3",children:[!o&&n===5&&e.jsx("button",{type:"button",onClick:s=>q(s,!0),disabled:u,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Save as Draft"}),e.jsx("button",{type:"button",onClick:()=>v("/dashboard/employer/jobs"),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"}),n<5?e.jsx("button",{type:"button",onClick:qe,className:"px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium",children:"Next â†’"}):e.jsx("button",{type:"submit",disabled:u||!((te=a==null?void 0:a.trial)!=null&&te.active)&&!o&&t.status==="active"&&(((re=a==null?void 0:a.credits)==null?void 0:re.job_posting)||0)===0,className:"px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",title:!((ae=a==null?void 0:a.trial)!=null&&ae.active)&&!o&&t.status==="active"&&(((le=a==null?void 0:a.credits)==null?void 0:le.job_posting)||0)===0?"Insufficient credits":"",children:u?"Publishing...":o?"Update Job":"Publish Job"})]})]})]}),M&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(De,{className:"w-6 h-6 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Confirm Job Posting"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Publishing this job will use ",e.jsx("strong",{children:"1 job posting credit"}),"."]}),a&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["You will have ",e.jsxs("strong",{children:[(((ie=a.credits)==null?void 0:ie.job_posting)||1)-1," credits"]})," remaining after this post."]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"}),e.jsx("button",{onClick:s=>{h(!1),q(s)},disabled:u,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium disabled:opacity-50",children:u?"Publishing...":"Confirm & Publish"})]})]})})]})}export{Oe as default};
