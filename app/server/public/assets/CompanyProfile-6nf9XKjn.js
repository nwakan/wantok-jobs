import{Y as z,r as l,a7 as f,j as e}from"./index-BNk0NZme.js";function E(){const{showToast:m}=z(),[j,N]=l.useState(!0),[p,x]=l.useState(!1),[o,v]=l.useState(null),[i,u]=l.useState(!1),[a,r]=l.useState({company_name:"",industry:"",company_size:"",location:"",country:"Papua New Guinea",website:"",logo_url:"",description:"",benefits:[],photos:[]}),[n,g]=l.useState(""),[d,h]=l.useState(""),w=["Papua New Guinea","Fiji","Solomon Islands","Vanuatu","Samoa","Tonga"],C=["1-10","11-50","51-200","201-500","500-1000","1000+"];l.useEffect(()=>{k()},[]);const k=async()=>{try{const s=await f.get();v(s.user),s.profile&&r({company_name:s.profile.company_name||"",industry:s.profile.industry||"",company_size:s.profile.company_size||"",location:s.profile.location||"",country:s.profile.country||"Papua New Guinea",website:s.profile.website||"",logo_url:s.profile.logo_url||"",description:s.profile.description||"",benefits:s.profile.benefits?JSON.parse(s.profile.benefits):[],photos:s.profile.photos?JSON.parse(s.profile.photos):[]})}catch(s){console.error("Failed to load profile:",s)}finally{N(!1)}},_=async s=>{s.preventDefault(),x(!0);try{const t={...a,benefits:JSON.stringify(a.benefits),photos:JSON.stringify(a.photos)};await f.update(t),m("Profile updated successfully!","success")}catch(t){m("Failed to update profile: "+t.message,"error")}finally{x(!1)}},y=()=>{n.trim()&&(r({...a,benefits:[...a.benefits,n.trim()]}),g(""))},P=s=>{r({...a,benefits:a.benefits.filter((t,c)=>c!==s)})},b=()=>{d.trim()&&(r({...a,photos:[...a.photos,d.trim()]}),h(""))},S=s=>{r({...a,photos:a.photos.filter((t,c)=>c!==s)})};return j?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Company Profile"}),e.jsx("button",{onClick:()=>u(!i),className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 font-medium",children:i?"âœï¸ Edit":"ðŸ‘ï¸ Preview"})]}),i?e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"This is how your profile looks to job seekers"})}),e.jsxs("div",{className:"flex items-start gap-6 mb-8 pb-8 border-b",children:[a.logo_url?e.jsx("img",{src:a.logo_url,alt:a.company_name,className:"w-24 h-24 object-contain border rounded-lg p-2"}):e.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-lg flex items-center justify-center text-gray-400 text-3xl",children:"ðŸ¢"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:a.company_name||"Company Name"}),e.jsxs("p",{className:"text-gray-600 mb-2",children:[a.industry||"Industry"," â€¢ ",a.company_size?`${a.company_size} employees`:"Company size not specified"]}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["ðŸ“ ",a.location||"Location",", ",a.country]}),a.website&&e.jsxs("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700",children:["ðŸŒ ",a.website]})]})]}),a.description&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"About Us"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:a.description})]}),a.benefits.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Benefits & Perks"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:a.benefits.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 text-gray-700",children:[e.jsx("span",{className:"text-green-600",children:"âœ“"}),e.jsx("span",{children:s})]},t))})]}),a.photos.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Our Workplace"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:a.photos.map((s,t)=>e.jsx("img",{src:s,alt:`Workplace ${t+1}`,className:"w-full h-48 object-cover rounded-lg"},t))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-2 text-gray-700",children:[e.jsxs("p",{children:["ðŸ“§ ",o==null?void 0:o.email]}),e.jsxs("p",{children:["ðŸ‘¤ ",o==null?void 0:o.name]})]})]})]})}):e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Name"}),e.jsx("input",{type:"text",value:(o==null?void 0:o.name)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:(o==null?void 0:o.email)||"",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Company Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name *"}),e.jsx("input",{type:"text",value:a.company_name,onChange:s=>r({...a,company_name:s.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500",placeholder:"Acme Corporation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Industry *"}),e.jsx("input",{type:"text",value:a.industry,onChange:s=>r({...a,industry:s.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500",placeholder:"e.g. Technology, Banking"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Size"}),e.jsxs("select",{value:a.company_size,onChange:s=>r({...a,company_size:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Select size"}),C.map(s=>e.jsxs("option",{value:s,children:[s," employees"]},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),e.jsx("input",{type:"url",value:a.website,onChange:s=>r({...a,website:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500",placeholder:"https://example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country *"}),e.jsx("select",{value:a.country,onChange:s=>r({...a,country:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500",children:w.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location (City)"}),e.jsx("input",{type:"text",value:a.location,onChange:s=>r({...a,location:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500",placeholder:"e.g. Port Moresby"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Logo URL"}),e.jsx("input",{type:"url",value:a.logo_url,onChange:s=>r({...a,logo_url:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500",placeholder:"https://example.com/logo.png"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload your logo to an image hosting service and paste the URL here"}),a.logo_url&&e.jsx("div",{className:"mt-3",children:e.jsx("img",{src:a.logo_url,alt:"Logo preview",className:"h-16 w-auto border rounded"})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Company Description"}),e.jsx("textarea",{value:a.description,onChange:s=>r({...a,description:s.target.value}),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500",placeholder:"Tell job seekers about your company, culture, and what makes you a great place to work..."})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Benefits & Perks"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"text",value:n,onChange:s=>g(s.target.value),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),y()),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500",placeholder:"e.g. Health insurance, Remote work, Gym membership"}),e.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Add"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.benefits.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-green-100 text-green-800 rounded-lg",children:[e.jsxs("span",{children:["âœ“ ",s]}),e.jsx("button",{type:"button",onClick:()=>P(t),className:"text-green-600 hover:text-green-900 font-bold",children:"Ã—"})]},t)),a.benefits.length===0&&e.jsx("p",{className:"text-gray-500 text-sm",children:"No benefits added yet"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Company Photos Gallery"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"url",value:d,onChange:s=>h(s.target.value),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),b()),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary-500",placeholder:"https://example.com/photo.jpg"}),e.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Add Photo"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.photos.map((s,t)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s,alt:`Company photo ${t+1}`,className:"w-full h-40 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>S(t),className:"absolute top-2 right-2 bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:"Ã—"})]},t)),a.photos.length===0&&e.jsxs("div",{className:"col-span-full text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx("p",{className:"text-gray-500",children:"No photos added yet"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Add photos to showcase your workplace"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>u(!0),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"Preview"}),e.jsx("button",{type:"submit",disabled:p,className:"px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 disabled:opacity-50",children:p?"Saving...":"Save Profile"})]})]})]})}export{E as default};
