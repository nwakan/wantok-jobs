import{Y as f,r as l,a8 as c,a5 as m,j as e,h as i}from"./index-BNk0NZme.js";function j(){const{showToast:r}=f(),[t,n]=l.useState([]),[x,p]=l.useState(!0),[o,d]=l.useState(new Set);l.useEffect(()=>{h()},[]);const h=async()=>{try{const[s,a]=await Promise.all([c.getAll().catch(()=>[]),m.getMy().catch(()=>[])]);n(Array.isArray(s)?s:[]);const u=new Set((a||[]).map(b=>b.job_id));d(u)}catch(s){console.error("Failed to load saved jobs:",s),n([])}finally{p(!1)}},g=async s=>{try{await c.unsave(s),n(t.filter(a=>a.id!==s)),r("Job removed from saved ðŸ—‘ï¸","success")}catch{r("Failed to unsave job","error")}},y=async s=>{try{await m.create({job_id:s,cover_letter:"Applied from saved jobs. Please see my full profile for details."}),r("Application submitted successfully! ðŸŽ‰","success"),d(new Set([...o,s]))}catch(a){r("Failed to submit application: "+(a.message||"Unknown error"),"error")}};return x?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Saved Jobs"}),e.jsxs("p",{className:"text-gray-600",children:["Jobs you've bookmarked for later â€¢ ",t.length," saved"]})]}),t.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ”–"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No saved jobs yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Save jobs you're interested in to review and apply later"}),e.jsx(i,{to:"/jobs",className:"inline-block px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium",children:"Browse Jobs"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(s=>{const a=o.has(s.id);return e.jsxs("div",{className:"bg-white rounded-lg shadow-md border-2 border-gray-200 hover:border-primary-500 hover:shadow-lg transition overflow-hidden flex flex-col",children:[a&&e.jsx("div",{className:"bg-green-500 text-white text-center py-1 text-xs font-semibold",children:"âœ“ ALREADY APPLIED"}),e.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(i,{to:`/jobs/${s.id}`,className:"text-lg font-bold text-gray-900 hover:text-primary-600 transition line-clamp-2",children:s.title}),e.jsx("p",{className:"text-gray-700 font-medium mt-2",children:s.company_name})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“"}),e.jsx("span",{children:s.location})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ’¼"}),e.jsx("span",{className:"capitalize",children:s.type})]}),s.salary_min&&s.salary_max&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ’°"}),e.jsxs("span",{children:["K",s.salary_min.toLocaleString()," - K",s.salary_max.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 pt-2",children:[e.jsx("span",{children:"ðŸ•’"}),e.jsxs("span",{children:["Posted ",Math.floor((Date.now()-new Date(s.created_at||s.posted_at).getTime())/(1e3*60*60*24))," days ago"]})]})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-3 mb-4 bg-gray-50 p-3 rounded border border-gray-200",children:s.description}),e.jsxs("div",{className:"space-y-2 mt-auto",children:[a?e.jsx(i,{to:"/dashboard/jobseeker/applications",className:"block w-full px-4 py-2 bg-gray-300 text-gray-700 rounded-lg text-center font-medium",children:"View Application"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>y(s.id),className:"w-full px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium transition",children:"âš¡ Quick Apply"}),e.jsx(i,{to:`/jobs/${s.id}`,className:"block w-full px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 text-center font-medium transition",children:"View Details"})]}),e.jsx("button",{onClick:()=>g(s.id),className:"w-full px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 font-medium transition",children:"ðŸ—‘ï¸ Remove"})]})]})]},s.id)})}),t.length>0&&e.jsxs("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-5",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"ðŸ’¡ Pro Tips"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"â€¢ Review saved jobs regularly as positions may close"}),e.jsx("li",{children:"â€¢ Use Quick Apply for faster applications"}),e.jsx("li",{children:"â€¢ Tailor your cover letter for each position for better results"}),e.jsx("li",{children:"â€¢ Set up job alerts to get notified about similar positions"})]})]})]})}export{j as default};
