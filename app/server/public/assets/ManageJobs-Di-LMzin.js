import{Y as _,r as i,ag as b,j as e,h as N}from"./index-BNk0NZme.js";function F(){const{showToast:l}=_(),[x,j]=i.useState([]),[v,y]=i.useState(!0),[d,m]=i.useState("all"),[o,w]=i.useState(""),[n,g]=i.useState([]),[a,u]=i.useState({page:1,totalPages:1});i.useEffect(()=>{c()},[d,a.page]);const c=async()=>{y(!0);try{const s=d!=="all"?{status:d,page:a.page}:{page:a.page},t=await b.getJobs(s);j(t.data||[]),u({page:t.page||1,totalPages:t.totalPages||1})}catch(s){console.error("Failed to load jobs:",s)}finally{y(!1)}},C=async s=>{if(confirm("Are you sure you want to delete this job?"))try{await b.deleteJob(s),l("Job deleted successfully","success"),c()}catch(t){l("Failed to delete job: "+t.message,"error")}},p=async s=>{if(n.length===0){l("Please select jobs first","error");return}if(confirm(`Are you sure you want to ${s} ${n.length} job(s)?`))try{await new Promise(t=>setTimeout(t,1e3)),l(`Bulk action "${s}" completed for ${n.length} job(s)`,"success"),g([]),c()}catch(t){l("Bulk action failed: "+t.message,"error")}},k=s=>{g(t=>t.includes(s)?t.filter(r=>r!==s):[...t,s])},S=()=>{g(s=>s.length===x.length?[]:x.map(t=>t.id))},J=async(s,t)=>{try{await new Promise(r=>setTimeout(r,500)),l(t?"Job unflagged":"Job flagged","success"),c()}catch{l("Failed to update flag","error")}},P=async(s,t)=>{try{await new Promise(r=>setTimeout(r,500)),l("Status updated successfully","success"),c()}catch{l("Failed to update status","error")}},h=x.filter(s=>{var t,r,f;return!o||((t=s.title)==null?void 0:t.toLowerCase().includes(o.toLowerCase()))||((r=s.company_name)==null?void 0:r.toLowerCase().includes(o.toLowerCase()))||((f=s.employer_name)==null?void 0:f.toLowerCase().includes(o.toLowerCase()))});return v?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Manage Jobs"}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("input",{type:"text",placeholder:"Search by job title, company, or employer...",value:o,onChange:s=>w(s.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>m("all"),className:`px-4 py-2 rounded-lg text-sm font-medium ${d==="all"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:"All"}),e.jsx("button",{onClick:()=>m("active"),className:`px-4 py-2 rounded-lg text-sm font-medium ${d==="active"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:"Active"}),e.jsx("button",{onClick:()=>m("closed"),className:`px-4 py-2 rounded-lg text-sm font-medium ${d==="closed"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:"Closed"}),e.jsx("button",{onClick:()=>m("draft"),className:`px-4 py-2 rounded-lg text-sm font-medium ${d==="draft"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:"Draft"})]})]})}),n.length>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[n.length," job(s) selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>p("close expired"),className:"px-4 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 text-sm font-medium",children:"Close Expired"}),e.jsx("button",{onClick:()=>p("feature"),className:"px-4 py-2 bg-yellow-100 text-yellow-700 rounded-lg hover:bg-yellow-200 text-sm font-medium",children:"Feature Jobs"}),e.jsx("button",{onClick:()=>p("delete"),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 text-sm font-medium",children:"Delete"}),e.jsx("button",{onClick:()=>g([]),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm font-medium",children:"Clear Selection"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:h.length===0?e.jsx("div",{className:"p-8 text-center text-gray-600",children:"No jobs found"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-6 py-3 bg-gray-50 border-b flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:n.length===h.length,onChange:S,className:"w-4 h-4 text-primary-600 rounded focus:ring-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Select All"})]}),e.jsx("div",{className:"divide-y",children:h.map(s=>e.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("input",{type:"checkbox",checked:n.includes(s.id),onChange:()=>k(s.id),className:"mt-1 w-4 h-4 text-primary-600 rounded focus:ring-primary-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(N,{to:`/jobs/${s.id}`,className:"text-xl font-semibold text-gray-900 hover:text-primary-600",children:s.title}),s.is_flagged&&e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-medium",children:"ðŸš© Flagged"}),s.is_featured&&e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded text-xs font-medium",children:"â­ Featured"})]}),e.jsxs("p",{className:"text-gray-600",children:[s.company_name," â€¢ ",s.location,", ",s.country]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${s.status==="active"?"bg-green-100 text-green-800":s.status==="draft"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:s.status})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 text-sm mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Employer:"}),e.jsx("p",{className:"font-medium",children:s.employer_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Type:"}),e.jsx("p",{className:"font-medium",children:s.job_type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Views:"}),e.jsx("p",{className:"font-medium",children:s.views_count||0})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Posted:"}),e.jsx("p",{className:"font-medium",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Expires:"}),e.jsx("p",{className:"font-medium",children:s.expires_at?new Date(s.expires_at).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Source:"}),e.jsx("p",{className:"font-medium",children:s.source||"Direct"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(N,{to:`/jobs/${s.id}`,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 text-sm font-medium",children:"View Job"}),e.jsxs("select",{value:s.status,onChange:t=>P(s.id,t.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"draft",children:"Draft"})]}),e.jsx("button",{onClick:()=>J(s.id,s.is_flagged),className:`px-4 py-2 rounded-lg text-sm font-medium ${s.is_flagged?"bg-red-100 text-red-700 hover:bg-red-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s.is_flagged?"ðŸš© Unflag":"ðŸ³ï¸ Flag"}),e.jsx("button",{onClick:()=>C(s.id),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 text-sm font-medium",children:"Delete"})]})]})]})},s.id))})]})}),a.totalPages>1&&e.jsxs("div",{className:"mt-6 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>u({...a,page:a.page-1}),disabled:a.page===1,className:"px-4 py-2 border border-gray-300 rounded-md disabled:opacity-50 hover:bg-gray-50",children:"Previous"}),e.jsxs("span",{className:"px-4 py-2",children:["Page ",a.page," of ",a.totalPages]}),e.jsx("button",{onClick:()=>u({...a,page:a.page+1}),disabled:a.page===a.totalPages,className:"px-4 py-2 border border-gray-300 rounded-md disabled:opacity-50 hover:bg-gray-50",children:"Next"})]})]})}export{F as default};
