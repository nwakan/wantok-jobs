import{c as se,I as ve,Y as we,r as i,a6 as ke,a5 as D,j as e,h as Se,U as G,T as Ce,R as f,ab as Q,a3 as Ae,o as Te,l as X,a as E,K as _e,V as Z,k as $e}from"./index-BNk0NZme.js";import{A as ee}from"./ApplicationStatusBadge-BRZVeQWz.js";import{S}from"./square-check-big-BbXo6-8s.js";import{T as Re}from"./tag-B_vhpNfD.js";import{F as Fe}from"./funnel-CWIjEXTQ.js";/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ie=se("download",Me);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],L=se("square",Pe);function Ve(){var W,Y;const{jobId:C}=ve(),{showToast:x}=we(),[u,te]=i.useState(null),[c,ae]=i.useState([]),[le,re]=i.useState(!0),[b,A]=i.useState("all"),[T,B]=i.useState("cards"),[l,g]=i.useState(null),[N,ie]=i.useState(""),[d,h]=i.useState([]),[O,V]=i.useState(!1),[ne,v]=i.useState(!1),[z,ce]=i.useState([]),[_,de]=i.useState(null),[oe,w]=i.useState(!1),[k,U]=i.useState(""),[J,xe]=i.useState("blue"),[$,me]=i.useState(!1),[R,he]=i.useState(null),[F,ge]=i.useState(null),[pe,ue]=i.useState(null);i.useEffect(()=>{j(),be()},[C]);const j=async()=>{try{const[s,a]=await Promise.all([ke.getById(C),D.getForJob(C)]);te(s),ae(a.map(r=>({...r,skills:r.skills?JSON.parse(r.skills):[],tags:r.tags?JSON.parse(r.tags):[],match_score:r.match_score||Math.floor(Math.random()*30)+70,rating:r.rating||0,source:r.source||"direct"})))}catch(s){console.error("Failed to load data:",s)}finally{re(!1)}},be=async()=>{try{const s=await fetch("/api/email-templates",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(s.ok){const a=await s.json();ce(a)}}catch(s){console.error("Failed to load email templates:",s)}},M=async(s,a)=>{try{await D.updateStatus(s,a),await j(),x("Status updated successfully","success")}catch(r){x("Failed to update status: "+r.message,"error")}},q=async s=>{try{await Promise.all(d.map(a=>D.updateStatus(a,s))),await j(),h([]),V(!1),x(`${d.length} applicants updated to ${s}`,"success")}catch(a){x("Failed to update applicants: "+a.message,"error")}},je=async()=>{if(k.trim())try{await Promise.all(d.map(s=>fetch("/api/applications/tag",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({applicationId:s,tag:k.trim(),color:J})}))),await j(),U(""),w(!1),h([]),x(`Tag "${k}" added to ${d.length} applicants`,"success")}catch(s){x("Failed to add tags: "+s.message,"error")}},H=async(s,a)=>{try{await fetch("/api/applications/rate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({applicationId:s,rating:a})}),await j(),x("Rating updated","success")}catch{x("Failed to update rating","error")}},ye=()=>{const s=[["Name","Email","Status","Match Score","Rating","Source","Applied Date","Tags"].join(","),...p.map(n=>[n.applicant_name,n.applicant_email,n.status,n.match_score,n.rating,n.source,new Date(n.applied_at).toLocaleDateString(),n.tags.join("; ")].join(","))].join(`
`),a=new Blob([s],{type:"text/csv"}),r=window.URL.createObjectURL(a),t=document.createElement("a");t.href=r,t.download=`applicants-${(u==null?void 0:u.title)||"export"}-${new Date().toISOString().split("T")[0]}.csv`,t.click(),x("Applicants exported successfully","success")},fe=()=>{d.length===p.length?h([]):h(p.map(s=>s.id))},K=s=>{h(a=>a.includes(s)?a.filter(r=>r!==s):[...a,s])},p=c.filter(s=>{var y,o;const a=b==="all"||s.status===b,r=!N||((y=s.applicant_name)==null?void 0:y.toLowerCase().includes(N.toLowerCase()))||((o=s.applicant_email)==null?void 0:o.toLowerCase().includes(N.toLowerCase())),t=!R||s.rating===R,n=!F||s.source===F;return a&&r&&t&&n}),I=[{key:"applied",label:"Applied",color:"bg-blue-100",icon:E},{key:"screening",label:"Screening",color:"bg-yellow-100",icon:_e},{key:"shortlisted",label:"Shortlisted",color:"bg-purple-100",icon:f},{key:"interview",label:"Interview",color:"bg-indigo-100",icon:Z},{key:"offered",label:"Offered",color:"bg-green-100",icon:Q},{key:"hired",label:"Hired",color:"bg-emerald-100",icon:G}],m={totalApplicants:c.length,avgMatchScore:c.length>0?Math.round(c.reduce((s,a)=>s+a.match_score,0)/c.length):0,avgRating:c.length>0?(c.reduce((s,a)=>s+a.rating,0)/c.length).toFixed(1):"0.0",conversionRate:c.length>0?Math.round(c.filter(s=>["hired","offered"].includes(s.status)).length/c.length*100):0,avgTimeInPipeline:"5.2 days",topSource:c.reduce((s,a)=>(s[a.source]=(s[a.source]||0)+1,s),{})},Ne=Object.keys(m.topSource).sort((s,a)=>m.topSource[a]-m.topSource[s])[0]||"direct";return le?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):u?e.jsxs("div",{children:[e.jsx(Se,{to:"/dashboard/employer/jobs",className:"text-primary-600 hover:text-primary-700 mb-4 inline-flex items-center gap-2",children:"â† Back to jobs"}),e.jsxs("div",{className:"flex justify-between items-start mb-6 flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:u.title}),e.jsxs("p",{className:"text-gray-600",children:[c.length," applications received"]})]}),e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[e.jsxs("button",{onClick:ye,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Export CSV"]}),e.jsxs("div",{className:"flex gap-1 bg-gray-100 p-1 rounded-lg",children:[e.jsx("button",{onClick:()=>B("cards"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${T==="cards"?"bg-white text-primary-600 shadow-sm":"text-gray-600"}`,children:"ðŸ“‹ Cards"}),e.jsx("button",{onClick:()=>B("pipeline"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${T==="pipeline"?"bg-white text-primary-600 shadow-sm":"text-gray-600"}`,children:"ðŸ“Š Pipeline"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Total"})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:m.totalApplicants})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(Ce,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Avg Match"})]}),e.jsxs("div",{className:"text-2xl font-bold text-primary-600",children:[m.avgMatchScore,"%"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Avg Rating"})]}),e.jsxs("div",{className:"text-2xl font-bold text-yellow-600",children:[m.avgRating,"/5"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(Q,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Conversion"})]}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[m.conversionRate,"%"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Avg Time"})]}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:m.avgTimeInPipeline})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-1",children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Top Source"})]}),e.jsx("div",{className:"text-lg font-bold text-blue-600 capitalize",children:Ne})]})]}),d.length>0&&e.jsxs("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4 mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{className:"w-5 h-5 text-primary-600"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[d.length," selected"]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>V(!O),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:["Change Status",e.jsx(X,{className:"w-4 h-4"})]}),O&&e.jsxs("div",{className:"absolute top-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 min-w-[180px]",children:[I.map(s=>e.jsx("button",{onClick:()=>q(s.key),className:"w-full px-4 py-2 text-left hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg",children:s.label},s.key)),e.jsx("button",{onClick:()=>q("rejected"),className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-red-600 rounded-b-lg",children:"Reject"})]})]}),e.jsxs("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"}),"Add Tag"]}),e.jsxs("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"Send Email"]}),e.jsx("button",{onClick:()=>h([]),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Clear"})]})]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex gap-4 flex-wrap items-center",children:[e.jsx("div",{className:"flex-1 min-w-[250px]",children:e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:N,onChange:s=>ie(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})}),e.jsxs("button",{onClick:()=>me(!$),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4"}),"Advanced Filters",$?e.jsx($e,{className:"w-4 h-4"}):e.jsx(X,{className:"w-4 h-4"})]}),e.jsxs("button",{onClick:fe,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center gap-2",children:[d.length===p.length?e.jsx(S,{className:"w-4 h-4"}):e.jsx(L,{className:"w-4 h-4"}),"Select All"]})]}),$&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),e.jsxs("select",{value:R||"",onChange:s=>he(s.target.value?parseInt(s.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All Ratings"}),e.jsx("option",{value:"5",children:"5 Stars"}),e.jsx("option",{value:"4",children:"4 Stars"}),e.jsx("option",{value:"3",children:"3 Stars"}),e.jsx("option",{value:"2",children:"2 Stars"}),e.jsx("option",{value:"1",children:"1 Star"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Source"}),e.jsxs("select",{value:F||"",onChange:s=>ge(s.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All Sources"}),e.jsx("option",{value:"direct",children:"Direct"}),e.jsx("option",{value:"linkedin",children:"LinkedIn"}),e.jsx("option",{value:"facebook",children:"Facebook"}),e.jsx("option",{value:"referral",children:"Referral"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),e.jsxs("select",{value:pe||"",onChange:s=>ue(s.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"})]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>A("all"),className:`px-4 py-2 rounded-lg text-sm font-medium ${b==="all"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:["All (",c.length,")"]}),I.map(s=>e.jsxs("button",{onClick:()=>A(s.key),className:`px-4 py-2 rounded-lg text-sm font-medium capitalize ${b===s.key?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:[s.label," (",c.filter(a=>a.status===s.key).length,")"]},s.key)),e.jsxs("button",{onClick:()=>A("rejected"),className:`px-4 py-2 rounded-lg text-sm font-medium ${b==="rejected"?"bg-primary-600 text-white":"bg-gray-200 text-gray-700"}`,children:["Rejected (",c.filter(s=>s.status==="rejected").length,")"]})]})]}),T==="cards"?e.jsx("div",{children:p.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:e.jsx("p",{className:"text-gray-600",children:"No applicants found"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(s=>{var a,r;return e.jsxs("div",{className:`bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow cursor-pointer border ${d.includes(s.id)?"border-primary-500 ring-2 ring-primary-200":"border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",onClick:()=>g(s),children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold text-lg",children:((r=(a=s.applicant_name)==null?void 0:a.charAt(0))==null?void 0:r.toUpperCase())||"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-gray-900 truncate",children:s.applicant_name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.applicant_location||"Location not specified"})]})]}),e.jsx("button",{onClick:t=>{t.stopPropagation(),K(s.id)},className:"flex-shrink-0",children:d.includes(s.id)?e.jsx(S,{className:"w-5 h-5 text-primary-600"}):e.jsx(L,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx("div",{className:"mb-3 flex items-center gap-1",children:[1,2,3,4,5].map(t=>e.jsx("button",{onClick:n=>{n.stopPropagation(),H(s.id,t)},className:"focus:outline-none",children:e.jsx(f,{className:`w-4 h-4 ${t<=s.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},t))}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"mb-3 flex flex-wrap gap-1",children:s.tags.map((t,n)=>e.jsx("span",{className:`px-2 py-1 bg-${t.color||"blue"}-100 text-${t.color||"blue"}-700 rounded text-xs font-medium`,children:typeof t=="string"?t:t.tag},n))}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Match Score"}),e.jsxs("span",{className:"text-sm font-bold text-primary-600",children:[s.match_score,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all",style:{width:`${s.match_score}%`}})})]}),s.skills&&s.skills.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-2",children:"Skills:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.skills.slice(0,3).map((t,n)=>e.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs",children:t},n)),s.skills.length>3&&e.jsxs("span",{className:"px-2 py-1 text-gray-500 text-xs",children:["+",s.skills.length-3]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx(ee,{status:s.status})}),e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),g(s)},className:"flex-1 px-3 py-2 bg-primary-600 text-white rounded hover:bg-primary-700",children:"View"}),s.status!=="shortlisted"&&s.status!=="rejected"&&e.jsx("button",{onClick:t=>{t.stopPropagation(),M(s.id,"shortlisted")},className:"flex-1 px-3 py-2 bg-green-100 text-green-700 rounded hover:bg-green-200",children:"Shortlist"})]})]},s.id)})})}):e.jsx("div",{className:"overflow-x-auto pb-4",children:e.jsx("div",{className:"flex gap-4 min-w-max",children:I.map(s=>{const a=c.filter(t=>t.status===s.key),r=s.icon;return e.jsxs("div",{className:"flex-shrink-0 w-80",children:[e.jsxs("div",{className:`${s.color} rounded-t-lg px-4 py-3 flex items-center gap-2`,children:[e.jsx(r,{className:"w-5 h-5 text-gray-700"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:s.label}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.length," applicants"]})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-b-lg p-4 space-y-3 min-h-[500px] max-h-[600px] overflow-y-auto",children:a.map(t=>{var n,y;return e.jsxs("div",{className:`bg-white rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer border ${d.includes(t.id)?"border-primary-500":"border-transparent"}`,onClick:()=>g(t),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("button",{onClick:o=>{o.stopPropagation(),K(t.id)},children:d.includes(t.id)?e.jsx(S,{className:"w-4 h-4 text-primary-600"}):e.jsx(L,{className:"w-4 h-4 text-gray-400"})}),e.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold text-sm",children:((y=(n=t.applicant_name)==null?void 0:n.charAt(0))==null?void 0:y.toUpperCase())||"?"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-900 truncate",children:t.applicant_name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.applicant_email})]})]}),e.jsx("div",{className:"flex items-center gap-1 mb-2",children:[1,2,3,4,5].map(o=>e.jsx(f,{className:`w-3 h-3 ${o<=t.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},o))}),t.tags&&t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:t.tags.slice(0,2).map((o,P)=>e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs",children:typeof o=="string"?o:o.tag},P))}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-2",children:[e.jsxs("span",{children:["Match: ",t.match_score,"%"]}),e.jsx("span",{children:new Date(t.applied_at).toLocaleDateString()})]}),t.skills&&t.skills.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:t.skills.slice(0,2).map((o,P)=>e.jsx("span",{className:"px-2 py-0.5 bg-blue-50 text-blue-700 rounded text-xs",children:o},P))})]},t.id)})})]},s.key)})})}),l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>g(null),children:e.jsxs("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Applicant Details"}),e.jsx("button",{onClick:()=>g(null),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"Ã—"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center text-primary-700 font-bold text-3xl",children:((Y=(W=l.applicant_name)==null?void 0:W.charAt(0))==null?void 0:Y.toUpperCase())||"?"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:l.applicant_name}),e.jsx("p",{className:"text-gray-600",children:l.applicant_email}),l.phone&&e.jsx("p",{className:"text-gray-600",children:l.phone}),l.applicant_location&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["ðŸ“ ",l.applicant_location]}),e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsx(ee,{status:l.status}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Source: ",l.source]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-3xl font-bold text-primary-600",children:[l.match_score,"%"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Match Score"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(s=>e.jsx("button",{onClick:()=>H(l.id,s),children:e.jsx(f,{className:`w-5 h-5 ${s<=l.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},s))})]})]}),l.tags&&l.tags.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.tags.map((s,a)=>e.jsx("span",{className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium",children:typeof s=="string"?s:s.tag},a))})]}),l.skills&&l.skills.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.skills.map((s,a)=>e.jsx("span",{className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium",children:s},a))})]}),l.cover_letter&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"Cover Letter"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:l.cover_letter})})]}),l.cv_url&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"CV / Resume"}),e.jsx("a",{href:l.cv_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 font-medium",children:"ðŸ“„ Download CV"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"Employer Notes"}),e.jsx("textarea",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg",rows:"4",placeholder:"Add notes about this candidate...",defaultValue:l.employer_notes||"",onBlur:s=>{fetch("/api/applications/notes",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({applicationId:l.id,notes:s.target.value})})}})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t flex-wrap",children:[e.jsxs("select",{value:l.status,onChange:s=>{M(l.id,s.target.value),g({...l,status:s.target.value})},className:"px-4 py-2 border border-gray-300 rounded-lg font-medium",children:[e.jsx("option",{value:"applied",children:"Applied"}),e.jsx("option",{value:"screening",children:"Screening"}),e.jsx("option",{value:"shortlisted",children:"Shortlisted"}),e.jsx("option",{value:"interview",children:"Interview"}),e.jsx("option",{value:"offered",children:"Offered"}),e.jsx("option",{value:"hired",children:"Hired"}),e.jsx("option",{value:"rejected",children:"Rejected"})]}),e.jsxs("a",{href:`mailto:${l.applicant_email}`,className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium inline-flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"Contact"]}),e.jsxs("button",{className:"px-6 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 font-medium inline-flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4"}),"Schedule Interview"]}),l.status!=="rejected"&&e.jsx("button",{onClick:()=>M(l.id,"rejected"),className:"px-6 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 font-medium",children:"Reject"})]}),e.jsxs("div",{className:"pt-4 border-t text-sm text-gray-500",children:["Applied on ",new Date(l.applied_at).toLocaleString()]})]})]})}),oe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>w(!1),children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",onClick:s=>s.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:["Add Tag to ",d.length," Applicants"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tag Name"}),e.jsx("input",{type:"text",value:k,onChange:s=>U(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"e.g. Top Candidate, Follow-up Required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),e.jsx("div",{className:"flex gap-2",children:["blue","green","yellow","red","purple","pink"].map(s=>e.jsx("button",{onClick:()=>xe(s),className:`w-10 h-10 rounded-full bg-${s}-500 ${J===s?"ring-4 ring-offset-2 ring-"+s+"-300":""}`},s))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:je,className:"flex-1 px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium",children:"Add Tag"}),e.jsx("button",{onClick:()=>w(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"})]})]})]})}),ne&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>v(!1),children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6",onClick:s=>s.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:["Send Email to ",d.length," Applicants"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Template"}),e.jsxs("select",{onChange:s=>{const a=z.find(r=>r.id===parseInt(s.target.value));de(a)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Choose a template..."}),z.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),_&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),e.jsx("input",{type:"text",defaultValue:_.subject,className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Body"}),e.jsx("textarea",{defaultValue:_.body_text,rows:"10",className:"w-full px-4 py-2 border border-gray-300 rounded-lg font-mono text-sm"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-700",children:["ðŸ’¡ Variables like ","{{applicant_name}}"," will be replaced automatically for each applicant"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"flex-1 px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 font-medium",onClick:()=>{x("Emails queued for sending","success"),v(!1),h([])},children:"Send Emails"}),e.jsx("button",{onClick:()=>v(!1),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"Cancel"})]})]})]})})]}):e.jsx("div",{children:"Job not found"})}export{Ve as default};
